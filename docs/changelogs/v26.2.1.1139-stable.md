---
sidebar_position: 1
sidebar_label: 2026
---

# 2026 Changelog

### ClickHouse release v26.2.1.1139-stable (11da5d85cef) FIXME as compared to v26.2.1.1-new (88589db8a2c)

#### Backward Incompatible Change
* Improved storage format of statistics. All statistics are now stored in a single file. [#93414](https://github.com/ClickHouse/ClickHouse/pull/93414) ([Anton Popov](https://github.com/CurtizJ)).
* Limit S3(Azure)Queue in-memory metadata. System tables are renamed from `azure_queue` to `azure_queue_metadata_cache` and `system.s3queue` to `s3queue_metadata_cache`. [#95809](https://github.com/ClickHouse/ClickHouse/pull/95809) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix logical error on `Variant` type mismatch. [#95811](https://github.com/ClickHouse/ClickHouse/pull/95811) ([Bharat Nallan](https://github.com/bharatnc)).
* BREAKING CHANGE: With that change deduplication is turned ON for all inserts by default. It was OFF before for async inserts and for MV's, but it was ON for sync inserts. The goal is to have the same defaults for both way of inserts. If you have deduplication explicitly disable on your cluster, you have to explicitly set `deduplicate_insert='backward_compatible_choice'` to keep the old behavior. The same with `deduplicate_blocks_in_dependent_materialized_views`. [#95970](https://github.com/ClickHouse/ClickHouse/pull/95970) ([Sema Checherinda](https://github.com/CheSema)).
* `DATE` columns from PostgreSQL are now inferred as `Date32` in ClickHouse (in previous versions they were inferred as `Date`, which led to overflow of the values outside of a narrow range). Allow inserting `Date32` values back to PostgreSQL. Closes [#73084](https://github.com/ClickHouse/ClickHouse/issues/73084). [#95999](https://github.com/ClickHouse/ClickHouse/pull/95999) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* The semantics of the `do_not_merge_across_partitions_select_final` setting were made more obvious. Previously, the feature could be automatically enabled when the setting was not explicitly set in the configs. It caused confusion repeatedly and, unfortunately, led to some issues in production. Now, the rules are simpler: `do_not_merge_across_partitions_select_final=1` enables the functionality unconditionally. If `do_not_merge_across_partitions_select_final=0`, then automatic is used only if the new setting `enable_automatic_decision_for_merging_across_partitions_for_final=1` and not used otherwise. To preserve the old behaviour as much as possible, the defaults were set to `do_not_merge_across_partitions_select_final=0` and `enable_automatic_decision_for_merging_across_partitions_for_final=1`. [#96110](https://github.com/ClickHouse/ClickHouse/pull/96110) ([Nikita Taranov](https://github.com/nickitat)).
* Add s3 schema validation. This closes [#96089](https://github.com/ClickHouse/ClickHouse/issues/96089). [#96194](https://github.com/ClickHouse/ClickHouse/pull/96194) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Forbid using subqueries in ORDER BY and other table key expressions. [#96847](https://github.com/ClickHouse/ClickHouse/pull/96847) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Enable `apply_row_policy_after_final` by default. Initially, when `optimize_move_to_prewhere_if_final=0`, both ROW POLICY and PREWHERE respect FINAL and were applied after FINAL. This was broken by [#87303](https://github.com/ClickHouse/ClickHouse/issues/87303), which ignored the `optimize_move_to_prewhere_if_final` for the ROW POLICY filter. To fix this, this PR enables the setting `apply_row_policy_after_final` introduced in [#91065](https://github.com/ClickHouse/ClickHouse/issues/91065). With `apply_row_policy_after_final` enabled, ROW POLICY would continue to respect FINAL by default, as previously. This PR is an incompatible change because it changes the behaviour for `optimize_move_to_prewhere_if_final=1`. Now, to get the ROW POLICY applied before FINAL, `apply_row_policy_after_final` should be used instead of `optimize_move_to_prewhere_if_final`. [#97279](https://github.com/ClickHouse/ClickHouse/pull/97279) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).

#### New Feature
* Support time-based one-time password as an authentication method. [#71273](https://github.com/ClickHouse/ClickHouse/pull/71273) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Enable splitting data and system files in cache into separate segments. [#87834](https://github.com/ClickHouse/ClickHouse/pull/87834) ([MikhailBurdukov](https://github.com/MikhailBurdukov)).
* Added a new SLRU cache for Parquet metadata to improve reading performance by removing the need to re-download files just to read metadata. The cache can be dropped with `SYSTEM DROP PARQUET METADATA CACHE`. Resolves [#89102](https://github.com/ClickHouse/ClickHouse/issues/89102). [#89750](https://github.com/ClickHouse/ClickHouse/pull/89750) ([Grant Holly](https://github.com/grantholly-clickhouse)).
* Add new system table `system.user_defined_functions` to monitor UDF loading status and configuration. [#90340](https://github.com/ClickHouse/ClickHouse/pull/90340) ([Xu Jia](https://github.com/XuJia0210)).
* Add the default_dictionary_database setting, which lets ClickHouse resolve external dictionaries referenced without a database qualifier in a specified default database. This simplifies migration from XML-defined global dictionaries to SQL-defined per-database dictionaries—allowing existing dictionary queries (e.g. dictGet('name', …)) to continue working without modification. [#91412](https://github.com/ClickHouse/ClickHouse/pull/91412) ([Dmitrii Plotnikov](https://github.com/dimbo4ka)).
* Support auxiliary zookeeper for `DatabaseReplicated`. [#91683](https://github.com/ClickHouse/ClickHouse/pull/91683) ([RinChanNOW](https://github.com/RinChanNOWWW)).
* Implement new table function `primes` and new system table `system.primes` that contains prime numbers in ascending order. Closes [#90839](https://github.com/ClickHouse/ClickHouse/issues/90839). [#92776](https://github.com/ClickHouse/ClickHouse/pull/92776) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Async inserts support parallel quorum. The inserted data is replicated to the quorum. If duplicates are found, query waits until previously inserted data is replicated as well. [#93356](https://github.com/ClickHouse/ClickHouse/pull/93356) ([Sema Checherinda](https://github.com/CheSema)).
* Added functions `colorOKLABToSRGB`, `colorSRGBToOKLAB` to convert value from sRGB to OKLAB and vice versa. [#93361](https://github.com/ClickHouse/ClickHouse/pull/93361) ([Pranav Tiwari](https://github.com/pranavt84)).
* New deduplicate_insert which overrides insert_deduplicate and async_insert_deduplicate. [#94413](https://github.com/ClickHouse/ClickHouse/pull/94413) ([Sema Checherinda](https://github.com/CheSema)).
* Allow certain functions without parentheses in SQL. Closes [#52102](https://github.com/ClickHouse/ClickHouse/issues/52102). [#94678](https://github.com/ClickHouse/ClickHouse/pull/94678) ([Aly Kafoury](https://github.com/AlyHKafoury)).
* Server setting `insert_deduplication_version` makes it possible to migrate on unified deduplication hash. [#95409](https://github.com/ClickHouse/ClickHouse/pull/95409) ([Sema Checherinda](https://github.com/CheSema)).
* New configuration options: logger.startup_console_level & logger.shutdown_console_level to allow for overriding the console log level during the startup & shutdown of Clickhouse respectively. [#95919](https://github.com/ClickHouse/ClickHouse/pull/95919) ([Garrett Thomas](https://github.com/garrettthomaskth)).
* Add xxh3_128 hashing function. [#96055](https://github.com/ClickHouse/ClickHouse/pull/96055) ([Raúl Marín](https://github.com/Algunenano)).
* Added `OPTIMIZE <table> DRY RUN PARTS <part names>` query to simulate merges without committing the result part. It may be useful for testing purposes: verifying merge correctness in the new version, deterministically reproducing merge-related bugs, and reliably benchmarking merge performance. [#96122](https://github.com/ClickHouse/ClickHouse/pull/96122) ([Anton Popov](https://github.com/CurtizJ)).
* Add new check enabled by default via setting `check_named_collection_dependencies` to avoid dropping named collections used by tables. [#96181](https://github.com/ClickHouse/ClickHouse/pull/96181) ([Pablo Marcos](https://github.com/pamarcos)).
* Add `lazy_load_tables` database setting. When enabled, tables are not loaded during database startup — a lightweight `StorageTableProxy` is created instead and the real table engine is materialized on first access. [#96283](https://github.com/ClickHouse/ClickHouse/pull/96283) ([xiaohuanlin](https://github.com/xiaohuanlin)).
* Users can now use ClickStack directly from ClickHouse, useful for debugging and local development. [#96597](https://github.com/ClickHouse/ClickHouse/pull/96597) ([Aaron Knudtson](https://github.com/knudtty)).
* Added `system.fail_points` to inspect existing failpoints in the server and whether they are enabled or not. This is going to help automate testing. [#96762](https://github.com/ClickHouse/ClickHouse/pull/96762) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Google biglake catalog integration. This closes [#95339](https://github.com/ClickHouse/ClickHouse/issues/95339). [#97104](https://github.com/ClickHouse/ClickHouse/pull/97104) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Start migration of deduplication hashes. [#97562](https://github.com/ClickHouse/ClickHouse/pull/97562) ([Sema Checherinda](https://github.com/CheSema)).

#### Experimental Feature
* Implement LLVM Code Coverage job and enable it initially for master branch. [#90952](https://github.com/ClickHouse/ClickHouse/pull/90952) ([Alexey Bakharew](https://github.com/alexbakharew)).
* Vector search in ClickHouse can now use replicas in the cluster to _distribute_ the load and search of vector index parts. This enables ClickHouse to support large vector indexes that exceed the memory capacity of a single VM. [#95876](https://github.com/ClickHouse/ClickHouse/pull/95876) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Add server-side AST fuzzer controlled by `ast_fuzzer_runs` and `ast_fuzzer_any_query` settings. When enabled, the server runs randomized mutations of each query after its normal execution, discarding the results. [#97568](https://github.com/ClickHouse/ClickHouse/pull/97568) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### Performance Improvement
* Speed up some hash join operations by implementing dynamic dispatch for ColumnVector::replicate. [#79573](https://github.com/ClickHouse/ClickHouse/pull/79573) ([Raúl Marín](https://github.com/Algunenano)).
* Performance improvement for ParallelHashJoin in cases of complex predicates. Previously, we were processing non-joined rows in one thread, which is suboptimal the idea of the optimization is to paralellize the processing of the non-joined rows across multiple threads. Can be toggled by the `parallel_non_joined_rows_processing` setting. Enabled by default. [#92068](https://github.com/ClickHouse/ClickHouse/pull/92068) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Allow any deterministic expression in Primary Key to be used for data skipping (e.g. `ORDER BY cityHash64(user_id)`/ `ORDER BY length(user_id)`). For deterministic expressions, ClickHouse can apply the expression to query constants and use the result in the primary key index for predicates like `=`, `IN`, and `has`. If the expression is also injective (e.g. `ORDER BY hex(p)` or `ORDER BY reverse(tuple(reverse(p), hex(p)))`), we can effectively use the index for the negated forms: `!=`, `NOT IN`, and `NOT has`. Closes [#10685](https://github.com/ClickHouse/ClickHouse/issues/10685). Closes [#82161](https://github.com/ClickHouse/ClickHouse/issues/82161). [#92952](https://github.com/ClickHouse/ClickHouse/pull/92952) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Slightly optimize parsing of JSON type. [#93614](https://github.com/ClickHouse/ClickHouse/pull/93614) ([Pavel Kruglov](https://github.com/Avogar)).
* Improve memory footprint of ASTLiteral by removing std::optional<TokenIterator> begin/end from object. Optimization makes sense as fields are not used when highlighting is not used and there is no VALUES parsing. [#93974](https://github.com/ClickHouse/ClickHouse/pull/93974) ([Ilya Yatsishin](https://github.com/qoega)).
* Optimize memory consumption of named tuple AST objects. Place column names as strings in tuple object instead of heaving them in generic AST literal nodes. [#94704](https://github.com/ClickHouse/ClickHouse/pull/94704) ([Ilya Yatsishin](https://github.com/qoega)).
* Devirtualization is improved with additional linker options. [#94737](https://github.com/ClickHouse/ClickHouse/pull/94737) ([Nikita Taranov](https://github.com/nickitat)).
* Improve clone replica performance for ReplicatedMergeTree tables with many parts by batching ZooKeeper requests. [#94847](https://github.com/ClickHouse/ClickHouse/pull/94847) ([c-end](https://github.com/c-end)).
* If a `FINAL` query used primary key condition for filtering followed by skip indexes for other conditions, the `PrimaryKeyExpand` processing step will now only check the initial shortlisted primary key ranges for intersection. [#94903](https://github.com/ClickHouse/ClickHouse/pull/94903) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Create std::vector out of `for` loop and allocate memory before it. This should avoid allocations on each iterations. [#95178](https://github.com/ClickHouse/ClickHouse/pull/95178) ([Alexey Bakharew](https://github.com/alexbakharew)).
* When read step already has PREWHERE filters a new filter cannot be added. This change postpones PREWHERE optimization until after JOIN runtime filter optimization so that runtime filters can be also pushed to PREWHERE. [#95838](https://github.com/ClickHouse/ClickHouse/pull/95838) ([Alexander Gololobov](https://github.com/davenger)).
* Speedup T64 codec compression by using dynamic dispatch on x86. [#95881](https://github.com/ClickHouse/ClickHouse/pull/95881) ([Raúl Marín](https://github.com/Algunenano)).
* Speed up `uniq` over numeric types by batching inserts when possible (not null, not -If, no GROUP BY, no IPv6 or String). [#95904](https://github.com/ClickHouse/ClickHouse/pull/95904) ([Raúl Marín](https://github.com/Algunenano)).
* `ZooKeeper::observeOperations` has been found to account for >20% of the ZooKeeper receive thread CPU consumption. This change addresses that by: 1. For `AggregatedZooKeeperLog::stats`, use `CityHash64` instead of `SipHash` which is >10x faster. 2. For `Coordination::ErrorCounter`, use `std::array<std::atomic<UInt32>, N>` instead of `std::unordered_map` and `std::mutex`. [#95962](https://github.com/ClickHouse/ClickHouse/pull/95962) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Revert 64 byte alignment for ProfileEvents::Counter. [#96097](https://github.com/ClickHouse/ClickHouse/pull/96097) ([Azat Khuzhin](https://github.com/azat)).
* Trim size of CachedOnDiskReadBufferFromFile structure 50x. [#96098](https://github.com/ClickHouse/ClickHouse/pull/96098) ([Azat Khuzhin](https://github.com/azat)).
* Don't copy old data on HashTable::resize if it's empty. [#96180](https://github.com/ClickHouse/ClickHouse/pull/96180) ([Raúl Marín](https://github.com/Algunenano)).
* Support JOIN runtime filters for `RIGHT OUTER` JOINs. [#96183](https://github.com/ClickHouse/ClickHouse/pull/96183) ([Hechem Selmi](https://github.com/m-selmi)).
* Previously, text index direct read optimization was applied only when all parts had a materialized text index. This PR adds partial support: if some parts have a materialized text index, those parts will use it, while parts without a materialized text index will fall back to executing the original filter expression. [#96411](https://github.com/ClickHouse/ClickHouse/pull/96411) ([Anton Popov](https://github.com/CurtizJ)).
* Avoid memory usage regression on INSERTs when deduplication is not enabled. [#96503](https://github.com/ClickHouse/ClickHouse/pull/96503) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Avoid including boost/multiprecision headers in `wide_integer_impl.h` on platforms with adequate `long double`, improving build time. TODO: CHANGE CATEGORY TO BUILD IF PERFORMANCE DOES NOT CHANGE. [#96633](https://github.com/ClickHouse/ClickHouse/pull/96633) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#97942](https://github.com/ClickHouse/ClickHouse/issues/97942): In general the original block is needed for deduplication, but for sync insert we could omit it and save the memory for good. [#96661](https://github.com/ClickHouse/ClickHouse/pull/96661) ([Sema Checherinda](https://github.com/CheSema)).
* Added `minmax` secondary indexes on time columns and `bloom_filter` indexes on `query_id`/`initial_query_id` columns to system log tables for faster filtering. [#96712](https://github.com/ClickHouse/ClickHouse/pull/96712) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* LZ4: Speed up decompress of 32 byte blocks in x86. [#96778](https://github.com/ClickHouse/ClickHouse/pull/96778) ([Raúl Marín](https://github.com/Algunenano)).
* Lazy materialization optimization is now applied to all branches of a `UNION ALL` query, not just the first one. Queries that combine multiple sorted and limited reads from different `MergeTree` tables via `UNION ALL` will now benefit from deferred column reading on every branch, reducing I/O. [#96832](https://github.com/ClickHouse/ClickHouse/pull/96832) ([Federico Ginosa](https://github.com/menxit)).
* Optimize minmax skip index computation during INSERT by removing an unnecessary data copy and enabling vectorized min/max calculation for numeric columns. [#97392](https://github.com/ClickHouse/ClickHouse/pull/97392) ([Raúl Marín](https://github.com/Algunenano)).
* Backported in [#98184](https://github.com/ClickHouse/ClickHouse/issues/98184): Improved performance of text index analysis for queries with combined conditions involving both indexed and non-indexed columns. Previously, early exit optimization during index analysis was incorrectly disabled in such cases. [#98096](https://github.com/ClickHouse/ClickHouse/pull/98096) ([Anton Popov](https://github.com/CurtizJ)).

#### Improvement
* Implement readBigAt in fs cache read buffer to allow parallelized read (for remote table engines/functions). [#71781](https://github.com/ClickHouse/ClickHouse/pull/71781) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Respect command-line overrides when reloading configuration. Closes [#80294](https://github.com/ClickHouse/ClickHouse/issues/80294). [#80295](https://github.com/ClickHouse/ClickHouse/pull/80295) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* The optimization enable_join_runtime_filters is now the default. [#89314](https://github.com/ClickHouse/ClickHouse/pull/89314) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Allow key-value overrides for named collection parameters in mongodb table function. [#89616](https://github.com/ClickHouse/ClickHouse/pull/89616) ([vanchaklar](https://github.com/vanchaklar)).
* The unused columns are removed also from the reading step in case of reading from a MergeTree. It is especially useful when a filter is pushed down into `PREWHERE`. [#89982](https://github.com/ClickHouse/ClickHouse/pull/89982) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Replace math functions from glibc with llvm-libc implementations. [#90151](https://github.com/ClickHouse/ClickHouse/pull/90151) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Support read in order optimization for complex sorting functions (like icebergBucket, icebergTruncate, etc). [#90256](https://github.com/ClickHouse/ClickHouse/pull/90256) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Add role-based access to Glue catalog. Use settings `aws_role_arn` and, optionally, `aws_role_session_name`. [#90825](https://github.com/ClickHouse/ClickHouse/pull/90825) ([Antonio Andelic](https://github.com/antonio2368)).
* This PR adds OpenTelemetry tracing for Keeper requests. [#91332](https://github.com/ClickHouse/ClickHouse/pull/91332) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Add a new column named parts_postpone_reasons in system.mutations to improve diagnostics, which shows the parts postpone reasons. [#92206](https://github.com/ClickHouse/ClickHouse/pull/92206) ([Shaohua Wang](https://github.com/tiandiwonder)).
* Added a setting `add_minmax_index_for_time_columns` that, when enabled, automatically creates minmax indexes for all `Date`, `Date32`, `Time`, `Time64`, `DateTime`, and `DateTime64` columns. [#93355](https://github.com/ClickHouse/ClickHouse/pull/93355) ([Michael Jarrett](https://github.com/EmeraldShift)).
* Track changes in the number of rows to read (due to inserts/deletes or query condition cache usage) in `DataflowStatisticsCache`. [#93636](https://github.com/ClickHouse/ClickHouse/pull/93636) ([Nikita Taranov](https://github.com/nickitat)).
* Support SYSTEM RESET DDL WORKER [ON CLUSTER] query. It requests to reset the state of DDLWorker in its main thread. It is helpful to refresh the replica active when host IDs are updated. [#93780](https://github.com/ClickHouse/ClickHouse/pull/93780) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Support mutation_ids in system.part_log for event type of MUTATE_PART and MUTATE_PART_START. [#93811](https://github.com/ClickHouse/ClickHouse/pull/93811) ([Shaohua Wang](https://github.com/tiandiwonder)).
* Background operations (Mutate, Merge) can now be configured independently via 'background' profile. Previously such operations shared settings with regular queries via 'default' profile. [#93905](https://github.com/ClickHouse/ClickHouse/pull/93905) ([Arsen Muk](https://github.com/arsenmuk)).
* Add more information to `system.crash_log`. [#94112](https://github.com/ClickHouse/ClickHouse/pull/94112) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Added new `QueryNonInternal` metric to track the number of executing non-internal queries. This metric is exposed as `ClickHouseMetrics_QueryNonInternal` and helps operators monitor query concurrency against the `max_concurrent_queries` limit, which only applies to non-internal queries. [#94284](https://github.com/ClickHouse/ClickHouse/pull/94284) ([Ashwath Singh](https://github.com/ashwath)).
* Improved processing 'show tables' query by fetching only names of tables and improved getLightweightTablesIterator to return structure containing only table names. resolves [#93835](https://github.com/ClickHouse/ClickHouse/issues/93835). [#94467](https://github.com/ClickHouse/ClickHouse/pull/94467) ([Smita Kulkarni](https://github.com/SmitaRKulkarni)).
* Added **input_format_max_block_wait_ms** setting to emit data blocks by timeout and allowed processing of remaining data when an HTTP connection is closed unexpectedly. [#94509](https://github.com/ClickHouse/ClickHouse/pull/94509) ([Mostafa Mohamed Salah](https://github.com/Sasao4o)).
* Support input bytes statistics collection for columns from compact parts in `RuntimeDataflowStatisticsCacheUpdater`. [#94626](https://github.com/ClickHouse/ClickHouse/pull/94626) ([Nikita Taranov](https://github.com/nickitat)).
* Add a check for Keeper misconfiguration leading to cluster assembly failures. Closes [#60932](https://github.com/ClickHouse/ClickHouse/issues/60932). [#94682](https://github.com/ClickHouse/ClickHouse/pull/94682) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Improve `assumeNotNull`, `coalesce`, `ifNull` to enable primary key and skip index pruning for range predicates when key columns are wrapped in these functions. Closes [#94689](https://github.com/ClickHouse/ClickHouse/issues/94689). [#94754](https://github.com/ClickHouse/ClickHouse/pull/94754) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Enable fast libcxx hardening for release builds. This is mostly needed for out-of-bounds checks. Given performance tests results, no noticeable performance impact is expected. [#94757](https://github.com/ClickHouse/ClickHouse/pull/94757) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Add `iif` function to ClickHouse KQL. [#94790](https://github.com/ClickHouse/ClickHouse/pull/94790) ([happyso](https://github.com/sunyeongchoi)).
* Add with_data & with_stat extension to getChildren Keeper request. This allows fetching not only the list of children, but also their `stat` and/or `data` in a single operation. [#94826](https://github.com/ClickHouse/ClickHouse/pull/94826) ([Nikolay Degterinsky](https://github.com/evillique)).
* Improve JSON prefixes deserialization during part loading. [#94848](https://github.com/ClickHouse/ClickHouse/pull/94848) ([Pavel Kruglov](https://github.com/Avogar)).
* The index analysis is done only once (in most cases) regardless of whether we end up executing a local plan or a plan with parallel replicas. [#94854](https://github.com/ClickHouse/ClickHouse/pull/94854) ([Nikita Taranov](https://github.com/nickitat)).
* Refactor the write using full INSERT pipeline, which triggers materialized views on the target table. [#94890](https://github.com/ClickHouse/ClickHouse/pull/94890) ([Kai Zhu](https://github.com/nauu)).
* Use vector similarity search plan optimizations only if the index exists for the search column. [#94998](https://github.com/ClickHouse/ClickHouse/pull/94998) ([Eduard Karacharov](https://github.com/korowa)).
* Check for the total memory limit before the user authentication and throw `(total) memory limit exceeded` if the total limit is more than allowed. [#95003](https://github.com/ClickHouse/ClickHouse/pull/95003) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Add setting enabling throwing an exception on reading from a table if the table has some row policies but no row policies are for the current user. That often means misconfiguration of the access control so it's better to throw an exception in such cases. [#95014](https://github.com/ClickHouse/ClickHouse/pull/95014) ([Vitaly Baranov](https://github.com/vitlibar)).
* Dynamic update s3 access tokens in long queries with unity catalog. This closes [#93981](https://github.com/ClickHouse/ClickHouse/issues/93981). [#95069](https://github.com/ClickHouse/ClickHouse/pull/95069) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Disable jemalloc's dirty page decay if ClickHouse is under sustained memory pressure for `memory_worker_decay_adjustment_period_ms` milliseconds. Enable jemalloc's dirty page decay back if ClickHouse is working under normal conditions for same amount of time. [#95145](https://github.com/ClickHouse/ClickHouse/pull/95145) ([Antonio Andelic](https://github.com/antonio2368)).
* S3Queue auxiliary Zookeeper support using `keeper_path` setting from s3Queue. [#95203](https://github.com/ClickHouse/ClickHouse/pull/95203) ([Diego Nieto](https://github.com/lesandie)).
* Allow to enable distributed index analysis based on amount of parts (`distributed_index_analysis_min_parts_to_activate`) and indexes size (`distributed_index_analysis_min_indexes_size_to_activate`). [#95216](https://github.com/ClickHouse/ClickHouse/pull/95216) ([Azat Khuzhin](https://github.com/azat)).
* Respect `max_parts_to_merge_at_once` in TTL drop part merges. [#95315](https://github.com/ClickHouse/ClickHouse/pull/95315) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Support for extended table aliases for JOINs (queries like `SELECT * FROM (SELECT 1) AS t(a) JOIN (SELECT 1) AS u(b) ON a = b`). Closes [#95131](https://github.com/ClickHouse/ClickHouse/issues/95131). [#95331](https://github.com/ClickHouse/ClickHouse/pull/95331) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* `QBit` is now GA. [#95358](https://github.com/ClickHouse/ClickHouse/pull/95358) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Add `connection_address` and `connection_port` to query_log to reflect physical connection (`address` and `port` are replaced when connected through proxy and auth_use_forwarded_address=1). [#95471](https://github.com/ClickHouse/ClickHouse/pull/95471) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* Enable PREWHERE optimization for Iceberg tables. [#95476](https://github.com/ClickHouse/ClickHouse/pull/95476) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix incorrect memory accounting for the query conditions cache. The key problem was that it didn't take into account the cache key that composed of several strings (like part_name, the table id and the whole SQL condition). [#95478](https://github.com/ClickHouse/ClickHouse/pull/95478) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* Server started with the embedded configuration will allow to manipulate users and grants, saving them to the `access` directory, as the regular configuration does. This improves testing. Also enabled all access_control_improvements in the embedded config and in clickhouse-local. [#95481](https://github.com/ClickHouse/ClickHouse/pull/95481) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Reduce the memory footprint of some AST classes. [#95514](https://github.com/ClickHouse/ClickHouse/pull/95514) ([Raúl Marín](https://github.com/Algunenano)).
* Schema inference now respects `allow_experimental_nullable_tuple_type`. When enabled, it allows inferred tuple types to be `Nullable(Tuple(...))`, so missing nested objects can become `NULL` instead of a tuple of `NULL` elements. [#95525](https://github.com/ClickHouse/ClickHouse/pull/95525) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Bump internal libxml2 to 2.15.1. [#95574](https://github.com/ClickHouse/ClickHouse/pull/95574) ([Robert Schulze](https://github.com/rschu1ze)).
* Improved S3 authentication error messages to include a hint to check credentials when access is denied. [#95648](https://github.com/ClickHouse/ClickHouse/pull/95648) ([Gerald Latkovic](https://github.com/batkovic75)).
* Enable statistics cache and set the update period of cache to 300s. [#95841](https://github.com/ClickHouse/ClickHouse/pull/95841) ([Han Fei](https://github.com/hanfei1991)).
* Add more information to system.crash_log. [#95857](https://github.com/ClickHouse/ClickHouse/pull/95857) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Add component name to `system.aggregated_zookeeper_log`. [#95882](https://github.com/ClickHouse/ClickHouse/pull/95882) ([Antonio Andelic](https://github.com/antonio2368)).
* Skip object storage reads when querying `DeltaLake` tables from system.tables. [#95899](https://github.com/ClickHouse/ClickHouse/pull/95899) ([Antonio Andelic](https://github.com/antonio2368)).
* Enable `enable_max_bytes_limit_for_min_age_to_force_merge` by default if the `compatibility` setting is `26.2` or higher. [#95917](https://github.com/ClickHouse/ClickHouse/pull/95917) ([Christoph Wurm](https://github.com/cwurm)).
* Use_statistics_cache by default, release it as beta. [#95950](https://github.com/ClickHouse/ClickHouse/pull/95950) ([Han Fei](https://github.com/hanfei1991)).
* Delta Lake is now available on macOS. Closes https://github.com/ClickHouse/ClickHouse/pull/95979. [#95985](https://github.com/ClickHouse/ClickHouse/pull/95985) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* In previous versions, when combining conflicting ALTER expressions with UPDATE and RENAME COLUMN, a logical error was thrown instead of a proper exception. Closes [#70678](https://github.com/ClickHouse/ClickHouse/issues/70678). [#96022](https://github.com/ClickHouse/ClickHouse/pull/96022) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Improve the help output for all ClickHouse applications and add a --no-sudo option with a few fixes. This is a continuation of [#58244](https://github.com/ClickHouse/ClickHouse/issues/58244) from @qoega. [#96025](https://github.com/ClickHouse/ClickHouse/pull/96025) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add `distanceCosine` alias for `cosineDistance` because all other distance functions already have alias of this form. [#96065](https://github.com/ClickHouse/ClickHouse/pull/96065) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Add support for the with_data Keeper extension to improve table fetching in Database Replicated. [#96090](https://github.com/ClickHouse/ClickHouse/pull/96090) ([Nikolay Degterinsky](https://github.com/evillique)).
* Update chdig to [v26.2.1](https://github.com/azat/chdig/releases/tag/v26.2.1) (new features and MacOS support). [#96113](https://github.com/ClickHouse/ClickHouse/pull/96113) ([Azat Khuzhin](https://github.com/azat)).
* Improve filter pushdown for `numbers` and `primes`. ClickHouse can now derive conservative value bounds from `WHERE` conditions when exact bounds cannot be derived, and restrict sequence generation accordingly (for example, for `WHERE number % 5 < 2 AND number > 100 AND number < 300`, ClickHouse will only generate numbers between 100 and 300, then apply the predicate), avoiding unbounded scans. Closes [#84853](https://github.com/ClickHouse/ClickHouse/issues/84853). Closes [#93913](https://github.com/ClickHouse/ClickHouse/issues/93913). [#96115](https://github.com/ClickHouse/ClickHouse/pull/96115) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Storage DeltaLake now takes `count()` result from delta lake metadata and shows correct table stats in system.tables (total bytes/rows). [#96190](https://github.com/ClickHouse/ClickHouse/pull/96190) ([Kseniia Sumarokova](https://github.com/kssenii)).
* The formatter previously wrapped SELECT in parentheses when a `COMMENT` clause was present to disambiguate parsing. Instead, output `COMMENT` before `AS SELECT`, which eliminates the ambiguity without parentheses. [#96293](https://github.com/ClickHouse/ClickHouse/pull/96293) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Under certain circumstances, manual server startup without a configuration file, could place the data directory inside an unusual location, e.g., `/tmp/cores/`. This is fixed by resolving the `path` configuration parameter relative to the working directory at the moment of server startup and resolving all other paths relative to the `path`. [#96305](https://github.com/ClickHouse/ClickHouse/pull/96305) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Use automatic cluster table functions for single subquery in FROM. Closes [#92264](https://github.com/ClickHouse/ClickHouse/issues/92264). [#96332](https://github.com/ClickHouse/ClickHouse/pull/96332) ([phulv94](https://github.com/phulv94)).
* When `enable_positional_arguments_for_projections` is enabled, save the table schema with substituted expressions instead of positional arguments. This allows server restart with disabled `enable_positional_arguments_for_projections`. [#96372](https://github.com/ClickHouse/ClickHouse/pull/96372) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Move config setting `allow_impersonate_user` to the section with other access-control improvements. [#96451](https://github.com/ClickHouse/ClickHouse/pull/96451) ([Vitaly Baranov](https://github.com/vitlibar)).
* Set `this->exceptions(std::ios::badbit);` for the std's streams inside poco. [#96455](https://github.com/ClickHouse/ClickHouse/pull/96455) ([Sema Checherinda](https://github.com/CheSema)).
* Limit the number of pipeline streams generated with `split_intersecting_parts_ranges_into_layers` enabled. Helps to avoid excessive memory consumption. [#96478](https://github.com/ClickHouse/ClickHouse/pull/96478) ([Nikita Taranov](https://github.com/nickitat)).
* Make `core_dump.size_limit` configuration setting hot-reloadable, to avoid having to restart servers for configuration changes to take place. [#96524](https://github.com/ClickHouse/ClickHouse/pull/96524) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Implement equivalent sets optimization for multiple joins. Queries with multiple consecutive `INNER JOIN` operations now benefit from improved filter pushdown optimization. When tables are joined on equivalent columns (e.g., `t1 JOIN t2 ON t1.id = t2.id JOIN t3 ON t2.id = t3.id WHERE t1.id > 10`), filters applied to any table in the chain are automatically pushed down to all tables. Close [#96550](https://github.com/ClickHouse/ClickHouse/issues/96550). [#96596](https://github.com/ClickHouse/ClickHouse/pull/96596) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Improves CPU and real-time profiler interoperability with socket timeouts. [#96601](https://github.com/ClickHouse/ClickHouse/pull/96601) ([Sergei Trifonov](https://github.com/serxa)).
* Optimize delta lake metadata scan. Uses changes from delta-kernel PR https://github.com/delta-io/delta-kernel-rs/pull/1827. [#96686](https://github.com/ClickHouse/ClickHouse/pull/96686) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Prevent the resurrection of dropped data if ADD COLUMN is run quickly after the DROP COLUMN mutation. [#96713](https://github.com/ClickHouse/ClickHouse/pull/96713) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Change function_id type in system.instrumentation from LowCardinality(Int32) to Int32. [#96726](https://github.com/ClickHouse/ClickHouse/pull/96726) (Copilot).
* Added system table `system.tokenizers` which shows all available tokenizers. [#96753](https://github.com/ClickHouse/ClickHouse/pull/96753) ([Robert Schulze](https://github.com/rschu1ze)).
* Synchronous waiting for mutations will respect query cancellation and time limits. [#96756](https://github.com/ClickHouse/ClickHouse/pull/96756) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Added system command `SYSTEM RELOAD DELTA KERNEL TRACING <level>` to be able to change delta-kernel logging, which can be useful for debugging. [#96763](https://github.com/ClickHouse/ClickHouse/pull/96763) ([Kseniia Sumarokova](https://github.com/kssenii)).
* The text index is now GA. [#96794](https://github.com/ClickHouse/ClickHouse/pull/96794) ([Robert Schulze](https://github.com/rschu1ze)).
* Filtering by IP address family, i.e. `dns_allow_resolve_names_to_ipv4/ipv6` settings, are applied even if DNS cache is disabled. [#96810](https://github.com/ClickHouse/ClickHouse/pull/96810) ([c-end](https://github.com/c-end)).
* Better jemalloc introspection. [#96840](https://github.com/ClickHouse/ClickHouse/pull/96840) ([Azat Khuzhin](https://github.com/azat)).
* The `Date` type is now serialized as Arrow's native `date32` type in Arrow/ArrowStream formats, instead of `uint16`. Tools like PyArrow will now correctly see the column as a date type. The old behavior can be restored with the `output_format_arrow_date_as_uint16` setting. Reading old Arrow files that used `uint16` for `Date` columns is still supported. [#96860](https://github.com/ClickHouse/ClickHouse/pull/96860) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `/play` Web UI throwing `QUERY_CACHE_USED_WITH_SYSTEM_TABLE` when querying system tables. [#96869](https://github.com/ClickHouse/ClickHouse/pull/96869) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix crash when attaching a table to a `MaterializedPostgreSQL` database if `dropReplicationSlot` throws during stack unwinding. [#96871](https://github.com/ClickHouse/ClickHouse/pull/96871) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Improve Web UI: change favicon to indicate running query state; display errors from auxiliary queries (loading databases and tables) instead of silently ignoring them. Closes [#85055](https://github.com/ClickHouse/ClickHouse/issues/85055). [#96883](https://github.com/ClickHouse/ClickHouse/pull/96883) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Make the left panel in `/play` UI clickable to toggle the database list. [#96884](https://github.com/ClickHouse/ClickHouse/pull/96884) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* In Replicated database, don't update the cached cluster for every dummy query. [#96897](https://github.com/ClickHouse/ClickHouse/pull/96897) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Use the primary key index when filtering with `startsWithUTF8` if the prefix contains only ASCII characters. [#97055](https://github.com/ClickHouse/ClickHouse/pull/97055) ([vkcku](https://github.com/vkcku)).
* `DROP DATABASE` now drops tables in reverse dependency order, improving crash-safety when the database contains tables with loading dependencies (e.g. `Distributed` tables using `joinGet`). [#97057](https://github.com/ClickHouse/ClickHouse/pull/97057) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Reapply https://github.com/ClickHouse/ClickHouse/pull/95014 after https://github.com/ClickHouse/ClickHouse/pull/96813. [#97064](https://github.com/ClickHouse/ClickHouse/pull/97064) ([Vitaly Baranov](https://github.com/vitlibar)).
* Add `system.jemalloc_stats` table exposing jemalloc memory allocator statistics (via `malloc_stats_print`) for diagnosing memory usage on servers built with jemalloc. Also add a `/jemalloc.html` HTTP endpoint on the ClickHouse HTTP interface for interactive visualization of these statistics. [#97077](https://github.com/ClickHouse/ClickHouse/pull/97077) ([Antonio Andelic](https://github.com/antonio2368)).
* Added `system.jemalloc_profile_text` table for reading and analyzing jemalloc heap profiles. The output format is controlled by the `jemalloc_profile_text_output_format` setting (raw, symbolized, or collapsed; default collapsed). Inline frame resolution is controlled by `jemalloc_profile_text_symbolize_with_inline` (when enabled, inline frames are included at the cost of slower symbolization; when disabled, they are skipped for faster output). For the collapsed format, `jemalloc_profile_text_collapsed_use_count` controls whether stacks are weighted by live allocation count (true) or live bytes (false, default). This enables easier memory profiling and flame graph visualization of jemalloc heap profiles. Fixes [#93248](https://github.com/ClickHouse/ClickHouse/issues/93248). [#97218](https://github.com/ClickHouse/ClickHouse/pull/97218) ([Antonio Andelic](https://github.com/antonio2368)).
* For automatic parallel replicas, fix estimation accuracy for queries with highly selective PREWHERE filters. [#97231](https://github.com/ClickHouse/ClickHouse/pull/97231) ([Nikita Taranov](https://github.com/nickitat)).
* Bump yaml-cpp to prevent skipping invalid YAML. [#97333](https://github.com/ClickHouse/ClickHouse/pull/97333) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#98112](https://github.com/ClickHouse/ClickHouse/issues/98112): Add information about deferred filters as a separate item to EXPLAIN query output (when using Row Policies/PREWHERE with FINAL). Related: https://github.com/ClickHouse/ClickHouse/pull/91065. [#97374](https://github.com/ClickHouse/ClickHouse/pull/97374) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Added support for `ALTER TABLE RENAME COLUMN` for Iceberg tables. Previously only `ADD COLUMN, DROP COLUMN, and MODIFY COLUMN` were supported. [#97455](https://github.com/ClickHouse/ClickHouse/pull/97455) ([murphy-4o](https://github.com/murphy-4o)).
* Extract web components from \`play.html\` for better encapsulation and multi-instance support. [#97529](https://github.com/ClickHouse/ClickHouse/pull/97529) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Show a loading indicator in the `play.html` sidebar while tables are being fetched. [#97531](https://github.com/ClickHouse/ClickHouse/pull/97531) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a copy-to-clipboard button for raw query results in the built-in web UI (play.html). [#97532](https://github.com/ClickHouse/ClickHouse/pull/97532) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix query obfuscator (`clickhouse-format --obfuscate`) to produce parseable SQL in more cases. [#97584](https://github.com/ClickHouse/ClickHouse/pull/97584) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#97898](https://github.com/ClickHouse/ClickHouse/issues/97898): Apply data skipping indexes during distributed index analysis. [#97767](https://github.com/ClickHouse/ClickHouse/pull/97767) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#98186](https://github.com/ClickHouse/ClickHouse/issues/98186): Marks of secondary indexes are now prewarmed when the `prewarm_mark_cache setting` is enabled (loaded into the index mark cache during data part fetches and table startup). [#97772](https://github.com/ClickHouse/ClickHouse/pull/97772) ([Anton Popov](https://github.com/CurtizJ)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* After metadata-only ALTERs, such as extending the elements of Enums, the optimization of aggregation with projection may end up producing an exception. [#84143](https://github.com/ClickHouse/ClickHouse/pull/84143) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Materialized views now use the database where they were created as execution context, meaning that: - it is possible to omit explicit database qualification on names referred in view's select query - if no explicit database qualification is given, the same database where the materialized view was created is assumed. [#88193](https://github.com/ClickHouse/ClickHouse/pull/88193) ([Dmitry Kovalev](https://github.com/dk-github)).
* Fix query parameter substitution in CREATE USER authentication methods when using ON CLUSTER. Query parameters in authentication methods (e.g., password) were not being replaced, causing UNKNOWN_QUERY_PARAMETER errors on remote nodes. [#92777](https://github.com/ClickHouse/ClickHouse/pull/92777) ([xiaohuanlin](https://github.com/xiaohuanlin)).
* Fixed inconsistencies in text index analysis for `has`, `mapContainsKey`, and `mapContainsValue` functions. Previously, queries using these functions could return different results depending on whether the expression was evaluated with or without a text index. [#93578](https://github.com/ClickHouse/ClickHouse/pull/93578) ([Anton Popov](https://github.com/CurtizJ)).
* Backups could crash the server if you do many concurrent backups clashing over the same files. [#93659](https://github.com/ClickHouse/ClickHouse/pull/93659) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fixes queries with parallel replicas and JOIN with non-MT table. Closes [#92056](https://github.com/ClickHouse/ClickHouse/issues/92056). [#93902](https://github.com/ClickHouse/ClickHouse/pull/93902) ([Igor Nikonov](https://github.com/devcrafter)).
* Fixes an issue when Iceberg columns with dot in names returned NULL as values. [#94335](https://github.com/ClickHouse/ClickHouse/pull/94335) ([Mikhail Koviazin](https://github.com/mkmkme)).
* Fixed handling of UTF8 strings in `stringJaccardIndexUTF8` and improve performance. [#94613](https://github.com/ClickHouse/ClickHouse/pull/94613) ([Joanna Hulboj](https://github.com/jh0x)).
* Fix possible overflows in `WITH FILL STALENESS` (that leads to UB or/and endless loops). Fix possible endless loop due to big jumps. Add old analyzer support (mostly for stress tests). [#94663](https://github.com/ClickHouse/ClickHouse/pull/94663) ([Azat Khuzhin](https://github.com/azat)).
* Fix possible hung distributed queries when hostnames resolve to multiple addresses and a remote replica freezes. [#94726](https://github.com/ClickHouse/ClickHouse/pull/94726) ([c-end](https://github.com/c-end)).
* Fix invalid result on joining multiple table expressions, when leftmost table expression is a `-Cluster` table function. Resolves [#89996](https://github.com/ClickHouse/ClickHouse/issues/89996). [#94748](https://github.com/ClickHouse/ClickHouse/pull/94748) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Fix incorrect primary key and skip index pruning for predicates involving `toWeek`, `toYearWeek`, `toStartOfWeek`, `toLastDayOfWeek`, and `toDayOfWeek`, and fix exceptions in some of these functions for valid queries with `LowCardinality(String)`. [#94816](https://github.com/ClickHouse/ClickHouse/pull/94816) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Remove unnecessary skip permissions check in `ATTACH` queries for a view with SQL Security. This prevents potential privilege escalation when a user attaches a view with a definer without validating required access. [#94865](https://github.com/ClickHouse/ClickHouse/pull/94865) ([pufit](https://github.com/pufit)).
* Fixes a crash during `ReplicatedMergeTree` startup caused by concurrent removal of `delete_tmp_*` directories. [#94892](https://github.com/ClickHouse/ClickHouse/pull/94892) ([myeongjun](https://github.com/myeongjjun)).
* Preserve chunk infos of a chunk after interaction with Iceberg sink. [#94938](https://github.com/ClickHouse/ClickHouse/pull/94938) ([Daniil Ivanik](https://github.com/divanik)).
* Fix a bug where `SYSTEM DROP QUERY CACHE TAG 'TAGNAME' ON CLUSTER <CLUSTERNAME>` would drop the full cache on the cluster. [#94978](https://github.com/ClickHouse/ClickHouse/pull/94978) ([Rory Crispin](https://github.com/RoryCrispin)).
* Preserve constant index granularity (use_const_adaptive_granularity) after Vertical merges (v2 with a fix for Nested, and in general). [#95013](https://github.com/ClickHouse/ClickHouse/pull/95013) ([Azat Khuzhin](https://github.com/azat)).
* Fixes race in filesystem cache in version 26.1 after [ClickHouse/ClickHouse[#82764](https://github.com/ClickHouse/ClickHouse/issues/82764)](https://github.com/ClickHouse/ClickHouse/pull/82764). [#95042](https://github.com/ClickHouse/ClickHouse/pull/95042) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix postgresql() table function canceling by KILL QUERY and cancel query (Ctrl+C) in clickhouse-client. [#95136](https://github.com/ClickHouse/ClickHouse/pull/95136) ([Roman Vasin](https://github.com/rvasin)).
* Fixed type inference for qualified columns from source tables when multiple joins are used with `USING` clause. Previously, subsequent joins incorrectly updated types of underlying source columns to a common supertype even when the column was not involved in that join (e.g., in `SELECT t2.a FROM t1 LEFT JOIN t2 USING (a) LEFT JOIN t3 USING (a)`, the `t2.a` column is only used by the first join, so its type should be the supertype of `t1.a` and `t2.a`, excluding `t3.a`). This could lead to logical errors or crashes when functions expected different column types than what actually appeared in the execution plan. [#95157](https://github.com/ClickHouse/ClickHouse/pull/95157) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Make column transform only once during getting content of manifesrt .avro list and files. [#95164](https://github.com/ClickHouse/ClickHouse/pull/95164) ([Daniil Ivanik](https://github.com/divanik)).
* Fix JSON column size lazy calculation. [#95207](https://github.com/ClickHouse/ClickHouse/pull/95207) ([Azat Khuzhin](https://github.com/azat)).
* Fixed inaccurate memory accounting when applying large patch parts after lightweight updates. Previously, applying large patches could cause excessive memory usage and result in the server process being killed by the OOM killer. [#95231](https://github.com/ClickHouse/ClickHouse/pull/95231) ([Anton Popov](https://github.com/CurtizJ)).
* Avoid UB in distributed index analysis on fallback to local replica and there are more then max_parallel_replicas replicas. [#95263](https://github.com/ClickHouse/ClickHouse/pull/95263) ([Azat Khuzhin](https://github.com/azat)).
* Fix aggregation of sparse columns for `sum` and timeseries when `group_by_overflow_mode` is set to `any`. [#95301](https://github.com/ClickHouse/ClickHouse/pull/95301) ([Mikhail Koviazin](https://github.com/mkmkme)).
* Try to rollback the source blob, even if the removal wasn't completed. [#95302](https://github.com/ClickHouse/ClickHouse/pull/95302) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Replace Date with Date32 for iceberg. [#95322](https://github.com/ClickHouse/ClickHouse/pull/95322) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* The password argument of the `redis` table function now will be masked in the logs and system tables (e.g.: `query_log`). [#95325](https://github.com/ClickHouse/ClickHouse/pull/95325) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Fix storage lifetime with distributed plan. [#95356](https://github.com/ClickHouse/ClickHouse/pull/95356) ([Azat Khuzhin](https://github.com/azat)).
* Fix a logical error in some cases when negative `LIMIT/OFFSET` is used in distributed queries. [#95357](https://github.com/ClickHouse/ClickHouse/pull/95357) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix a bug where clickhouse-client would ask for password twice when connecting using ssh. [#95372](https://github.com/ClickHouse/ClickHouse/pull/95372) ([Isak Ellmer](https://github.com/spinojara)).
* Fix a data race in storage S3(Azure)Queue. [#95385](https://github.com/ClickHouse/ClickHouse/pull/95385) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix the prewhere filter error caused by lambda expressions in prewhere. [#95395](https://github.com/ClickHouse/ClickHouse/pull/95395) ([Xiaozhe Yu](https://github.com/wudidapaopao)).
* Fix `optimize_syntax_fuse_functions` to not rewrite `sum/count/avg` into `sumCount()` when the aggregate argument is `Nullable`. Closes [#95390](https://github.com/ClickHouse/ClickHouse/issues/95390). [#95441](https://github.com/ClickHouse/ClickHouse/pull/95441) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Avoid possible crash for distributed queries in case of cancellation. [#95466](https://github.com/ClickHouse/ClickHouse/pull/95466) ([Aleksandr Musorin](https://github.com/AVMusorin)).
* Fix deduplication for streaming from S3(Azure)Queue engine. [#95467](https://github.com/ClickHouse/ClickHouse/pull/95467) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix updating row policies assigned to the initial user in distributed queries. [#95469](https://github.com/ClickHouse/ClickHouse/pull/95469) ([Vitaly Baranov](https://github.com/vitlibar)).
* Fix check for encrypted disks over plain_rewritable (Fixes possible `It is not possible to register multiple plain-rewritable disks with the same object storage prefix`). [#95470](https://github.com/ClickHouse/ClickHouse/pull/95470) ([Azat Khuzhin](https://github.com/azat)).
* The `mergeTreeProjection` table function was missing an access check, allowing users without SELECT permission on a table (but with permissions for table functions) to read data from its projections. This fix adds the same access check that `mergeTreeIndex` and `mergeTreeAnalyzeIndexes` already have. [#95480](https://github.com/ClickHouse/ClickHouse/pull/95480) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix possible logical error during reading of size subcolumn fron dynamic subcolumns of Dynamic/JSON types. [#95573](https://github.com/ClickHouse/ClickHouse/pull/95573) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix regression in (experimental) zero‑copy replication introduced by [#94262](https://github.com/ClickHouse/ClickHouse/issues/94262) where shared parts could be deleted before other replicas finished fetching them. [#95597](https://github.com/ClickHouse/ClickHouse/pull/95597) ([filimonov](https://github.com/filimonov)).
* Fix crash during `tupleElement` applied to arrays of JSON. Closes [#95581](https://github.com/ClickHouse/ClickHouse/issues/95581). [#95647](https://github.com/ClickHouse/ClickHouse/pull/95647) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix logical error exception when using a matcher (`*`) inside a lambda function within a VALUES clause in a JOIN with USING. Close [#93675](https://github.com/ClickHouse/ClickHouse/issues/93675). [#95661](https://github.com/ClickHouse/ClickHouse/pull/95661) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fixed `There was an error: Cannot obtain error message` logical error when waiting for a distributed DDL and dropping the Replicated database concurrently. Fixes [#95539](https://github.com/ClickHouse/ClickHouse/issues/95539). [#95664](https://github.com/ClickHouse/ClickHouse/pull/95664) ([Alexander Tokmakov](https://github.com/tavplubix)).
* Fix `IN` function returning incorrect results with `NULL` values when `transform_null_in` is enabled. Closes [#65776](https://github.com/ClickHouse/ClickHouse/issues/65776). [#95674](https://github.com/ClickHouse/ClickHouse/pull/95674) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Correctly handle LowCardinality Nullable types in `CAST` when the setting `cast_keep_nullable` is enabled. Closes [#95670](https://github.com/ClickHouse/ClickHouse/issues/95670). [#95747](https://github.com/ClickHouse/ClickHouse/pull/95747) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix squashing partitioned delta lake data. [#95773](https://github.com/ClickHouse/ClickHouse/pull/95773) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix race condition for Nullable join column in runtime filters. [#95775](https://github.com/ClickHouse/ClickHouse/pull/95775) ([Hechem Selmi](https://github.com/m-selmi)).
* Fix possible logical error in query with matcher (`*`, `table.*`) and `analyzer_compatibility_join_using_top_level_identifier` when `USING` column has different types in tables and select list. Close [#90477](https://github.com/ClickHouse/ClickHouse/issues/90477). [#95808](https://github.com/ClickHouse/ClickHouse/pull/95808) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix several critical bugs around ThreadPoolCallbackRunnerLocal usage. [#95818](https://github.com/ClickHouse/ClickHouse/pull/95818) ([Raúl Marín](https://github.com/Algunenano)).
* Fixes a crash on the DROP WORKLOAD while running concurrently with queries using the workload being dropped. [#95856](https://github.com/ClickHouse/ClickHouse/pull/95856) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix slow performance when querying system tables with a user that has limited grants on many databases. Closes [#89371](https://github.com/ClickHouse/ClickHouse/issues/89371). [#95874](https://github.com/ClickHouse/ClickHouse/pull/95874) ([pufit](https://github.com/pufit)).
* Fix executing tupleElement on JSON with nested paths, previously it could lead to wrong query result. [#95907](https://github.com/ClickHouse/ClickHouse/pull/95907) ([Pavel Kruglov](https://github.com/Avogar)).
* Fixed a `NOT_SUPPORTED` error that could occur when using the `direct` join algorithm with an empty MergeTree table. [#95935](https://github.com/ClickHouse/ClickHouse/pull/95935) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix the client not suggesting and auto-completing alias names for settings, closes [#92190](https://github.com/ClickHouse/ClickHouse/issues/92190). [#95945](https://github.com/ClickHouse/ClickHouse/pull/95945) ([phulv94](https://github.com/phulv94)).
* Fix event_date in system.asynchronous_metric_log. [#95947](https://github.com/ClickHouse/ClickHouse/pull/95947) ([Raúl Marín](https://github.com/Algunenano)).
* Fix skipping paths in JSON data type. Previously with `JSON(SKIP path)` all JSON keys with prefix `path` were skipped, even keys like `"pathpath"`, so it could lead to data loss for these paths during insert. Now it's fixed and only key `"path"` is skipped. [#95948](https://github.com/ClickHouse/ClickHouse/pull/95948) ([Pavel Kruglov](https://github.com/Avogar)).
* Part with unknown projections should not be marked as lost forever. [#95952](https://github.com/ClickHouse/ClickHouse/pull/95952) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Fix empty string becoming `NULL` in `Join` table with `Nullable(String)` key. Closes [#71414](https://github.com/ClickHouse/ClickHouse/issues/71414). [#96002](https://github.com/ClickHouse/ClickHouse/pull/96002) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Now the PostgreSQL engine can correctly read `BOOLEAN[]`. Closes [#72754](https://github.com/ClickHouse/ClickHouse/issues/72754). [#96006](https://github.com/ClickHouse/ClickHouse/pull/96006) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix the `ProtobufList` format for the case of reading from an empty file. Closes [#70059](https://github.com/ClickHouse/ClickHouse/issues/70059). [#96007](https://github.com/ClickHouse/ClickHouse/pull/96007) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `ProtobufList` format producing ghost record for empty tables. Closes [#72596](https://github.com/ClickHouse/ClickHouse/issues/72596). [#96010](https://github.com/ClickHouse/ClickHouse/pull/96010) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `if` function type mismatch between `UInt64` and `Int32` in an unusual case of distributed queries and PREWHERE, with type inference. Closes [#70017](https://github.com/ClickHouse/ClickHouse/issues/70017). [#96012](https://github.com/ClickHouse/ClickHouse/pull/96012) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `JIT` compiled queries involving `Bool` types. [#96013](https://github.com/ClickHouse/ClickHouse/pull/96013) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error when reading UUID column from SQLite TEXT column. Closes [#71263](https://github.com/ClickHouse/ClickHouse/issues/71263). [#96016](https://github.com/ClickHouse/ClickHouse/pull/96016) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix SQLite engine type conversion for `DateTime`, `Date`, `UUID`, and other types. Closes [#73481](https://github.com/ClickHouse/ClickHouse/issues/73481). [#96017](https://github.com/ClickHouse/ClickHouse/pull/96017) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* `FixedString` values were escaped incorrectly in queries to external databases, SQLite and PostgreSQL. Closes [#73519](https://github.com/ClickHouse/ClickHouse/issues/73519). Co-authored with @jh0x. [#96019](https://github.com/ClickHouse/ClickHouse/pull/96019) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix assertion failure in WindowTransform with a large PRECEDING offset. Closes [#75852](https://github.com/ClickHouse/ClickHouse/issues/75852). [#96026](https://github.com/ClickHouse/ClickHouse/pull/96026) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix a bug with possible data corruption when concurrent async inserts are using the same parameter names but contain different values. [#96035](https://github.com/ClickHouse/ClickHouse/pull/96035) ([Seva Potapov](https://github.com/seva-potapov)).
* Fix period for global profilers (controlled by `global_profiler_real_time_period_ns` and `global_profiler_cpu_time_period_ns`). Instead of set value, a truncated value was used, causing profiler to wakeup more than intended. [#96048](https://github.com/ClickHouse/ClickHouse/pull/96048) ([Antonio Andelic](https://github.com/antonio2368)).
* Earlier if reference data file inside iceberg manifest file for position delete was present in an entry but was null, we didn't get correct bounds for a corresponding data files. This PR fixes this bug. [#96061](https://github.com/ClickHouse/ClickHouse/pull/96061) ([Daniil Ivanik](https://github.com/divanik)).
* Fix revoking default roles. [#96103](https://github.com/ClickHouse/ClickHouse/pull/96103) ([Vitaly Baranov](https://github.com/vitlibar)).
* Fix use-after-free in the index analysis in a rare combination of disabled `use_primary_key` and a very large number of disjunctions of conditions that use the index. [#96112](https://github.com/ClickHouse/ClickHouse/pull/96112) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix a regression with the `Gorilla` codec when an explicitly specified size does not correspond to the data type size, and the buffer size is too small. In previous versions, it threw an exception on decompression. Closes [#78253](https://github.com/ClickHouse/ClickHouse/issues/78253). [#96118](https://github.com/ClickHouse/ClickHouse/pull/96118) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Avoid a deadlock in dictionaries loaded when one dictionary references a Merge table that references it recursively. Closes [#78360](https://github.com/ClickHouse/ClickHouse/issues/78360). [#96120](https://github.com/ClickHouse/ClickHouse/pull/96120) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix use-of-uninitialized-value in `formatDateTime` with non-fixed-width formatters, such as MySQL and JODA-style. [#96133](https://github.com/ClickHouse/ClickHouse/pull/96133) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* The combination of settings `use_const_adaptive_granularity` and `index_granularity_bytes` (which means "non-adaptive granularity") led to a miscalculation of the number of rows to read and an exception. [#96143](https://github.com/ClickHouse/ClickHouse/pull/96143) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Running an invalid ALTER UPDATE mutation on object storage file-like tables, such as S3 and Azure, could lead to a nullptr dereference. Closes [#92994](https://github.com/ClickHouse/ClickHouse/issues/92994). [#96162](https://github.com/ClickHouse/ClickHouse/pull/96162) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `AccessRights::contains` returning incorrect results with partial revokes. [#96170](https://github.com/ClickHouse/ClickHouse/pull/96170) ([pufit](https://github.com/pufit)).
* Fix query condition cache hash collision for CTE folded constants, which could lead to a wrong query result. Closes [#96060](https://github.com/ClickHouse/ClickHouse/issues/96060). [#96172](https://github.com/ClickHouse/ClickHouse/pull/96172) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix possible deadlock in ProcessList. It can happen because of possible lock inversion if memory overcommit tracker triggers when we are adding task to cancellation checker. [#96182](https://github.com/ClickHouse/ClickHouse/pull/96182) ([Antonio Andelic](https://github.com/antonio2368)).
* Fixed a bug where queries involving outer joins (LEFT, RIGHT, or FULL) combined with multiple INNER JOINs could return incorrect results due to illegal join reordering. When an outer join's ON condition referenced columns from multiple previously joined tables, the optimizer failed to account for all table dependencies and could reorder the joins incorrectly, producing missing rows. Close [#95972](https://github.com/ClickHouse/ClickHouse/issues/95972). [#96193](https://github.com/ClickHouse/ClickHouse/pull/96193) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#98130](https://github.com/ClickHouse/ClickHouse/issues/98130): In `DeltaLake` table engine fix logical race on snapshot version change, remove redundant heavy snapshot reloads. [#96226](https://github.com/ClickHouse/ClickHouse/pull/96226) ([Kseniia Sumarokova](https://github.com/kssenii)).
* When a table has no statistics defined, ClickHouse shouldn't try to them. This avoids some overhead (100+ms) for checking if the statistics files exist. (issue [#96068](https://github.com/ClickHouse/ClickHouse/issues/96068)). [#96233](https://github.com/ClickHouse/ClickHouse/pull/96233) ([Han Fei](https://github.com/hanfei1991)).
* Fix `optimize_syntax_fuse_functions` to not rewrite `sum/count/avg` into `sumCount()` when the aggregate argument is `LowCardinality(Nullable)`. Closes [#95390](https://github.com/ClickHouse/ClickHouse/issues/95390). [#96239](https://github.com/ClickHouse/ClickHouse/pull/96239) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix incorrect partition pruning for `not IN` and `not has` function in some cases. [#96241](https://github.com/ClickHouse/ClickHouse/pull/96241) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix `stack-use-after-scope` in the vector similarity index. [#96259](https://github.com/ClickHouse/ClickHouse/pull/96259) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix test hint is not respected for syntax error when query is prepended by a comment. [#96336](https://github.com/ClickHouse/ClickHouse/pull/96336) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* Fix logical error in KeyCondition when a table has a nullable primary key, and the query uses the `coalesce` function, which has its first argument constant. [#96340](https://github.com/ClickHouse/ClickHouse/pull/96340) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* The interaction of `GROUPING SETS`, `group_by_use_nulls`, and the `Tuple` data type with `LowCardinality` inside it, could produce an unexpected block structure in the query pipeline, which led to a logical error. This appeared after the introduction of `Nullable` `Tuple`s. [#96358](https://github.com/ClickHouse/ClickHouse/pull/96358) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* It was possible to create a table with an empty expression `()` as an index, which led to an invalid memory access. [#96363](https://github.com/ClickHouse/ClickHouse/pull/96363) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fixed crash in old analyzer if JOIN and duplicated aliases. [#96405](https://github.com/ClickHouse/ClickHouse/pull/96405) ([Ilya Golshtein](https://github.com/ilejn)).
* Fix `Nested columns sizes are inconsistent with local_discriminators` error due to a wrong in-place filtering optimization for Variant columns. [#96410](https://github.com/ClickHouse/ClickHouse/pull/96410) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `CREATE TABLE ... CLONE AS ...` ignoring full qualifier of source table. [#96415](https://github.com/ClickHouse/ClickHouse/pull/96415) ([Hasyimi Bahrudin](https://github.com/hasyimibhar)).
* Fix mysql() table function canceling by KILL QUERY and cancel query (Ctrl+C) in clickhouse-client. [#96437](https://github.com/ClickHouse/ClickHouse/pull/96437) ([Roman Vasin](https://github.com/rvasin)).
* Fixes livelock in the cancellation checker thread for queries with high `max_execution_time` values. [#96450](https://github.com/ClickHouse/ClickHouse/pull/96450) ([Sergei Trifonov](https://github.com/serxa)).
* Fix a logical error in some cases when fractional `LIMIT/OFFSET` is used in distributed queries. [#96475](https://github.com/ClickHouse/ClickHouse/pull/96475) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix null pointer dereference in certain expressions with lambda functions. [#96479](https://github.com/ClickHouse/ClickHouse/pull/96479) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix incorrect results when `LowCardinality` columns are converted to `Nullable`. [#96483](https://github.com/ClickHouse/ClickHouse/pull/96483) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix crash order by in iceberg. Continue https://github.com/ClickHouse/ClickHouse/pull/93296. Closes [#93280](https://github.com/ClickHouse/ClickHouse/issues/93280). [#96484](https://github.com/ClickHouse/ClickHouse/pull/96484) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix runtime filter exception for Tuple columns with Nullable subfields. [#96509](https://github.com/ClickHouse/ClickHouse/pull/96509) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `LOGICAL_ERROR` exception in Parquet V3 native reader when `PREWHERE` filter column contains non-boolean UInt8 values. [#96594](https://github.com/ClickHouse/ClickHouse/pull/96594) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix implicit index regeneration in replicated tables during metadata changes. [#96600](https://github.com/ClickHouse/ClickHouse/pull/96600) ([Raúl Marín](https://github.com/Algunenano)).
* Fixes a datarace on DROP WORKLOAD. [#96614](https://github.com/ClickHouse/ClickHouse/pull/96614) ([Sergei Trifonov](https://github.com/serxa)).
* Iceberg partitioing fix. [#96620](https://github.com/ClickHouse/ClickHouse/pull/96620) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fixed `heap-use-after-free` in `CREATE TABLE` with constraints. [#96669](https://github.com/ClickHouse/ClickHouse/pull/96669) ([Nikita Taranov](https://github.com/nickitat)).
* Validate witness version in bech32 to avoid buffer overflow. [#96671](https://github.com/ClickHouse/ClickHouse/pull/96671) ([Raúl Marín](https://github.com/Algunenano)).
* When we create a restful datalake catalog with a invalid auth_header, it will break `system.tables`. we should catch this exception. [#96680](https://github.com/ClickHouse/ClickHouse/pull/96680) ([Han Fei](https://github.com/hanfei1991)).
* Fix `min(timestamp)` returning epoch (`1970-01-01`) via `_minmax_count_projection` after TTL merge when all rows in a block are filtered out. [#96703](https://github.com/ClickHouse/ClickHouse/pull/96703) ([Raquel Barbadillo](https://github.com/rbarbadillo)).
* Add more checks for the validation of a setting which is used as a root metadata file. [#96754](https://github.com/ClickHouse/ClickHouse/pull/96754) ([Daniil Ivanik](https://github.com/divanik)).
* Fix crash in `ifNull` with `Variant` argument used in `GROUP BY`. [#96790](https://github.com/ClickHouse/ClickHouse/pull/96790) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fixed cache key collisions between tables with `table_disk=1` setting. [#96818](https://github.com/ClickHouse/ClickHouse/pull/96818) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Fix MemoryWorker's purging thread being stuck because of a race condition. [#96819](https://github.com/ClickHouse/ClickHouse/pull/96819) ([Antonio Andelic](https://github.com/antonio2368)).
* Don't log data with credentials in iceberg catalogs. [#96831](https://github.com/ClickHouse/ClickHouse/pull/96831) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix exit status of clickhouse-client after server error. [#96841](https://github.com/ClickHouse/ClickHouse/pull/96841) ([Vitaly Baranov](https://github.com/vitlibar)).
* Queries with CROSS JOINs and enabled parallel replicas could return incorrect result. Fixes [#74337](https://github.com/ClickHouse/ClickHouse/issues/74337). [#96848](https://github.com/ClickHouse/ClickHouse/pull/96848) ([Igor Nikonov](https://github.com/devcrafter)).
* Fixed `ALTER TABLE DROP COLUMN` queries failing after a lightweight update was previously performed on the same column. [#96861](https://github.com/ClickHouse/ClickHouse/pull/96861) ([Anton Popov](https://github.com/CurtizJ)).
* Fix stack overflow (crash) when creating archive-based backups (`.zip`, `.tzst`) to a `plain_rewritable` object storage disk. [#96872](https://github.com/ClickHouse/ClickHouse/pull/96872) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix server crash when backup fails due to full disk or other I/O errors on the destination filesystem. [#96873](https://github.com/ClickHouse/ClickHouse/pull/96873) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `EXCEPT ALL` and `INTERSECT ALL` ignoring row multiplicities and behaving like their `DISTINCT` counterparts. [#96876](https://github.com/ClickHouse/ClickHouse/pull/96876) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `std::terminate` exception in `indexOfAssumeSorted` when called with incompatible types (e.g., `IPv4` array with integer search value). [#96877](https://github.com/ClickHouse/ClickHouse/pull/96877) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix exception `Bad cast from type DB::ColumnNullable to DB::ColumnString` when using window functions with `group_by_use_nulls = 1` and CUBE/ROLLUP/GROUPING SETS. [#96878](https://github.com/ClickHouse/ClickHouse/pull/96878) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix incorrect results when JIT-compiled expressions convert `DateTime` to `DateTime64` (e.g., in `CASE`/`if`/`multiIf` with mixed DateTime types). The value was reinterpreted instead of properly scaled, producing wrong timestamps after expression compilation kicked in. [#96879](https://github.com/ClickHouse/ClickHouse/pull/96879) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error exception in `CoalescingMergeTree` when a skip index expression produces a constant column (e.g., `bloom_filter` on `ifNotFinite(1, c0)` for an integer column). [#96880](https://github.com/ClickHouse/ClickHouse/pull/96880) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix wrong port number in error message when accidentally connecting with HTTP to the TLS-enabled native protocol port. [#96881](https://github.com/ClickHouse/ClickHouse/pull/96881) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix per-subquery `SETTINGS` not being applied to table functions like `file` in CTEs and subqueries. [#96882](https://github.com/ClickHouse/ClickHouse/pull/96882) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix memory leak of BIO objects when reading X509 certificates. [#96885](https://github.com/ClickHouse/ClickHouse/pull/96885) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `LOGICAL_ERROR` exception in query analyzer when a lambda expression is passed where a concrete value is expected (e.g., as the accumulator argument of `arrayFold`). [#96892](https://github.com/ClickHouse/ClickHouse/pull/96892) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `ColumnNullable is not compatible with original` exception when casting complex nested types (Array of Nullable Tuple containing Map with Nullable Enum values). [#96924](https://github.com/ClickHouse/ClickHouse/pull/96924) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix a race condition in sharded `HASHED` dictionary parallel loading that could occasionally cause some rows to not be loaded. [#96953](https://github.com/ClickHouse/ClickHouse/pull/96953) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix a race condition between `REPLACE PARTITION` and background mutations that could result in both old and new data being visible after the replace. [#96955](https://github.com/ClickHouse/ClickHouse/pull/96955) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `arrayJoin` function producing duplicate rows when used with INNER JOIN and WHERE clause, caused by the partial predicate push-down optimization incorrectly pushing filters containing `arrayJoin` below a JOIN. [#96989](https://github.com/ClickHouse/ClickHouse/pull/96989) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix crash (SEGFAULT) in `clearCaches` caused by `BlockIO::operator=` not moving `query_metadata_cache`, leading to premature destruction of cached storage snapshots and use-after-free of `MergeTreeData` storage. [#96995](https://github.com/ClickHouse/ClickHouse/pull/96995) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix assertion failure in `IfTransformStringsToEnumPass` when the `if` or `transform` function returns `Nullable(String)` (e.g. with `GROUP BY ... WITH CUBE` and `group_by_use_nulls = true`). [#97002](https://github.com/ClickHouse/ClickHouse/pull/97002) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix ColumnConst not materialized before squashing. [#97019](https://github.com/ClickHouse/ClickHouse/pull/97019) ([Hasyimi Bahrudin](https://github.com/hasyimibhar)).
* Fix `assert_cast` exception (or silent data corruption in release builds) when building column statistics after `ALTER TABLE MODIFY COLUMN` changes the column type. [#97027](https://github.com/ClickHouse/ClickHouse/pull/97027) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Azure, SSH, and Arrow Flight had reads of uninitialized memory. Delta Lake cannot work under MSan at all due to Rust. [#97053](https://github.com/ClickHouse/ClickHouse/pull/97053) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix cases where indexes were affecting the result for queries with row policy/PREWHERE and FINAL. [#97076](https://github.com/ClickHouse/ClickHouse/pull/97076) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Fix remaining race condition between `REPLACE PARTITION` and background mutations in `MergeTree` tables that could cause old data to reappear. [#97105](https://github.com/ClickHouse/ClickHouse/pull/97105) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix implicit indices with alias columns and do full validation before creating them. [#97115](https://github.com/ClickHouse/ClickHouse/pull/97115) ([Raúl Marín](https://github.com/Algunenano)).
* Fix logical error in `FunctionVariantAdaptor` with functions requiring const arguments like `arrayROCAUC`. [#97116](https://github.com/ClickHouse/ClickHouse/pull/97116) ([Bharat Nallan](https://github.com/bharatnc)).
* Fix stuck mutations when `PartCheckThread` re-enqueues a `GET_PART` for an already-mutated part, leaving phantom entries in `parts_to_do`. [#97162](https://github.com/ClickHouse/ClickHouse/pull/97162) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Previously row count estimation wasn't done for SortingStep. Implement it as minimum of row count from previous step and limit value. [#97193](https://github.com/ClickHouse/ClickHouse/pull/97193) ([Alexander Gololobov](https://github.com/davenger)).
* Fix `LOGICAL_ERROR` exception in `FunctionVariantAdaptor` when a function operating on Variant columns returns `Nothing` type, which can happen with empty arrays in `UNION ALL` queries. [#97213](https://github.com/ClickHouse/ClickHouse/pull/97213) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix data-race in copyS3File for multipart_tags. [#97227](https://github.com/ClickHouse/ClickHouse/pull/97227) ([Azat Khuzhin](https://github.com/azat)).
* Fix `LOGICAL_ERROR` exception when `arrayJoin` in `WHERE` clause references columns from both sides of a `JOIN`. [#97239](https://github.com/ClickHouse/ClickHouse/pull/97239) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `LOGICAL_ERROR` exception when reading `.size` subcolumn of a sparse `Nullable(String)` in a Tuple with PREWHERE. [#97264](https://github.com/ClickHouse/ClickHouse/pull/97264) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix exception "Number of rows in lazy chunk does not match number of offsets" in `LazyMaterializingTransform` when reading from tables with non-adaptive index granularity (`index_granularity_bytes = 0`) using `ORDER BY ... LIMIT`. [#97270](https://github.com/ClickHouse/ClickHouse/pull/97270) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `SYSTEM RESTART REPLICA` losing table from database when table re-creation fails with a non-ZooKeeper exception (e.g. memory limit), causing metadata digest mismatches in `DatabaseReplicated`. [#97276](https://github.com/ClickHouse/ClickHouse/pull/97276) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Field `readonly` in `system.merge_tree_settings` now properly reflects that certain merge tree settings (e.g. `index_granularity`) are unconditionally readonly. [#97277](https://github.com/ClickHouse/ClickHouse/pull/97277) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix SEGFAULT in supportsTrivialCountOptimization due to null dereference. [#97281](https://github.com/ClickHouse/ClickHouse/pull/97281) ([Pablo Marcos](https://github.com/pamarcos)).
* Fix possible crash during parsing DWARF due to wrong CU while parsing inlines for DW_FORM_ref_addr. [#97294](https://github.com/ClickHouse/ClickHouse/pull/97294) ([Azat Khuzhin](https://github.com/azat)).
* Fix logical error with analyzer_compatibility_join_using_top_level_identifier and ALIAS columns. Close [#96228](https://github.com/ClickHouse/ClickHouse/issues/96228). [#97297](https://github.com/ClickHouse/ClickHouse/pull/97297) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix `LOGICAL_ERROR` exception in `applyOrder` when using text-indexed columns with `QUALIFY` clause. [#97313](https://github.com/ClickHouse/ClickHouse/pull/97313) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* System table `system.functions` now shows for internal functions `categories = 'Internal'` instead of `categories = ''`. [#97315](https://github.com/ClickHouse/ClickHouse/pull/97315) ([Robert Schulze](https://github.com/rschu1ze)).
* Query with RIGHT JOIN chain and enabled parallel replicas can produce incorrect result. Fixes [#74341](https://github.com/ClickHouse/ClickHouse/issues/74341). [#97316](https://github.com/ClickHouse/ClickHouse/pull/97316) ([Igor Nikonov](https://github.com/devcrafter)).
* Remove TABLE_UUID_MISMATCH check for non-analyzer. [#97323](https://github.com/ClickHouse/ClickHouse/pull/97323) ([Azat Khuzhin](https://github.com/azat)).
* Fix segfault in `StorageKeeperMap` backup due to use-after-free of dangling storage pointer in lazy backup batch. [#97336](https://github.com/ClickHouse/ClickHouse/pull/97336) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* The problem appears when we set a setting:. [#97347](https://github.com/ClickHouse/ClickHouse/pull/97347) ([Kirill Kopnev](https://github.com/Fgrtue)).
* Fix logical exception `Unexpected return type from equals. Expected Nullable(UInt8). Got Const(LowCardinality(Nullable(UInt8)))` when comparing NULL with a Variant column containing LowCardinality types. [#97379](https://github.com/ClickHouse/ClickHouse/pull/97379) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Continue of https://github.com/ClickHouse/ClickHouse/pull/61135, but with sharded cache. [#97411](https://github.com/ClickHouse/ClickHouse/pull/97411) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix `LOGICAL_ERROR` exception in Array-to-`QBit` conversion when `nullable_source` from an outer `Tuple` wrapper replaces the converted array column with a mismatched column type. Closes [#97389](https://github.com/ClickHouse/ClickHouse/issues/97389). [#97413](https://github.com/ClickHouse/ClickHouse/pull/97413) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix AST formatting roundtrip inconsistency for aliased tuple literals inside parentheses, e.g., `(('a', 'b') AS x)` was incorrectly reformatted as `tuple(('a', 'b') AS x)`. [#97418](https://github.com/ClickHouse/ClickHouse/pull/97418) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix applying setting `type_json_allow_duplicated_key_with_literal_and_nested_object` to typed paths in JSON. Closes [#97278](https://github.com/ClickHouse/ClickHouse/issues/97278). [#97422](https://github.com/ClickHouse/ClickHouse/pull/97422) ([Pavel Kruglov](https://github.com/Avogar)).
* Skip empty deduplication tokens. [#97460](https://github.com/ClickHouse/ClickHouse/pull/97460) ([Sema Checherinda](https://github.com/CheSema)).
* Fix exception "Number of rows in lazy chunk does not match number of offsets" in `LazyMaterializingTransform` when reading from tables with non-adaptive index granularity (`index_granularity_bytes = 0`) using `ORDER BY ... LIMIT`. [#97482](https://github.com/ClickHouse/ClickHouse/pull/97482) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix insert iceberg settings. Add alias for the `allow_experimental_insert_into_iceberg` setting. [#97483](https://github.com/ClickHouse/ClickHouse/pull/97483) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix `ACCESS_DENIED` for users without `CREATE TEMPORARY TABLE` permission when `optimize_inverse_dictionary_lookup` optimization rewrites `dictGet(...)` predicates. ClickHouse now skips the rewrite and executes the original expression. Closes [#97269](https://github.com/ClickHouse/ClickHouse/issues/97269). [#97484](https://github.com/ClickHouse/ClickHouse/pull/97484) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix assertion failure (exception in debug/sanitizer builds) in `Set` and `MergeTreeIndexSet` when processing columns with inner sparse subcolumns (e.g., `Tuple` columns from MergeTree parts with different sparse serialization profiles). [#97493](https://github.com/ClickHouse/ClickHouse/pull/97493) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix LOGICAL_ERROR exception when reading sparse column and its subcolumn together. [#97515](https://github.com/ClickHouse/ClickHouse/pull/97515) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix a possible use after free in StorageKafka2. [#97520](https://github.com/ClickHouse/ClickHouse/pull/97520) ([Bharat Nallan](https://github.com/bharatnc)).
* Backported in [#97960](https://github.com/ClickHouse/ClickHouse/issues/97960): Fix logical error about missing stream during INSERT SELECT with JSON and buckets in shared data. Closes [#97331](https://github.com/ClickHouse/ClickHouse/issues/97331). [#97523](https://github.com/ClickHouse/ClickHouse/pull/97523) ([Pavel Kruglov](https://github.com/Avogar)).
* Allow read-in-order optimization to use row policies. For example, a table with `ORDER BY (key1, key2)` and a row policy `USING key1 = 5` can now serve `ORDER BY key2` queries without an explicit sort. [#97538](https://github.com/ClickHouse/ClickHouse/pull/97538) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Backported in [#98037](https://github.com/ClickHouse/ClickHouse/issues/98037): Remove incorrect `replaceRegexpOne` to `extract` query rewrite that produced wrong results when the regexp didn't match; also fix exception when `replaceRegexpOne` is used with `GROUP BY ... WITH CUBE` and `group_by_use_nulls=1`. [#97546](https://github.com/ClickHouse/ClickHouse/pull/97546) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `INTO OUTFILE` with `TRUNCATE` and `into_outfile_create_parent_directories` setting when the output path contains directories. [#97549](https://github.com/ClickHouse/ClickHouse/pull/97549) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `BAD_ARGUMENTS` error when querying tables with lambda expressions inside ALIAS columns through the `merge()` table function with the analyzer enabled. [#97551](https://github.com/ClickHouse/ClickHouse/pull/97551) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `system.zookeeper_info` exception when Keeper zxid is 0. [#97553](https://github.com/ClickHouse/ClickHouse/pull/97553) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix data race on `shutdown_called` in `DatabaseMaterializedPostgreSQL`. [#97554](https://github.com/ClickHouse/ClickHouse/pull/97554) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix a possible logical error in `ip_trie` dictionary when key type is not String. [#97555](https://github.com/ClickHouse/ClickHouse/pull/97555) ([Bharat Nallan](https://github.com/bharatnc)).
* ... [#97561](https://github.com/ClickHouse/ClickHouse/pull/97561) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Geometry functions (`perimeterSpherical`, `areaSpherical`, etc.) now accept individual geometry subtypes (`Polygon`, `Ring`, `Point`, etc.) in addition to the `Geometry` variant type. [#97571](https://github.com/ClickHouse/ClickHouse/pull/97571) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `LOGICAL_ERROR` exception when using `isNull`/`isNotNull` on subcolumns of `Nullable(Tuple(... Nullable(T) ...))` types. Closes [#97224](https://github.com/ClickHouse/ClickHouse/issues/97224). [#97582](https://github.com/ClickHouse/ClickHouse/pull/97582) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix null pointer dereference when applying patch parts during lightweight updates. [#97583](https://github.com/ClickHouse/ClickHouse/pull/97583) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* `BaseSettings::readBinary` passes the index from `accessor.find` to `field_infos[]` without checking for the not-found sentinel value (i.e., `-1`), which may cause a `std::vector` out-of-bounds access. The issue was caught thanks to libcxx hardening. This probably happened during query plan deserialization when a newer server sends a setting unknown to an older server. The string-based read method already handles this correctly; `readBinary` was missing the same check. [#97585](https://github.com/ClickHouse/ClickHouse/pull/97585) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Fix `filterPartsByVirtualColumns` for constant-false predicates. [#97620](https://github.com/ClickHouse/ClickHouse/pull/97620) ([Bharat Nallan](https://github.com/bharatnc)).
* Fix block structure mismatch exception in `removeUnusedColumns` optimization when using `indexHint` with star expansion on tables with `FINAL`. [#97622](https://github.com/ClickHouse/ClickHouse/pull/97622) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `IN (col)` with a single column reference failing with `UNSUPPORTED_METHOD` error. [#97646](https://github.com/ClickHouse/ClickHouse/pull/97646) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error exception during `GROUP BY ... WITH ROLLUP/CUBE` when keys include `LowCardinality(Nullable(...))` inside `Nullable(Tuple(...))`. [#97647](https://github.com/ClickHouse/ClickHouse/pull/97647) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix AST formatting inconsistency for `NOT (1, 1, 1)` that could cause `LOGICAL_ERROR` in debug builds. [#97653](https://github.com/ClickHouse/ClickHouse/pull/97653) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix LOGICAL_ERROR exception in `concat` when an argument contains a `Variant` type with `LowCardinality` inside. [#97654](https://github.com/ClickHouse/ClickHouse/pull/97654) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `keeper-converter` exception when encountering empty ZooKeeper transaction log files. [#97673](https://github.com/ClickHouse/ClickHouse/pull/97673) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fixed a possible ClickHouse process crash/assert if the `WHERE` clause had more than 32 expressions with AND/ORs. [#97698](https://github.com/ClickHouse/ClickHouse/pull/97698) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Fix tupleElement throwing an exception with JSON for paths with type hints. [#97728](https://github.com/ClickHouse/ClickHouse/pull/97728) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#98225](https://github.com/ClickHouse/ClickHouse/issues/98225): Fix possible crashes during reading of empty granules in advanced shared data in JSON. Closes [#97563](https://github.com/ClickHouse/ClickHouse/issues/97563). [#97778](https://github.com/ClickHouse/ClickHouse/pull/97778) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#98025](https://github.com/ClickHouse/ClickHouse/issues/98025): Fixed ClickHouse server crash/assert in call to `mapContainsKey/mapContainsKeyLike` with `tokenbf_v1` skip index. [#97826](https://github.com/ClickHouse/ClickHouse/pull/97826) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Backported in [#97985](https://github.com/ClickHouse/ClickHouse/issues/97985): Fix LOGICAL_ERROR exceptions caused by `LowCardinality` inside compound types (`Variant`, `Dynamic`, `Tuple`) in `concatWithSeparator`, `format`, `IN` subqueries, `GLOBAL IN`, and joins with runtime filters. [#97831](https://github.com/ClickHouse/ClickHouse/pull/97831) ([Raúl Marín](https://github.com/Algunenano)).
* Backported in [#97949](https://github.com/ClickHouse/ClickHouse/issues/97949): Fix server crash (`std::terminate`) caused by an uncaught exception in the HTTP connection pool destructor when the connection group hard limit is reached under high concurrency. The exception `HTTP_CONNECTION_LIMIT_REACHED` could escape `~PooledConnection` when recycling a connection back to the pool, leading to `SIGABRT`. [#97850](https://github.com/ClickHouse/ClickHouse/pull/97850) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#97919](https://github.com/ClickHouse/ClickHouse/issues/97919): Fix incorrect result when `grace_hash` algorithm is used with non-equi joins and left block cannot be processed completely because of the size constraints on the join result. [#97866](https://github.com/ClickHouse/ClickHouse/pull/97866) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Backported in [#97947](https://github.com/ClickHouse/ClickHouse/issues/97947): Fix performance inefficiency introduced in https://github.com/ClickHouse/ClickHouse/pull/96686. [#97880](https://github.com/ClickHouse/ClickHouse/pull/97880) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Backported in [#98063](https://github.com/ClickHouse/ClickHouse/issues/98063): Fix data race in ZooKeeper client between sendThread and receiveThread. [#97887](https://github.com/ClickHouse/ClickHouse/pull/97887) ([Pablo Marcos](https://github.com/pamarcos)).
* Backported in [#98142](https://github.com/ClickHouse/ClickHouse/issues/98142): Fix exception from `CachedOnDiskReadBufferFromFile::readBigAt`. Closes [#97325](https://github.com/ClickHouse/ClickHouse/issues/97325). [#97890](https://github.com/ClickHouse/ClickHouse/pull/97890) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Backported in [#98176](https://github.com/ClickHouse/ClickHouse/issues/98176): Fix Keeper data loss after restart when using Azure Blob Storage with `s3_plain` metadata for log storage. [#97987](https://github.com/ClickHouse/ClickHouse/pull/97987) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#98200](https://github.com/ClickHouse/ClickHouse/issues/98200): Fix segfault in query plan optimization when converting outer join to inner join with `arrayJoin` in filter expression. [#98147](https://github.com/ClickHouse/ClickHouse/pull/98147) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### Build/Testing/Packaging Improvement
* Fix force `is_local` to false when `bind_host` is configured and replace with integration test. Follow-up for https://github.com/ClickHouse/ClickHouse/pull/74741. [#93109](https://github.com/ClickHouse/ClickHouse/pull/93109) ([Zhigao Hong](https://github.com/zghong)).
* Stress tests: fix stress and upgrade tests in CI. ignore no-{build} tags. add compatibility randomization. [#94693](https://github.com/ClickHouse/ClickHouse/pull/94693) ([Nikita Fomichev](https://github.com/fm4v)).
* Use `postgres` to REL_18_1. [#95189](https://github.com/ClickHouse/ClickHouse/pull/95189) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Use `libexpat` 2.7.3. [#95218](https://github.com/ClickHouse/ClickHouse/pull/95218) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Use OpenSSL 3.5.5. [#95345](https://github.com/ClickHouse/ClickHouse/pull/95345) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Fix math function domain violations in `math.xml` performance test. [#95442](https://github.com/ClickHouse/ClickHouse/pull/95442) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* ClickHouse can be built with clang-23 (master). [#95578](https://github.com/ClickHouse/ClickHouse/pull/95578) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Publish parser_memory_profiler binary from build. Tool can be used to analyze AST memory consumption. [#95826](https://github.com/ClickHouse/ClickHouse/pull/95826) ([Ilya Yatsishin](https://github.com/qoega)).
* Fixed compression codec tests where float generators were producing truncated integer values instead of actual floats. [#95961](https://github.com/ClickHouse/ClickHouse/pull/95961) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Fix force `is_local` to false when `bind_host` is configured and replace with integration test. Follow-up for [#74741](https://github.com/ClickHouse/ClickHouse/issues/74741). [#96018](https://github.com/ClickHouse/ClickHouse/pull/96018) ([Zhigao Hong](https://github.com/zghong)).
* Add --symbolize flag for `parser_memory_profiler` tool that produces `.heap.sym` files with resolved symbols in results. [#96477](https://github.com/ClickHouse/ClickHouse/pull/96477) ([Ilya Yatsishin](https://github.com/qoega)).
* Pin third-party Docker images to specific versions. [#96500](https://github.com/ClickHouse/ClickHouse/pull/96500) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Restore the possibility to link OpenSSL dynamically. This is not recommended and not used by any production builds, but the option still exists for enthusiasts on the Internet. [#96506](https://github.com/ClickHouse/ClickHouse/pull/96506) ([Govind R Nair](https://github.com/Revertionist)).
* Reduce `magic_enum` range from [-100, 1000] to default [-128, 127] by using a per-type specialization for `Coordination::OpNum`, improving build time. [#96632](https://github.com/ClickHouse/ClickHouse/pull/96632) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Remove unnecessary C++ templates from Function classes to reduce build times. [#96646](https://github.com/ClickHouse/ClickHouse/pull/96646) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Move `StorageSystemLicenses` generation to configure time to improve build parallelism. [#96697](https://github.com/ClickHouse/ClickHouse/pull/96697) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Parallelize license scanning. [#96727](https://github.com/ClickHouse/ClickHouse/pull/96727) ([Raúl Marín](https://github.com/Algunenano)).
* Add nightly CI workflow to build PGO+BOLT optimized clang toolchain. [#96991](https://github.com/ClickHouse/ClickHouse/pull/96991) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add stateless functional test for SSH protocol support. [#96996](https://github.com/ClickHouse/ClickHouse/pull/96996) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add Kafka 3.9.0 to the stateless functional test infrastructure, enabling direct testing of Kafka and Kafka2 table engines using ClickHouse Keeper as ZooKeeper. Six new stateless tests cover basic produce/consume, virtual columns, INSERT, multiple formats, broken message handling, and Keeper-based offset storage. [#96997](https://github.com/ClickHouse/ClickHouse/pull/96997) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Move `keeper_multiread_batch_size` test configuration from private to public repository. [#97022](https://github.com/ClickHouse/ClickHouse/pull/97022) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Use the PGO-optimized LLVM/Clang build in CI, which should give 20..30% build speed improvement. [#97031](https://github.com/ClickHouse/ClickHouse/pull/97031) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Update Boost from 1.83 to 1.90, fixing a `devector` assertion failure in debug builds. [#97037](https://github.com/ClickHouse/ClickHouse/pull/97037) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Use `simdjson` v4.2.4. [#97129](https://github.com/ClickHouse/ClickHouse/pull/97129) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Use `libarchive` 3.8.5. [#97131](https://github.com/ClickHouse/ClickHouse/pull/97131) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Use `fast_float` v8.2.3. [#97133](https://github.com/ClickHouse/ClickHouse/pull/97133) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Use `abseil-cpp` 20260107.1, `s2geometry` to v0.13.1. [#97134](https://github.com/ClickHouse/ClickHouse/pull/97134) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Compatibility setting randomization doesn't make sense for upgrade checks and could lead to incorrect failures, because tests with older compatibility settings might create objects that can't be loaded in a newer version without that compatibility setting enabled. [#97236](https://github.com/ClickHouse/ClickHouse/pull/97236) ([Nikita Fomichev](https://github.com/fm4v)).
* Use PGO+BOLT optimized clang toolchain for CI builds. [#97283](https://github.com/ClickHouse/ClickHouse/pull/97283) ([clickhouse-gh[bot]](https://github.com/apps/clickhouse-gh)).
* Upgraded 7 Tier-3 integration test Docker images from EOL or removed base images to current supported versions. [#97314](https://github.com/ClickHouse/ClickHouse/pull/97314) ([Rahul](https://github.com/motsc)).
* Add TPC-DS benchmark queries. [#97349](https://github.com/ClickHouse/ClickHouse/pull/97349) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Replace individual x86 instruction-set cmake options (`ENABLE_SSSE3`, `ENABLE_AVX2`, `NO_SSE3_OR_HIGHER`, `ARCH_NATIVE`, etc.) with a single numeric `X86_ARCH_LEVEL` option (`1`/`2`/`3`/`4`), matching the standard x86-64 microarchitecture levels already used by the runtime dispatch system. [#97354](https://github.com/ClickHouse/ClickHouse/pull/97354) ([Raúl Marín](https://github.com/Algunenano)).
* Avoid instantiating `division_by_nullable=true` template variants for non-division operations in `FunctionBinaryArithmetic`, reducing compilation time and binary size. [#97496](https://github.com/ClickHouse/ClickHouse/pull/97496) ([Raúl Marín](https://github.com/Algunenano)).
* Reduce the include footprint of `Exception.h` by removing it from high-fan-out headers like `typeid_cast.h`, `assert_cast.h`, `Context_fwd.h`, `IDataType.h`, and various Column headers. [#97497](https://github.com/ClickHouse/ClickHouse/pull/97497) ([Raúl Marín](https://github.com/Algunenano)).
* Always use bundled `compiler-rt` headers (sanitizer and XRay interfaces) instead of the host compiler's headers, and build `compiler-rt` libraries from source by default. [#97499](https://github.com/ClickHouse/ClickHouse/pull/97499) ([Raúl Marín](https://github.com/Algunenano)).
* Extract conversion functions in FunctionsConversion.h. [#97704](https://github.com/ClickHouse/ClickHouse/pull/97704) ([Raúl Marín](https://github.com/Algunenano)).

#### CI Fix or Improvement

* Fix a race condition in `BACKUP ON CLUSTER` where the backup could fail prematurely with "Lost connection" when the initiator node itself temporarily lost its ZooKeeper connection. [#96961](https://github.com/ClickHouse/ClickHouse/pull/96961) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race condition in file cache dynamic resize that could cause a `LOGICAL_ERROR` exception during config reload. [#96980](https://github.com/ClickHouse/ClickHouse/pull/96980) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix LOGICAL_ERROR exception in `REPLACE TABLE ... CLONE AS ...` when `alter_partition_verbose_result` is enabled. [#96982](https://github.com/ClickHouse/ClickHouse/pull/96982) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error exception in `addTableExpressionOrJoinIntoTablesInSelectQuery` when formatting error messages for invalid query trees containing unexpected node types in join tree positions. [#96985](https://github.com/ClickHouse/ClickHouse/pull/96985) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error exception in `FunctionVariantAdaptor` when applying functions to Variant columns containing `LowCardinality` alternatives with constant non-Variant arguments. [#97021](https://github.com/ClickHouse/ClickHouse/pull/97021) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* ... [#97025](https://github.com/ClickHouse/ClickHouse/pull/97025) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `LOGICAL_ERROR` exception in `ATTACH PARTITION ALL` when the detached directory contains parts with intersecting block ranges. [#97040](https://github.com/ClickHouse/ClickHouse/pull/97040) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix LOGICAL_ERROR exception "Tried to lock part for removal second time" on concurrent `TRUNCATE` operations. [#97211](https://github.com/ClickHouse/ClickHouse/pull/97211) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Switch from Apache Kafka to Redpanda in functional (stateless) tests to reduce flakiness from JVM-related delays. [#97429](https://github.com/ClickHouse/ClickHouse/pull/97429) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `02932_refreshable_materialized_views_2` timeout on ASan by preventing race between auto-refresh table exchange and concurrent reads. [#97667](https://github.com/ClickHouse/ClickHouse/pull/97667) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### CI Fix or improvement

* Do not fail targeted integration checks on session timeout when all completed tests have passed. [#96761](https://github.com/ClickHouse/ClickHouse/pull/96761) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix inconsistent AST formatting for `array`/`tuple` functions with `.N` tuple element access that caused exceptions in debug builds. [#96894](https://github.com/ClickHouse/ClickHouse/pull/96894) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_build_sets_from_multiple_threads` integration test under ASan. [#96954](https://github.com/ClickHouse/ClickHouse/pull/96954) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Reduce Spark JVM startups in `test_database_delta` integration tests to avoid timeout flakiness. [#96962](https://github.com/ClickHouse/ClickHouse/pull/96962) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `00563_shard_insert_into_remote` by increasing `handshake_timeout_ms`. [#96966](https://github.com/ClickHouse/ClickHouse/pull/96966) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add missing `FilteredListWithStatsAndData` and other `OpNum` values to `zookeeper_log` system table enum, fixing sporadic `UNKNOWN_ELEMENT_OF_ENUM` exceptions. [#97130](https://github.com/ClickHouse/ClickHouse/pull/97130) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03400_alter_update_with_rename` by using proper mutation sync instead of sleep-based wait. [#97268](https://github.com/ClickHouse/ClickHouse/pull/97268) ([Raúl Marín](https://github.com/Algunenano)).
* `cherry_pick.py` now skips creating cherry-pick/backport PRs for release branches marked `rolling-out` when the source PR uses the generic `pr-must-backport` or `pr-critical-bugfix` label; a direct version-specific label (e.g. `v25.10-must-backport`) overrides this and always proceeds. [#97274](https://github.com/ClickHouse/ClickHouse/pull/97274) ([Max Kainov](https://github.com/maxknv)).
* Fix several bugs in the `praktika` CI infrastructure deployment tooling: idempotent IAM/Lambda deploys, Slack worker preference persistence, home view block limit, Lambda timeout, and EC2 instance quantity handling. [#97310](https://github.com/ClickHouse/ClickHouse/pull/97310) ([Max Kainov](https://github.com/maxknv)).
* Added `Job.Config.needs_jobs_from_requires` flag to treat job-name entries in `requires` as hard dependencies in the CI praktika framework. [#97391](https://github.com/ClickHouse/ClickHouse/pull/97391) ([Max Kainov](https://github.com/maxknv)).
* Fixed flaky `test_kafka_sasl_settings_precedence` integration test under TSan by explicitly closing the Kafka producer. [#97415](https://github.com/ClickHouse/ClickHouse/pull/97415) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix MSan use-of-uninitialized-value in `LibArchiveWriter::WriteBufferFromLibArchive::closeFile` by initializing class members at declaration. [#97431](https://github.com/ClickHouse/ClickHouse/pull/97431) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Use `ext.change_url` / `ext.run_url` fields for navigation links in the Praktika HTML report, and show per-job GitHub Actions URLs when viewing individual job results. [#97534](https://github.com/ClickHouse/ClickHouse/pull/97534) ([Max Kainov](https://github.com/maxknv)).
* N/A. [#97643](https://github.com/ClickHouse/ClickHouse/pull/97643) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add timeout for minio restart in CI to avoid test jobs hanging forever. [#97655](https://github.com/ClickHouse/ClickHouse/pull/97655) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### CI Fix or improvement (CI only)

* Not for changelog. [#96928](https://github.com/ClickHouse/ClickHouse/pull/96928) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### CI Fix or improvement (not a user-visible change)

* Fix race condition in failpoint `waitForPause` that caused flaky test failures. [#96890](https://github.com/ClickHouse/ClickHouse/pull/96890) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### NO CL CATEGORY

* Backported in [#98156](https://github.com/ClickHouse/ClickHouse/issues/98156):. [#98038](https://github.com/ClickHouse/ClickHouse/pull/98038) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### NO CL ENTRY

* NO CL ENTRY:  'Revert " Implement AVX512BW versions for random data generation"'. [#93983](https://github.com/ClickHouse/ClickHouse/pull/93983) ([Raúl Marín](https://github.com/Algunenano)).
* NO CL ENTRY:  'Sccache: third attempt'. [#95226](https://github.com/ClickHouse/ClickHouse/pull/95226) ([Max Kainov](https://github.com/maxknv)).
* NO CL ENTRY:  'Revert "Fix schema mapping for dates"'. [#95468](https://github.com/ClickHouse/ClickHouse/pull/95468) ([Alexander Tokmakov](https://github.com/tavplubix)).
* NO CL ENTRY:  'Revert "Revert "Fix schema mapping for dates""'. [#95477](https://github.com/ClickHouse/ClickHouse/pull/95477) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* NO CL ENTRY:  'Revert "Support auxiliary zookeeper for `DatabaseReplicated`."'. [#95513](https://github.com/ClickHouse/ClickHouse/pull/95513) ([Alexander Tokmakov](https://github.com/tavplubix)).
* NO CL ENTRY:  'Revert "Fix test_peak_memory_usage flakiness by making logging of peak memory more accurate"'. [#95564](https://github.com/ClickHouse/ClickHouse/pull/95564) ([Alexey Bakharew](https://github.com/alexbakharew)).
* NO CL ENTRY:  'Revert "Revert "Merge pull request [#93542](https://github.com/ClickHouse/ClickHouse/issues/93542) from scanhex12/multistage_prewhere""'. [#95565](https://github.com/ClickHouse/ClickHouse/pull/95565) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* NO CL ENTRY:  'Revert "Do not hold a storage in storage snapshot"'. [#95594](https://github.com/ClickHouse/ClickHouse/pull/95594) ([Azat Khuzhin](https://github.com/azat)).
* NO CL ENTRY:  'Revert "add more information to crash log" (`signal-unsafe` warning in TSan)'. [#95733](https://github.com/ClickHouse/ClickHouse/pull/95733) ([Azat Khuzhin](https://github.com/azat)).
* NO CL ENTRY:  'Revert "Integration tests: add tests for encrypted named collections"'. [#95908](https://github.com/ClickHouse/ClickHouse/pull/95908) ([Alexander Tokmakov](https://github.com/tavplubix)).
* NO CL ENTRY:  'Revert "Allow certain functions without parentheses in SQL"'. [#95943](https://github.com/ClickHouse/ClickHouse/pull/95943) ([Raúl Marín](https://github.com/Algunenano)).
* NO CL ENTRY:  'Revert "Fix force `is_local` to false when `bind_host` is configured"'. [#95974](https://github.com/ClickHouse/ClickHouse/pull/95974) ([Raúl Marín](https://github.com/Algunenano)).
* NO CL ENTRY:  'Revert "Part with unknown projections should not be marked as lost forever"'. [#95991](https://github.com/ClickHouse/ClickHouse/pull/95991) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* NO CL ENTRY:  'Revert "Revert "Revert "Merge pull request [#93542](https://github.com/ClickHouse/ClickHouse/issues/93542) from scanhex12/multistage_prewhere"""'. [#96028](https://github.com/ClickHouse/ClickHouse/pull/96028) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* NO CL ENTRY:  'Revert "Revert "Revert "Revert "Merge pull request [#93542](https://github.com/ClickHouse/ClickHouse/issues/93542) from scanhex12/multistage_prewhere""""'. [#96088](https://github.com/ClickHouse/ClickHouse/pull/96088) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* NO CL ENTRY:  'Revert "Fix relative config paths resolving against wrong directory after chdir"'. [#96548](https://github.com/ClickHouse/ClickHouse/pull/96548) ([Ilya Yatsishin](https://github.com/qoega)).
* NO CL ENTRY:  'Revert "Fix exception in `adjustLastGranule` with constant PREWHERE and patch parts"'. [#96574](https://github.com/ClickHouse/ClickHouse/pull/96574) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* NO CL ENTRY:  'Revert "Remove unnecessary parentheses in `CREATE TABLE ... AS SELECT ... COMMENT`"'. [#96595](https://github.com/ClickHouse/ClickHouse/pull/96595) ([Alexander Tokmakov](https://github.com/tavplubix)).
* NO CL ENTRY:  'Revert "Revert "Remove unnecessary parentheses in `CREATE TABLE ... AS SELECT ... COMMENT`""'. [#96598](https://github.com/ClickHouse/ClickHouse/pull/96598) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* NO CL ENTRY:  'Revert "Add setting enabling throwing an exception on reading from a table if the table has row policies but no row policies are for the current user"'. [#96813](https://github.com/ClickHouse/ClickHouse/pull/96813) ([Alexander Tokmakov](https://github.com/tavplubix)).
* NO CL ENTRY:  'Revert "Set `MALLOC_MIN_ALIGNMENT` to the value from standard library"'. [#96814](https://github.com/ClickHouse/ClickHouse/pull/96814) ([Nikita Taranov](https://github.com/nickitat)).
* NO CL ENTRY:  'Revert "Improve catalog show tables query"'. [#96826](https://github.com/ClickHouse/ClickHouse/pull/96826) ([alesapin](https://github.com/alesapin)).
* NO CL ENTRY:  'Revert "Add regression tests for `adjustLastGranule` with constant PREWHERE and patches"'. [#96862](https://github.com/ClickHouse/ClickHouse/pull/96862) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* NO CL ENTRY:  'Revert "Test bugfix validation against multiple build types"'. [#97011](https://github.com/ClickHouse/ClickHouse/pull/97011) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* NO CL ENTRY:  'Revert "Add MSan integration tests as non-required CI jobs"'. [#97052](https://github.com/ClickHouse/ClickHouse/pull/97052) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* NO CL ENTRY:  'Revert "Revert "Add MSan integration tests as non-required CI jobs""'. [#97058](https://github.com/ClickHouse/ClickHouse/pull/97058) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* NO CL ENTRY:  'Revert "Revert "Improve catalog show tables query""'. [#97062](https://github.com/ClickHouse/ClickHouse/pull/97062) ([Smita Kulkarni](https://github.com/SmitaRKulkarni)).
* NO CL ENTRY:  'Revert "Normalize positional GROUP BY in projections to prevent server restart failure"'. [#97221](https://github.com/ClickHouse/ClickHouse/pull/97221) ([Nikita Fomichev](https://github.com/fm4v)).
* NO CL ENTRY:  'Revert "Show schema for parameterized_view"'. [#97289](https://github.com/ClickHouse/ClickHouse/pull/97289) ([Nikita Fomichev](https://github.com/fm4v)).
* NO CL ENTRY:  'Revert "Fix logical error when fetched part has newer metadata version than table"'. [#97301](https://github.com/ClickHouse/ClickHouse/pull/97301) ([alesapin](https://github.com/alesapin)).
* NO CL ENTRY:  'Revert "Fix incorrect last mark granularity in constant granularity parts"'. [#97430](https://github.com/ClickHouse/ClickHouse/pull/97430) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* NO CL ENTRY:  'Revert "Fix exception when reading .size subcolumn of sparse Nullable(String) with PREWHERE"'. [#97512](https://github.com/ClickHouse/ClickHouse/pull/97512) ([Pavel Kruglov](https://github.com/Avogar)).
* NO CL ENTRY:  'Revert "Missing testing features"'. [#97550](https://github.com/ClickHouse/ClickHouse/pull/97550) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* Randomize two settings. [#62191](https://github.com/ClickHouse/ClickHouse/pull/62191) ([Anton Popov](https://github.com/CurtizJ)).
* Allow using userspace page cache with local files and object storage table functions. [#77874](https://github.com/ClickHouse/ClickHouse/pull/77874) ([Michael Kolupaev](https://github.com/al13n321)).
* Avoid unnecessary memcpy in userspace page cache. [#77884](https://github.com/ClickHouse/ClickHouse/pull/77884) ([Michael Kolupaev](https://github.com/al13n321)).
* PR: use serialized query plan (part 1). [#88696](https://github.com/ClickHouse/ClickHouse/pull/88696) ([Igor Nikonov](https://github.com/devcrafter)).
* More respect to memory limit from aggregate functions. [#93070](https://github.com/ClickHouse/ClickHouse/pull/93070) ([Nikita Taranov](https://github.com/nickitat)).
* Hopelessly fix test_userspace_page_cache flakiness. [#93653](https://github.com/ClickHouse/ClickHouse/pull/93653) ([Michael Kolupaev](https://github.com/al13n321)).
* Followup fix for --record in clickhouse. [#93677](https://github.com/ClickHouse/ClickHouse/pull/93677) ([Shaohua Wang](https://github.com/tiandiwonder)).
* Continue of Iceberg compaction. [#94096](https://github.com/ClickHouse/ClickHouse/pull/94096) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Replace manual argument validation in various SQL functions. [#94175](https://github.com/ClickHouse/ClickHouse/pull/94175) ([Christoph Viebig](https://github.com/cv4g)).
* Sync clickhouse-test with private. [#94358](https://github.com/ClickHouse/ClickHouse/pull/94358) ([Nikita Fomichev](https://github.com/fm4v)).
* Add `--provenance=true --sbom=true` to server and keeper image build command. This improves overall Docker Scout score and generate Software Bill of Materials (SBOM) and SLSA Provenance attestations as metadata for the image. [#94630](https://github.com/ClickHouse/ClickHouse/pull/94630) ([San Tran](https://github.com/santrancisco)).
* Follow-up of https://github.com/ClickHouse/ClickHouse/pull/93910 Fixes: [#90840](https://github.com/ClickHouse/ClickHouse/issues/90840). [#94651](https://github.com/ClickHouse/ClickHouse/pull/94651) ([Alexey Bakharew](https://github.com/alexbakharew)).
* CIDB [link](https://play.clickhouse.com/play?user=play&run=1#U0VMRUNUIGNoZWNrX3N0YXJ0X3RpbWUsIGNoZWNrX25hbWUsIHRlc3RfbmFtZSwgcmVwb3J0X3VybApGUk9NIGNoZWNrcwpXSEVSRSBjaGVja19zdGFydF90aW1lID49IG5vdygpIC0gSU5URVJWQUwgMSBNT05USAogICAgQU5EIChoZWFkX3JlZiA9ICdtYXN0ZXInIEFORCBzdGFydHNXaXRoKGhlYWRfcmVwbywgJ0NsaWNrSG91c2UvJykpCiAgICBBTkQgdGVzdF9zdGF0dXMgIT0gJ1NLSVBQRUQnCiAgICBBTkQgKHRlc3Rfc3RhdHVzIExJS0UgJ0YlJyBPUiB0ZXN0X3N0YXR1cyBMSUtFICdFJScpIAogICAgQU5EIGNoZWNrX3N0YXR1cyAhPSAnc3VjY2VzcycKICAgIEFORCBwb3NpdGlvbih0ZXN0X25hbWUsICdyZXN0b3JlX2RiX3JlcGxpY2EnKSA+IDAKT1JERVIgQlkgY2hlY2tfc3RhcnRfdGltZSBERVND). [#94772](https://github.com/ClickHouse/ClickHouse/pull/94772) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Rollback memory limiter for Fast tests. [#94828](https://github.com/ClickHouse/ClickHouse/pull/94828) ([Max Kainov](https://github.com/maxknv)).
* Fix flaky test_ttl_move. [#94853](https://github.com/ClickHouse/ClickHouse/pull/94853) ([Arsen Muk](https://github.com/arsenmuk)).
* Quantile metrics are an abstraction above current metrics for dynamic calculation of quantiles across multiple writers. For example, the maximum number of active replicas across all tables attached to the server node. [#94857](https://github.com/ClickHouse/ClickHouse/pull/94857) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Fix flaky tests 03207_json_read_subcolumns_1_wide_merge_tree and 03208_array_of_json_read_subcolumns_1. [#94957](https://github.com/ClickHouse/ClickHouse/pull/94957) ([Pavel Kruglov](https://github.com/Avogar)).
* Test: Fix user defined dir. [#94958](https://github.com/ClickHouse/ClickHouse/pull/94958) ([Alexei Fedotov](https://github.com/leshikus)).
* Add a server setting to stop the server startup if a replicated access storage contains broken access queries. [#95032](https://github.com/ClickHouse/ClickHouse/pull/95032) ([pufit](https://github.com/pufit)).
* Fix logical error `Logical error: Trying to extract chunk from ChunkBuffer before all inputs are finished` in correlated subqueries. [#95080](https://github.com/ClickHouse/ClickHouse/pull/95080) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_keeper_force_recovery/test.py::test_cluster_recovery`. [#95112](https://github.com/ClickHouse/ClickHouse/pull/95112) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Disable slow tests on Azure blob storage. [#95177](https://github.com/ClickHouse/ClickHouse/pull/95177) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix some kafka tests. [#95180](https://github.com/ClickHouse/ClickHouse/pull/95180) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* CI: BackportCI to check PR content is valid. [#95190](https://github.com/ClickHouse/ClickHouse/pull/95190) ([Max Kainov](https://github.com/maxknv)).
* Check pair of equal size components only once, not twice in DPsize join reordering. [#95192](https://github.com/ClickHouse/ClickHouse/pull/95192) ([Alexander Gololobov](https://github.com/davenger)).
* Fix `test_missing_mv_transitive_target`. [#95204](https://github.com/ClickHouse/ClickHouse/pull/95204) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Get PK size from checksums file instead of filesystem. [#95208](https://github.com/ClickHouse/ClickHouse/pull/95208) ([Azat Khuzhin](https://github.com/azat)).
* Update version after release. [#95209](https://github.com/ClickHouse/ClickHouse/pull/95209) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Fix rare hanging of ON CLUSTER backups and restores. [#95212](https://github.com/ClickHouse/ClickHouse/pull/95212) ([Vitaly Baranov](https://github.com/vitlibar)).
* PromQL: Simplify storing ranges and offsets in `PrometheusQueryTree`, use `DateTime64` instead of `DecimalField<DateTime64>`. [#95223](https://github.com/ClickHouse/ClickHouse/pull/95223) ([Vitaly Baranov](https://github.com/vitlibar)).
* Make `NamesHash` reusable across the codebase. [#95227](https://github.com/ClickHouse/ClickHouse/pull/95227) ([Nikita Taranov](https://github.com/nickitat)).
* Add settings changes history 26.2 block. [#95233](https://github.com/ClickHouse/ClickHouse/pull/95233) ([Nikita Fomichev](https://github.com/fm4v)).
* Fix flaky test 'test_replicated_database/test.py::test_alter_rename'. [#95262](https://github.com/ClickHouse/ClickHouse/pull/95262) ([Shaohua Wang](https://github.com/tiandiwonder)).
* Disable parallel queries in CI. [#95294](https://github.com/ClickHouse/ClickHouse/pull/95294) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Wait for Keeper to start. [#95296](https://github.com/ClickHouse/ClickHouse/pull/95296) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Useful for debugging `Inconsistent AST formatting` errors. [#95298](https://github.com/ClickHouse/ClickHouse/pull/95298) ([Elmi Ahmadov](https://github.com/ahmadov)).
* CI: update feature docs check with all categories of autogenerated docs. [#95305](https://github.com/ClickHouse/ClickHouse/pull/95305) ([Shaun Struwig](https://github.com/Blargian)).
* Avoid doing an extra loop. Should have minimal impact but maybe it helps. [#95308](https://github.com/ClickHouse/ClickHouse/pull/95308) ([Raúl Marín](https://github.com/Algunenano)).
* Closes [#95291](https://github.com/ClickHouse/ClickHouse/issues/95291). [#95310](https://github.com/ClickHouse/ClickHouse/pull/95310) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix concurrent_threads_scheduler randomization. [#95311](https://github.com/ClickHouse/ClickHouse/pull/95311) ([Sergei Trifonov](https://github.com/serxa)).
* Improve error handling for SYSTEM INSTRUMENT statement. [#95312](https://github.com/ClickHouse/ClickHouse/pull/95312) ([Pablo Marcos](https://github.com/pamarcos)).
* Add `no-azure-blob-storage` tag to tests that consistently time out. [#95313](https://github.com/ClickHouse/ClickHouse/pull/95313) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add `no-msan` tag to tests that consistently time out on MSan. [#95314](https://github.com/ClickHouse/ClickHouse/pull/95314) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Update outdated bootstrap in trace-visualizer. [#95317](https://github.com/ClickHouse/ClickHouse/pull/95317) ([Sergei Trifonov](https://github.com/serxa)).
* Because the data being compressed is randomly generated, the compression ratio sometimes falls just below the target. [CIDB link](https://play.clickhouse.com/play?user=play#V0lUSAogICAgMzY1IEFTIGludGVydmFsX2RheXMKU0VMRUNUCiAgICB0b1N0YXJ0T2ZEYXkoY2hlY2tfc3RhcnRfdGltZSkgQVMgZGF5LAogICAgY291bnQoKSBBUyBmYWlsdXJlcywKICAgIGdyb3VwVW5pcUFycmF5KHB1bGxfcmVxdWVzdF9udW1iZXIpIEFTIHBycywKICAgIGFueShyZXBvcnRfdXJsKSBBUyByZXBvcnRfdXJsCkZST00gY2hlY2tzCldIRVJFIChub3coKSAtIHRvSW50ZXJ2YWxEYXkoaW50ZXJ2YWxfZGF5cykpIDw9IGNoZWNrX3N0YXJ0X3RpbWUKICAgIEFORCB0ZXN0X25hbWUgPSAnMDMzNjRfZXN0aW1hdGVfY29tcHJlc3Npb25fcmF0aW8nCiAgICAtLSBBTkQgY2hlY2tfbmFtZSA9ICdTdGF0ZWxlc3MgdGVzdHMgKGFtZF9kZWJ1ZywgQXN5bmNJbnNlcnQsIHMzIHN0b3JhZ2UsIHBhcmFsbGVsKScKICAgIEFORCB0ZXN0X3N0YXR1cyBJTiAoJ0ZBSUwnLCAnRVJST1InKQogICAgQU5EIChwdWxsX3JlcXVlc3RfbnVtYmVyID0gMCBPUiBiYXNlX3JlZiBJTiAoJ21hc3RlcicpKQogICAgQU5EIHRlc3RfY29udGV4dF9yYXcgTElLRSAnJXJldHVybiBjb2RlJScKR1JPVVAgQlkgZGF5Ck9SREVSIEJZIGRheSBERVNDCg==). [#95320](https://github.com/ClickHouse/ClickHouse/pull/95320) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* CI: Improve integration tests distribution. [#95321](https://github.com/ClickHouse/ClickHouse/pull/95321) ([Max Kainov](https://github.com/maxknv)).
* Add style check for std containers. [#95328](https://github.com/ClickHouse/ClickHouse/pull/95328) ([Nikita Taranov](https://github.com/nickitat)).
* Fix inconsistent formatting of TTL WHERE expressions with aliases. [#95329](https://github.com/ClickHouse/ClickHouse/pull/95329) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix inconsistent formatting of aliased expressions in storage clauses. [#95330](https://github.com/ClickHouse/ClickHouse/pull/95330) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix typo. [#95332](https://github.com/ClickHouse/ClickHouse/pull/95332) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix MSan error in `ColumnNullable::getSerializedValueSize` (unreleased). [#95342](https://github.com/ClickHouse/ClickHouse/pull/95342) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add test for concurrent TRUNCATE race condition with stale directories. [#95344](https://github.com/ClickHouse/ClickHouse/pull/95344) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Update version_date.tsv and changelog after v25.11.8.25-stable. [#95351](https://github.com/ClickHouse/ClickHouse/pull/95351) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Correct shutdown order in unit tests. [#95353](https://github.com/ClickHouse/ClickHouse/pull/95353) ([Azat Khuzhin](https://github.com/azat)).
* Find difference between ASTs by iterating all children recursively. [#95368](https://github.com/ClickHouse/ClickHouse/pull/95368) ([Elmi Ahmadov](https://github.com/ahmadov)).
* Add some claude skills. [#95369](https://github.com/ClickHouse/ClickHouse/pull/95369) ([Antonio Andelic](https://github.com/antonio2368)).
* The README.md shouldn't be edited manually, only by tweaking `README.src` + `README.sh` to have the same description as https://hub.docker.com/_/clickhouse. [#95370](https://github.com/ClickHouse/ClickHouse/pull/95370) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* CI: Stress Upgrade result processing clean up. [#95373](https://github.com/ClickHouse/ClickHouse/pull/95373) ([Max Kainov](https://github.com/maxknv)).
* Add vscode `.devcontainer` to `.gitignore`. [#95375](https://github.com/ClickHouse/ClickHouse/pull/95375) ([Christoph Viebig](https://github.com/cv4g)).
* Fix report parser when timeout. [#95376](https://github.com/ClickHouse/ClickHouse/pull/95376) ([Alexei Fedotov](https://github.com/leshikus)).
* Fix order of destruction in MergeTreeReadPoolBase. [#95393](https://github.com/ClickHouse/ClickHouse/pull/95393) ([Azat Khuzhin](https://github.com/azat)).
* Do not hold a storage in storage snapshot. [#95396](https://github.com/ClickHouse/ClickHouse/pull/95396) ([Azat Khuzhin](https://github.com/azat)).
* Set max_threads in 03279_pr_3_way_joins_right_first. [#95397](https://github.com/ClickHouse/ClickHouse/pull/95397) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Remove workflows/debug_coverage.yml and enable Integration Tests. [#95399](https://github.com/ClickHouse/ClickHouse/pull/95399) ([Alexey Bakharew](https://github.com/alexbakharew)).
* Update head build. [#95418](https://github.com/ClickHouse/ClickHouse/pull/95418) ([San Tran](https://github.com/santrancisco)).
* Continuation of `intrusive_ptr<IAST>`. [#95444](https://github.com/ClickHouse/ClickHouse/pull/95444) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Disable long test `01007_r1r2_w_r2r1_deadlock` under MSan. [#95445](https://github.com/ClickHouse/ClickHouse/pull/95445) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* See https://s3.amazonaws.com/clickhouse-test-reports/json.html?REF=master&sha=67522222c8705bd81cb222f38006e1dc61deea20&name_0=MasterCI&name_1=Stateless%20tests%20%28amd_tsan%2C%20parallel%2C%202%2F2%29&name_1=Stateless%20tests%20%28amd_tsan%2C%20parallel%2C%202%2F2%29. [#95446](https://github.com/ClickHouse/ClickHouse/pull/95446) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix typo: synchronios -> synchronous. [#95493](https://github.com/ClickHouse/ClickHouse/pull/95493) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* When renaming and committing empty parts, retry if any part is temporarily locked. [#95495](https://github.com/ClickHouse/ClickHouse/pull/95495) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Revert "Merge pull request [#93542](https://github.com/ClickHouse/ClickHouse/issues/93542) from scanhex12/multistage_prewhere". [#95496](https://github.com/ClickHouse/ClickHouse/pull/95496) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* PR: adding parallel_replicas_filter_pushdown setting. [#95510](https://github.com/ClickHouse/ClickHouse/pull/95510) ([Igor Nikonov](https://github.com/devcrafter)).
* Mark task as done without parent ProcessList task. [#95535](https://github.com/ClickHouse/ClickHouse/pull/95535) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix inconsistent AST issue when a subquery is parsed partially. [#95547](https://github.com/ClickHouse/ClickHouse/pull/95547) ([Elmi Ahmadov](https://github.com/ahmadov)).
* Make tests green after successful rerun for LLVM coverage. [#95554](https://github.com/ClickHouse/ClickHouse/pull/95554) ([Alexey Bakharew](https://github.com/alexbakharew)).
* Show first error in CI build log instead of last lines. [#95560](https://github.com/ClickHouse/ClickHouse/pull/95560) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `std::length_error` when `max_query_size` is `UINT64_MAX`. [#95561](https://github.com/ClickHouse/ClickHouse/pull/95561) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix timeout hangs in `clickhouse-test` runner. [#95562](https://github.com/ClickHouse/ClickHouse/pull/95562) ([Max Kainov](https://github.com/maxknv)).
* Fix contention in CancellationChecker thread. [#95563](https://github.com/ClickHouse/ClickHouse/pull/95563) ([Sergei Trifonov](https://github.com/serxa)).
* Fix path traversal vulnerability in ATTACH PART FROM (unreleased). [#95568](https://github.com/ClickHouse/ClickHouse/pull/95568) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Integration tests: add tests for encrypted named collections. [#95576](https://github.com/ClickHouse/ClickHouse/pull/95576) ([Nikita Fomichev](https://github.com/fm4v)).
* Fix UBSan overflow in join order cardinality estimation. [#95580](https://github.com/ClickHouse/ClickHouse/pull/95580) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Update version_date.tsv and changelog after v26.1.1.912-stable. [#95587](https://github.com/ClickHouse/ClickHouse/pull/95587) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Changed docs for color functions. [#95611](https://github.com/ClickHouse/ClickHouse/pull/95611) ([Kirill Kopnev](https://github.com/Fgrtue)).
* Cleanup 03810_pr_aggr_in_order_read_mode. [#95623](https://github.com/ClickHouse/ClickHouse/pull/95623) ([Igor Nikonov](https://github.com/devcrafter)).
* Fix `03783_autopr_dataflow_cache_reuse*` tests. [#95665](https://github.com/ClickHouse/ClickHouse/pull/95665) ([Nikita Taranov](https://github.com/nickitat)).
* More precisely calculate rows to skip when the runtime filter is used concurrently. [#95671](https://github.com/ClickHouse/ClickHouse/pull/95671) ([Alexander Gololobov](https://github.com/davenger)).
* Fix bug where SELECT in parens was confused for column list in INSERT query. [#95672](https://github.com/ClickHouse/ClickHouse/pull/95672) ([George Larionov](https://github.com/george-larionov)).
* PromQL: rework converter to SQL. [#95673](https://github.com/ClickHouse/ClickHouse/pull/95673) ([Vitaly Baranov](https://github.com/vitlibar)).
* tests: disable 03820_plain_rewritable_over_another_disk_with_same_path for replicated database. [#95677](https://github.com/ClickHouse/ClickHouse/pull/95677) ([Azat Khuzhin](https://github.com/azat)).
* ci: add libc6-dbg into all CI images. [#95682](https://github.com/ClickHouse/ClickHouse/pull/95682) ([Azat Khuzhin](https://github.com/azat)).
* Log std::logic_error before abort(). [#95684](https://github.com/ClickHouse/ClickHouse/pull/95684) ([Azat Khuzhin](https://github.com/azat)).
* Reduce logs in InsertDependenciesBuilder. [#95731](https://github.com/ClickHouse/ClickHouse/pull/95731) ([Mikhail Artemenko](https://github.com/Michicosun)).
* ci: fix flakiness of hits loading. [#95735](https://github.com/ClickHouse/ClickHouse/pull/95735) ([Azat Khuzhin](https://github.com/azat)).
* Update librdkafka to fix lock-order-inversion in queue refcount. [#95740](https://github.com/ClickHouse/ClickHouse/pull/95740) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test 03812_join_order_ubsan_overflow.sql. [#95741](https://github.com/ClickHouse/ClickHouse/pull/95741) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix upgrade check failure due to missing auxiliary ZooKeeper config. [#95760](https://github.com/ClickHouse/ClickHouse/pull/95760) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix minor issue for LLVM Stateless Tests. [#95763](https://github.com/ClickHouse/ClickHouse/pull/95763) ([Alexey Bakharew](https://github.com/alexbakharew)).
* Update version_date.tsv and changelog after v25.10.6.36-stable. [#95764](https://github.com/ClickHouse/ClickHouse/pull/95764) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Add FilesystemCacheCheckCorrectnessMicroseconds. [#95767](https://github.com/ClickHouse/ClickHouse/pull/95767) ([Azat Khuzhin](https://github.com/azat)).
* Update StringZilla and add more implementations to memcpy-bench. [#95768](https://github.com/ClickHouse/ClickHouse/pull/95768) ([Raúl Marín](https://github.com/Algunenano)).
* Update version_date.tsv and changelog after v26.1.2.11-stable. [#95774](https://github.com/ClickHouse/ClickHouse/pull/95774) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* CI: Remove experimantal sync pre-hook. [#95782](https://github.com/ClickHouse/ClickHouse/pull/95782) ([Max Kainov](https://github.com/maxknv)).
* Update version_date.tsv and changelog after v25.8.16.34-lts. [#95783](https://github.com/ClickHouse/ClickHouse/pull/95783) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Update version_date.tsv and changelog after v25.3.14.14-lts. [#95800](https://github.com/ClickHouse/ClickHouse/pull/95800) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* CI: Miscellaneous. [#95810](https://github.com/ClickHouse/ClickHouse/pull/95810) ([Max Kainov](https://github.com/maxknv)).
* Update version_date.tsv and changelog after v25.12.5.44-stable. [#95812](https://github.com/ClickHouse/ClickHouse/pull/95812) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* More stable AutoPR tests. [#95819](https://github.com/ClickHouse/ClickHouse/pull/95819) ([Nikita Taranov](https://github.com/nickitat)).
* CI: Promote test failures to ERROR on server death. [#95827](https://github.com/ClickHouse/ClickHouse/pull/95827) ([Max Kainov](https://github.com/maxknv)).
* Increase skipped rows ratio in case of ineffective join runtime filter. [#95840](https://github.com/ClickHouse/ClickHouse/pull/95840) ([Hechem Selmi](https://github.com/m-selmi)).
* ci: fix old system log tables rotation in upgrade check. [#95843](https://github.com/ClickHouse/ClickHouse/pull/95843) ([Azat Khuzhin](https://github.com/azat)).
* Better fatal message for SIGABRT. [#95844](https://github.com/ClickHouse/ClickHouse/pull/95844) ([Azat Khuzhin](https://github.com/azat)).
* Fix assertion failure in `applyUncommittedState` for deltas without paths. [#95846](https://github.com/ClickHouse/ClickHouse/pull/95846) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Update some AWS modules. [#95853](https://github.com/ClickHouse/ClickHouse/pull/95853) ([Robert Schulze](https://github.com/rschu1ze)).
* Disable flaky test 02434_cancel_insert_when_client_dies for DatabaseReplicated. [#95854](https://github.com/ClickHouse/ClickHouse/pull/95854) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Miscellaneous. [#95855](https://github.com/ClickHouse/ClickHouse/pull/95855) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Remove garbage from distributed DDL. [#95863](https://github.com/ClickHouse/ClickHouse/pull/95863) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add ulimit to qemu tests. [#95864](https://github.com/ClickHouse/ClickHouse/pull/95864) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race condition in DatabaseReplicated::tryEnqueueReplicatedDDL. [#95865](https://github.com/ClickHouse/ClickHouse/pull/95865) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race condition in named collections background update thread. [#95868](https://github.com/ClickHouse/ClickHouse/pull/95868) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Fix chown. [#95878](https://github.com/ClickHouse/ClickHouse/pull/95878) ([Alexei Fedotov](https://github.com/leshikus)).
* Move official docker release to Fridays. [#95879](https://github.com/ClickHouse/ClickHouse/pull/95879) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* ci: run upgrade check only on release binary (fixes upgrade check). [#95884](https://github.com/ClickHouse/ClickHouse/pull/95884) ([Azat Khuzhin](https://github.com/azat)).
* Adjust assertion Aggregator::Params::makeRawKeyColumns for old analyzer. [#95900](https://github.com/ClickHouse/ClickHouse/pull/95900) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Add some logs to better track iceberg position deletes. [#95901](https://github.com/ClickHouse/ClickHouse/pull/95901) ([Daniil Ivanik](https://github.com/divanik)).
* Allow to enter PR number in the very first check_ci.py prompt. [#95902](https://github.com/ClickHouse/ClickHouse/pull/95902) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Forbid DETACH TEMPORARY TABLE. [#95905](https://github.com/ClickHouse/ClickHouse/pull/95905) ([Azat Khuzhin](https://github.com/azat)).
* Fix typo. [#95916](https://github.com/ClickHouse/ClickHouse/pull/95916) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix SEGV in `execute_query_fuzzer` due to a nullptr `TemporaryDataOnDiskScope`. [#95920](https://github.com/ClickHouse/ClickHouse/pull/95920) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Revert "Add default_dictionary_database setting for unqualified external dictionaries". [#95921](https://github.com/ClickHouse/ClickHouse/pull/95921) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* tests: fix 03621_pr_distributed_index_analysis flakiness. [#95927](https://github.com/ClickHouse/ClickHouse/pull/95927) ([Azat Khuzhin](https://github.com/azat)).
* Updated GitHub Action versions for multiple workflows to `v6` due to outdated versions. [#95928](https://github.com/ClickHouse/ClickHouse/pull/95928) ([Pádraic Slattery](https://github.com/pgoslatara)).
* Set supported clang versions to 21+. [#95929](https://github.com/ClickHouse/ClickHouse/pull/95929) ([Raúl Marín](https://github.com/Algunenano)).
* Update 03032_dynamically_resize_filesystem_cache_2.sh. [#95936](https://github.com/ClickHouse/ClickHouse/pull/95936) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Less LockMemoryExceptionInThread usage in non generic code. [#95941](https://github.com/ClickHouse/ClickHouse/pull/95941) ([Azat Khuzhin](https://github.com/azat)).
* Decrease check_cache_probability 10x (attempt to fix stateless flaky check). [#95946](https://github.com/ClickHouse/ClickHouse/pull/95946) ([Azat Khuzhin](https://github.com/azat)).
* Split test 03553_json_shared_data_advanced_serialization to make it faster. [#95953](https://github.com/ClickHouse/ClickHouse/pull/95953) ([Pavel Kruglov](https://github.com/Avogar)).
* CI: PoC for IaaS support in Praktika with MacOS smoke tests. [#95960](https://github.com/ClickHouse/ClickHouse/pull/95960) ([Max Kainov](https://github.com/maxknv)).
* Miscellaneous. [#95965](https://github.com/ClickHouse/ClickHouse/pull/95965) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Experiment: use azurite-rs instead of azurite for functional tests. [#95967](https://github.com/ClickHouse/ClickHouse/pull/95967) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Restore style check that prevented CI madness in integration tests. [#95975](https://github.com/ClickHouse/ClickHouse/pull/95975) ([Raúl Marín](https://github.com/Algunenano)).
* Fix sporadic test failures in `test_keeper_auth` with genuine ZooKeeper. [#95976](https://github.com/ClickHouse/ClickHouse/pull/95976) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Enable Azure functional tests in PR CI. [#95982](https://github.com/ClickHouse/ClickHouse/pull/95982) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Simplify dynamic dispatch: remove AVX512F and SSE4.2 variants. [#95986](https://github.com/ClickHouse/ClickHouse/pull/95986) ([Raúl Marín](https://github.com/Algunenano)).
* Fix libFuzzers. [#95987](https://github.com/ClickHouse/ClickHouse/pull/95987) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* Remove custom_type from ASTLiteral. [#95988](https://github.com/ClickHouse/ClickHouse/pull/95988) ([Raúl Marín](https://github.com/Algunenano)).
* Fix Not-ready Set exception in dry-run mode for IN function. [#95995](https://github.com/ClickHouse/ClickHouse/pull/95995) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix sporadic test failure in `03640_load_marks_synchronously`. [#95996](https://github.com/ClickHouse/ClickHouse/pull/95996) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix UBSan error in `largestTriangleThreeBuckets` with `Date32`. [#95997](https://github.com/ClickHouse/ClickHouse/pull/95997) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `test_send_table_status_sleep` in `test_hedged_requests`. [#96000](https://github.com/ClickHouse/ClickHouse/pull/96000) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix exception type when inserting invalid UTF-8 into PostgreSQL. [#96003](https://github.com/ClickHouse/ClickHouse/pull/96003) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add random query and client killer to stress tests. [#96004](https://github.com/ClickHouse/ClickHouse/pull/96004) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add macOS smoke test for native binary validation. [#96005](https://github.com/ClickHouse/ClickHouse/pull/96005) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error when fetched part has newer metadata version than table. [#96008](https://github.com/ClickHouse/ClickHouse/pull/96008) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a test for [#70015](https://github.com/ClickHouse/ClickHouse/issues/70015). [#96009](https://github.com/ClickHouse/ClickHouse/pull/96009) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add test for issue [#70016](https://github.com/ClickHouse/ClickHouse/issues/70016): `bitXor` with `if` mixing Int32 and UInt64. [#96014](https://github.com/ClickHouse/ClickHouse/pull/96014) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add test for inserting NULL into non-Nullable Enum with the default value being non-zero. [#96015](https://github.com/ClickHouse/ClickHouse/pull/96015) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix empty result column after evaluation of constant expression in table function `file`. [#96021](https://github.com/ClickHouse/ClickHouse/pull/96021) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix crash due to exception inside NOEXCEPT_SCOPE in Transaction::commit. [#96023](https://github.com/ClickHouse/ClickHouse/pull/96023) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add retry wrapper for write_deltalake in Delta Lake integration tests. [#96027](https://github.com/ClickHouse/ClickHouse/pull/96027) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Small updates for e2k arch, continue of https://github.com/clickhouse/clickhouse/pull/90159. [#96040](https://github.com/ClickHouse/ClickHouse/pull/96040) ([Ramil Sattarov](https://github.com/r-a-sattarov)).
* PR: cleanup blacklist tests. [#96049](https://github.com/ClickHouse/ClickHouse/pull/96049) ([Igor Nikonov](https://github.com/devcrafter)).
* Minor: Remove incorrect link from test. [#96050](https://github.com/ClickHouse/ClickHouse/pull/96050) ([Robert Schulze](https://github.com/rschu1ze)).
* Backported in [#98094](https://github.com/ClickHouse/ClickHouse/issues/98094): Enforce Keeper component name in code. [#96051](https://github.com/ClickHouse/ClickHouse/pull/96051) ([Antonio Andelic](https://github.com/antonio2368)).
* CI: Longer s3 retention for subset of clickhouse binaries on master branch. [#96056](https://github.com/ClickHouse/ClickHouse/pull/96056) ([Max Kainov](https://github.com/maxknv)).
* Allow empty order by keys in special MergeTree again. [#96058](https://github.com/ClickHouse/ClickHouse/pull/96058) ([Anton Popov](https://github.com/CurtizJ)).
* Update log message. [#96063](https://github.com/ClickHouse/ClickHouse/pull/96063) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Add new Keeper Feature Flags in testing. [#96067](https://github.com/ClickHouse/ClickHouse/pull/96067) ([Nikolay Degterinsky](https://github.com/evillique)).
* CI: Fix stress test log parser crash on unexpected log format. [#96069](https://github.com/ClickHouse/ClickHouse/pull/96069) ([Max Kainov](https://github.com/maxknv)).
* Code sync. [#96070](https://github.com/ClickHouse/ClickHouse/pull/96070) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Add reference to the docs in perf tests report. [#96071](https://github.com/ClickHouse/ClickHouse/pull/96071) ([Nikita Taranov](https://github.com/nickitat)).
* Add valid_until to `system.users` table. [#96072](https://github.com/ClickHouse/ClickHouse/pull/96072) ([Nikolay Degterinsky](https://github.com/evillique)).
* Sync from https://github.com/ClickHouse/clickhouse-private/pull/46883. [#96102](https://github.com/ClickHouse/ClickHouse/pull/96102) ([Han Fei](https://github.com/hanfei1991)).
* Use interruptible waits in DDL worker retry loops for faster shutdown. [#96104](https://github.com/ClickHouse/ClickHouse/pull/96104) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_server_overload` integration test. [#96106](https://github.com/ClickHouse/ClickHouse/pull/96106) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add retries with exponential backoff for GitHub API calls. [#96109](https://github.com/ClickHouse/ClickHouse/pull/96109) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix Decimal to Interval conversion: catch error at type resolution time. [#96111](https://github.com/ClickHouse/ClickHouse/pull/96111) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Build fast for llms to do my job faster. [#96114](https://github.com/ClickHouse/ClickHouse/pull/96114) ([Raúl Marín](https://github.com/Algunenano)).
* PR: test's blacklist cleanup. [#96116](https://github.com/ClickHouse/ClickHouse/pull/96116) ([Igor Nikonov](https://github.com/devcrafter)).
* Fix sporadic `PreconditionFailed` in `CREATE TABLE IF NOT EXISTS` for Iceberg. [#96121](https://github.com/ClickHouse/ClickHouse/pull/96121) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix assertion in `MergeTreePrefetchedReadPool::startPrefetches`. [#96123](https://github.com/ClickHouse/ClickHouse/pull/96123) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Increase `max_execution_time` for stateful data loading in TSan builds. [#96124](https://github.com/ClickHouse/ClickHouse/pull/96124) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error exception in `__getScalar` with non-constant argument. [#96140](https://github.com/ClickHouse/ClickHouse/pull/96140) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error in `arrayWithConstant` with `FixedString` argument. [#96141](https://github.com/ClickHouse/ClickHouse/pull/96141) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix SLRU file cache exception during dynamic resize. [#96142](https://github.com/ClickHouse/ClickHouse/pull/96142) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix ACME account key race condition in multi-node setup. [#96144](https://github.com/ClickHouse/ClickHouse/pull/96144) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `loop` table function inside `remote` causing logical error. [#96148](https://github.com/ClickHouse/ClickHouse/pull/96148) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race between INSERT and DROP_RANGE causing LOGICAL_ERROR in paranoid check of covered parts. [#96164](https://github.com/ClickHouse/ClickHouse/pull/96164) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix assertion failure in `calculateActionNodeName` for constant-folded `EXISTS`. [#96168](https://github.com/ClickHouse/ClickHouse/pull/96168) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test_s3_cluster_restart by relaxing DistributedConnectionFailTry assertions. [#96173](https://github.com/ClickHouse/ClickHouse/pull/96173) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Safely refuse connection after fatal error. [#96178](https://github.com/ClickHouse/ClickHouse/pull/96178) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Add more patches to LLVM. [#96192](https://github.com/ClickHouse/ClickHouse/pull/96192) ([Robert Schulze](https://github.com/rschu1ze)).
* Add missed `--external` argument in client help message. [#96197](https://github.com/ClickHouse/ClickHouse/pull/96197) ([Aleksandr Musorin](https://github.com/AVMusorin)).
* Add an option to avoid test retries. [#96224](https://github.com/ClickHouse/ClickHouse/pull/96224) ([Nikita Taranov](https://github.com/nickitat)).
* More includes and bad instantiations found when working on FunctionsConversion.h. [#96227](https://github.com/ClickHouse/ClickHouse/pull/96227) ([Raúl Marín](https://github.com/Algunenano)).
* Fix `03783_autopr_dataflow_cache_reuse_qcc` again. [#96231](https://github.com/ClickHouse/ClickHouse/pull/96231) ([Nikita Taranov](https://github.com/nickitat)).
* Make s3 session token test not flaky. [#96234](https://github.com/ClickHouse/ClickHouse/pull/96234) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Introduce a separate header for each ContainerWithMemoryTracking. [#96235](https://github.com/ClickHouse/ClickHouse/pull/96235) ([Nikita Taranov](https://github.com/nickitat)).
* Fix server crash on startup (in the Upgrade Check) related to transactions (experimental) when loading mutations with outdated TID. [#96238](https://github.com/ClickHouse/ClickHouse/pull/96238) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Stress tests: add hardenings: --replace-log-memory-with-mergetree and async_insert=1. [#96240](https://github.com/ClickHouse/ClickHouse/pull/96240) ([Nikita Fomichev](https://github.com/fm4v)).
* Fix block structure mismatch in lazy materialization with PREWHERE and parallel replicas. [#96250](https://github.com/ClickHouse/ClickHouse/pull/96250) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix sporadic MySQL 8 container startup failure in integration tests. [#96252](https://github.com/ClickHouse/ClickHouse/pull/96252) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Ignore `FORMAT Null` for explain queries. [#96253](https://github.com/ClickHouse/ClickHouse/pull/96253) ([Nikita Taranov](https://github.com/nickitat)).
* Fix heap-use-after-free in LogSource/StripeLogSource during concurrent DROP TABLE. [#96254](https://github.com/ClickHouse/ClickHouse/pull/96254) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race condition in BackgroundSchedulePool causing flaky test. [#96255](https://github.com/ClickHouse/ClickHouse/pull/96255) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix sporadic "cannot parse" failure in stress test log parser. [#96256](https://github.com/ClickHouse/ClickHouse/pull/96256) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* When loading statistics, we will read statistics files, and need to add `readlockparts` to avoid datarace. [#96257](https://github.com/ClickHouse/ClickHouse/pull/96257) ([Han Fei](https://github.com/hanfei1991)).
* Fix sporadic failure in mutations `parts_postpone_reasons` tests. [#96258](https://github.com/ClickHouse/ClickHouse/pull/96258) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `02992_all_columns_should_have_comment`: Move dictionary source tables from `system` to `default` database in the CI. [#96260](https://github.com/ClickHouse/ClickHouse/pull/96260) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `00177_memory_bound_merging`. [#96261](https://github.com/ClickHouse/ClickHouse/pull/96261) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add timeout to column convergence loop in `03144_parallel_alter_add_drop_column_zookeeper_on_steroids.sh`. [#96263](https://github.com/ClickHouse/ClickHouse/pull/96263) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add `mutations_sync = 2` to `00062_replicated_merge_tree_alter_zookeeper_long`. [#96264](https://github.com/ClickHouse/ClickHouse/pull/96264) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Set explicit `merge_max_block_size` in `03785_rebuild_projection_with_part_offset`. [#96265](https://github.com/ClickHouse/ClickHouse/pull/96265) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `01396_inactive_replica_cleanup_nodes_zookeeper`. [#96266](https://github.com/ClickHouse/ClickHouse/pull/96266) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `03562_parallel_replicas_remote_with_cluster`. [#96267](https://github.com/ClickHouse/ClickHouse/pull/96267) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `LOGICAL_ERROR` exception when `SYSTEM DROP REPLICA` receives empty ZKPATH. [#96268](https://github.com/ClickHouse/ClickHouse/pull/96268) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `test_send_data2` in `test_hedged_requests`. [#96269](https://github.com/ClickHouse/ClickHouse/pull/96269) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix TSan data race in WorkloadResourceManager deleteNode. [#96270](https://github.com/ClickHouse/ClickHouse/pull/96270) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_ttl_compatibility` in `test_ttl_replicated`. [#96271](https://github.com/ClickHouse/ClickHouse/pull/96271) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Increase startup timeout for Keeper HTTP control tests. [#96295](https://github.com/ClickHouse/ClickHouse/pull/96295) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `test_table_metadata_corruption` leaving dummy_node in bad state. [#96296](https://github.com/ClickHouse/ClickHouse/pull/96296) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix YTsaurus crash loop from non-idempotent admin user creation. [#96297](https://github.com/ClickHouse/ClickHouse/pull/96297) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Trying to fix flaky `test_backup_restore_s3`. [#96298](https://github.com/ClickHouse/ClickHouse/pull/96298) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_drop_database_replica` by handling async temp table drops. [#96299](https://github.com/ClickHouse/ClickHouse/pull/96299) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Skip `test_jemalloc_percpu_arena` when CPU online override is ineffective. [#96300](https://github.com/ClickHouse/ClickHouse/pull/96300) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Wait for Keeper to start after restart in `test_keeper_session_refuse_stale_server`. [#96301](https://github.com/ClickHouse/ClickHouse/pull/96301) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `test_restore_db_replica`: Wait for async recovery after `SYSTEM RESTORE DATABASE REPLICA`. [#96302](https://github.com/ClickHouse/ClickHouse/pull/96302) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Increase wait timeouts in `test_storage_s3_queue`. [#96303](https://github.com/ClickHouse/ClickHouse/pull/96303) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_filesystem_split_cache integration`. [#96304](https://github.com/ClickHouse/ClickHouse/pull/96304) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix sporadic timeout in `03634_autopr_*_bytes_estimation` tests. [#96306](https://github.com/ClickHouse/ClickHouse/pull/96306) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Reduce data volume in text index posting list compression test to fix MSan timeout. [#96307](https://github.com/ClickHouse/ClickHouse/pull/96307) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Ignore `KEEPER_EXCEPTION` in stress test smoke check. [#96308](https://github.com/ClickHouse/ClickHouse/pull/96308) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error in `buildQueryTreeForShard` with ARRAY JOIN and GLOBAL JOIN. [#96310](https://github.com/ClickHouse/ClickHouse/pull/96310) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error when window function is constant-folded in GROUP BY key for distributed queries. [#96317](https://github.com/ClickHouse/ClickHouse/pull/96317) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix signed integer overflow in Parquet writer for DateTime64. [#96318](https://github.com/ClickHouse/ClickHouse/pull/96318) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `03211_nested_json_merges` timeout with randomized `index_granularity`. [#96319](https://github.com/ClickHouse/ClickHouse/pull/96319) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03629_create_or_replace_as_select_with_progress_tcp`. [#96320](https://github.com/ClickHouse/ClickHouse/pull/96320) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix UBSan: calling `.front()` on empty vector in `tryRerangeRightTableData`. [#96321](https://github.com/ClickHouse/ClickHouse/pull/96321) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Closes [#95291](https://github.com/ClickHouse/ClickHouse/issues/95291). [#96331](https://github.com/ClickHouse/ClickHouse/pull/96331) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* CI: HTML Report: update colours and fonts. [#96333](https://github.com/ClickHouse/ClickHouse/pull/96333) ([Max Kainov](https://github.com/maxknv)).
* Increase disconnection timeout in short disconnection backup/restore tests. [#96339](https://github.com/ClickHouse/ClickHouse/pull/96339) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix stress test failure caused by empty Azure connection string. [#96341](https://github.com/ClickHouse/ClickHouse/pull/96341) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix stress test script crash on `subprocess.TimeoutExpired`. [#96342](https://github.com/ClickHouse/ClickHouse/pull/96342) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add test for row policy with GROUP BY on partition column. [#96343](https://github.com/ClickHouse/ClickHouse/pull/96343) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add test for ARRAY JOIN with IN on bloom_filter indexed column. [#96344](https://github.com/ClickHouse/ClickHouse/pull/96344) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add test for wrong column resolution in multi-table JOIN. [#96345](https://github.com/ClickHouse/ClickHouse/pull/96345) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `Mergeable Check` falsely failing for `no_aws` jobs like macOS smoke test. [#96346](https://github.com/ClickHouse/ClickHouse/pull/96346) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add regression test for dictionary + CASE predicate pushdown on distributed tables. [#96347](https://github.com/ClickHouse/ClickHouse/pull/96347) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add regression test for hive partitioning with Date type in path. [#96348](https://github.com/ClickHouse/ClickHouse/pull/96348) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add regression test for lazy materialization with ReplacingMergeTree. [#96349](https://github.com/ClickHouse/ClickHouse/pull/96349) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add regression test for `SELECT * REPLACE` with WHERE on same column. [#96350](https://github.com/ClickHouse/ClickHouse/pull/96350) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add test for distributed query with IN in SELECT clause. [#96352](https://github.com/ClickHouse/ClickHouse/pull/96352) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add test for GROUP BY with LowCardinality and parallel_hash join. [#96353](https://github.com/ClickHouse/ClickHouse/pull/96353) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add test for UNION ALL with remote and predicate pushdown. [#96354](https://github.com/ClickHouse/ClickHouse/pull/96354) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add test for skip index `set` with NULL values. [#96355](https://github.com/ClickHouse/ClickHouse/pull/96355) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Filter out minio log queries from the hung check in Stress test. [#96356](https://github.com/ClickHouse/ClickHouse/pull/96356) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `01414_freeze_does_not_prevent_alters`. [#96357](https://github.com/ClickHouse/ClickHouse/pull/96357) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race between `setDeduplicationWindowSize` and `shutdown` in `MergeTreeDeduplicationLog`. [#96359](https://github.com/ClickHouse/ClickHouse/pull/96359) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `01111_create_drop_replicated_db_stress`. [#96360](https://github.com/ClickHouse/ClickHouse/pull/96360) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `test_distributed_respect_user_timeouts`. [#96361](https://github.com/ClickHouse/ClickHouse/pull/96361) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03032_dynamically_resize_filesystem_cache_2`. [#96362](https://github.com/ClickHouse/ClickHouse/pull/96362) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* An attempt to fix test `00992`. [#96364](https://github.com/ClickHouse/ClickHouse/pull/96364) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `03514_grace_hash_join_logical_error` timeout on TSan + S3. [#96365](https://github.com/ClickHouse/ClickHouse/pull/96365) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_ordered_mode_with_hive` integration test. [#96366](https://github.com/ClickHouse/ClickHouse/pull/96366) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix timeout in test `03144_parallel_alter_add_drop_column_zookeeper_on_steroids`. [#96367](https://github.com/ClickHouse/ClickHouse/pull/96367) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Ignore `NO_SUCH_INTERSERVER_IO_ENDPOINT` in upgrade check. [#96368](https://github.com/ClickHouse/ClickHouse/pull/96368) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix type conversion for right-side USING columns in legacy filled join path. [#96369](https://github.com/ClickHouse/ClickHouse/pull/96369) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race condition in `PeriodicLog` between background thread and `SYSTEM FLUSH LOGS`. [#96371](https://github.com/ClickHouse/ClickHouse/pull/96371) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix exception "Not-ready Set" when `LimitTransform` with `always_read_till_end` continues reading after pipeline shutdown. [#96373](https://github.com/ClickHouse/ClickHouse/pull/96373) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix libFuzzer timeouts that block nightly fuzzing. [#96374](https://github.com/ClickHouse/ClickHouse/pull/96374) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix LOGICAL_ERROR in `TemporaryParts::add` during mutation checksum mismatch fallback. [#96376](https://github.com/ClickHouse/ClickHouse/pull/96376) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Test full join paste join swap. [#96377](https://github.com/ClickHouse/ClickHouse/pull/96377) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix data race in `Context::getAccess` on `need_recalculate_access`. [#96378](https://github.com/ClickHouse/ClickHouse/pull/96378) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix sporadic test failure in `test_validate_only_initial_alter_query` with Replicated database. [#96379](https://github.com/ClickHouse/ClickHouse/pull/96379) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix timeout of `03096_text_log_format_string_args_not_empty` under TSan. [#96380](https://github.com/ClickHouse/ClickHouse/pull/96380) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Skip projections with broken dependencies on dictionaries during FORCE_ATTACH instead of failing to start. [#96381](https://github.com/ClickHouse/ClickHouse/pull/96381) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add `no-async-insert` tag to `01079_parallel_alter_modify_zookeeper_long`. [#96382](https://github.com/ClickHouse/ClickHouse/pull/96382) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `03047_on_fly_mutations_prewhere` timeout under TSan. [#96383](https://github.com/ClickHouse/ClickHouse/pull/96383) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix lazy-seek bounds in `CompressedReadBufferFromFile::readBig`. [#96384](https://github.com/ClickHouse/ClickHouse/pull/96384) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error when selecting ephemeral virtual column `_table` with old analyzer. [#96397](https://github.com/ClickHouse/ClickHouse/pull/96397) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Reduce row count in `02943_variant_read_subcolumns` to fix MSan timeout. [#96406](https://github.com/ClickHouse/ClickHouse/pull/96406) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Reduce load of `03532_crash_in_aggregation_because_of_lost_exception` test. [#96408](https://github.com/ClickHouse/ClickHouse/pull/96408) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix misleading error in CI when S3 credentials are missing. [#96409](https://github.com/ClickHouse/ClickHouse/pull/96409) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix exception in `CancellationChecker` crashing server in BackgroundSchedulePool. [#96412](https://github.com/ClickHouse/ClickHouse/pull/96412) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error when reading subcolumns of EPHEMERAL columns from `StorageLog`. [#96413](https://github.com/ClickHouse/ClickHouse/pull/96413) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `03100_lwu_42_bytes_limits` test. [#96414](https://github.com/ClickHouse/ClickHouse/pull/96414) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error when using a `set` index over `Dynamic` type. [#96416](https://github.com/ClickHouse/ClickHouse/pull/96416) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Refactor: extract BackupMetadataFinder from RestorerFromBackup. [#96417](https://github.com/ClickHouse/ClickHouse/pull/96417) ([Julia Kartseva](https://github.com/jkartseva)).
* Fix flaky `test_ttl_compatibility` by avoiding midnight partition split. [#96418](https://github.com/ClickHouse/ClickHouse/pull/96418) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix strange code in InterpreterCreateQuery. [#96419](https://github.com/ClickHouse/ClickHouse/pull/96419) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add semicolons to fuzzer reproduce commands. [#96421](https://github.com/ClickHouse/ClickHouse/pull/96421) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* IO: fix `ReadBufferFromEncryptedFile` seek state and add postcondition `chassert`s. [#96422](https://github.com/ClickHouse/ClickHouse/pull/96422) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add `chassert` assertions to encrypted file reading path (2). [#96423](https://github.com/ClickHouse/ClickHouse/pull/96423) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error in tuple comparison with `group_by_use_nulls` and ROLLUP/CUBE. [#96426](https://github.com/ClickHouse/ClickHouse/pull/96426) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* More targeted tests for Encrypted over Cache over S3. [#96427](https://github.com/ClickHouse/ClickHouse/pull/96427) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix stress test log parser failing with "Parse failure error". [#96428](https://github.com/ClickHouse/ClickHouse/pull/96428) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* `DROP * CACHE` --> `CLEAR * CACHE`. [#96430](https://github.com/ClickHouse/ClickHouse/pull/96430) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix exception in `DistanceTransposedPartialReadsPass` with NULL arguments. [#96431](https://github.com/ClickHouse/ClickHouse/pull/96431) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix reproducer for [#96363](https://github.com/ClickHouse/ClickHouse/issues/96363). [#96435](https://github.com/ClickHouse/ClickHouse/pull/96435) ([Raúl Marín](https://github.com/Algunenano)).
* Sync. [#96438](https://github.com/ClickHouse/ClickHouse/pull/96438) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Fix integration test failures in flaky check. [#96440](https://github.com/ClickHouse/ClickHouse/pull/96440) ([Robert Schulze](https://github.com/rschu1ze)).
* Follow up for https://github.com/ClickHouse/ClickHouse/pull/96070/. [#96441](https://github.com/ClickHouse/ClickHouse/pull/96441) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Use cache layer as disk name. [#96444](https://github.com/ClickHouse/ClickHouse/pull/96444) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Fully clear removed blobs queue on shutdown. [#96447](https://github.com/ClickHouse/ClickHouse/pull/96447) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Add TSA annotations to PeriodicLog. [#96454](https://github.com/ClickHouse/ClickHouse/pull/96454) ([Pablo Marcos](https://github.com/pamarcos)).
* Remove dead code in ConcurrentHashJoin. [#96456](https://github.com/ClickHouse/ClickHouse/pull/96456) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Fix timeout in `03002_filter_skip_virtual_columns_with_non_deterministic_functions` under TSan. [#96457](https://github.com/ClickHouse/ClickHouse/pull/96457) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Check output for tests with "correlated_subqueries_use_in_memory_buffer" option. [#96470](https://github.com/ClickHouse/ClickHouse/pull/96470) ([Alexey Bakharew](https://github.com/alexbakharew)).
* Fix Keeper HTTP control port startup timeout on follower nodes. [#96474](https://github.com/ClickHouse/ClickHouse/pull/96474) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix invalid assert in SessionLogElement::appendToBlock. [#96480](https://github.com/ClickHouse/ClickHouse/pull/96480) ([Raúl Marín](https://github.com/Algunenano)).
* Add hourly workflow to retry PR CI runs failed due to infrastructure errors. [#96481](https://github.com/ClickHouse/ClickHouse/pull/96481) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Reduce data volumes in IO-heavy stateless tests. [#96482](https://github.com/ClickHouse/ClickHouse/pull/96482) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Rerun failed CI jobs on infrastructure failures: Also treat `Config Workflow` failures as infrastructure; add run links to log. [#96485](https://github.com/ClickHouse/ClickHouse/pull/96485) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `test_git_import` timeout by adding per-attempt clone timeout and early return. [#96488](https://github.com/ClickHouse/ClickHouse/pull/96488) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Use containers with memory tracking for dictionaries. [#96489](https://github.com/ClickHouse/ClickHouse/pull/96489) ([Nikita Taranov](https://github.com/nickitat)).
* Fix flaky ACME TLS integration tests on ARM. [#96490](https://github.com/ClickHouse/ClickHouse/pull/96490) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race between temporary part cleanup and `ReplicatedMergeTreeCleanupThread`. [#96492](https://github.com/ClickHouse/ClickHouse/pull/96492) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Reread EC2 instance metadata from host. [#96493](https://github.com/ClickHouse/ClickHouse/pull/96493) ([Max Kainov](https://github.com/maxknv)).
* Maybe fix flaky `test_fix_metadata_version_on_attach_part_after_restore`. [#96499](https://github.com/ClickHouse/ClickHouse/pull/96499) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* update SystemLog.cpp. [#96505](https://github.com/ClickHouse/ClickHouse/pull/96505) ([Bharat Nallan](https://github.com/bharatnc)).
* Fix flaky test_filesystem_split_cache boundary condition. [#96508](https://github.com/ClickHouse/ClickHouse/pull/96508) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add stateless test instruction. [#96511](https://github.com/ClickHouse/ClickHouse/pull/96511) ([Alexei Fedotov](https://github.com/leshikus)).
* CI: Improve cherry-pick PR assignment and lifecycle management. [#96523](https://github.com/ClickHouse/ClickHouse/pull/96523) ([Max Kainov](https://github.com/maxknv)).
* Update submodule `arrow` from version `16.1.0` to version `23.0.0` Update submodule `flatbuffer` from version `23.5.26` to version `24.3.6`. [#96545](https://github.com/ClickHouse/ClickHouse/pull/96545) ([Vitaly Baranov](https://github.com/vitlibar)).
* Update delta-kernel to v0.19.2. [#96546](https://github.com/ClickHouse/ClickHouse/pull/96546) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Set `MALLOC_MIN_ALIGNMENT` to the value from standard library. [#96547](https://github.com/ClickHouse/ClickHouse/pull/96547) ([Nikita Taranov](https://github.com/nickitat)).
* CI: flush aggregated_zookeeper_log. [#96565](https://github.com/ClickHouse/ClickHouse/pull/96565) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Fuzz updates. [#96566](https://github.com/ClickHouse/ClickHouse/pull/96566) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Syncronize critical files. [#96570](https://github.com/ClickHouse/ClickHouse/pull/96570) ([Daniil Ivanik](https://github.com/divanik)).
* Extend tests for min/max_insert_block_size_bytes/rows settings. [#96572](https://github.com/ClickHouse/ClickHouse/pull/96572) ([Alexey Bakharew](https://github.com/alexbakharew)).
* Fix flaky `test_interactive_totp_authentication`. [#96576](https://github.com/ClickHouse/ClickHouse/pull/96576) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `02916_glogal_in_cancel` under TSan. [#96579](https://github.com/ClickHouse/ClickHouse/pull/96579) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add regression tests for `adjustLastGranule` with constant PREWHERE and patches. [#96582](https://github.com/ClickHouse/ClickHouse/pull/96582) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_database_delta` by fixing Derby metastore lock cleanup. [#96585](https://github.com/ClickHouse/ClickHouse/pull/96585) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Integration tests: add tests for encrypted named collections. [#96586](https://github.com/ClickHouse/ClickHouse/pull/96586) ([Nikita Fomichev](https://github.com/fm4v)).
* Polish MergeTree settings for distributed index analysis. [#96587](https://github.com/ClickHouse/ClickHouse/pull/96587) ([Azat Khuzhin](https://github.com/azat)).
* Stress tests: ignore error in initial check. [#96591](https://github.com/ClickHouse/ClickHouse/pull/96591) ([Nikita Fomichev](https://github.com/fm4v)).
* Fix `prlimit` memory limit for `qemu-x86_64-static` in tests. [#96592](https://github.com/ClickHouse/ClickHouse/pull/96592) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix timeout of `03822_variant_distinct_filter` in debug builds. [#96610](https://github.com/ClickHouse/ClickHouse/pull/96610) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Reduce excessive debug logging in skip indices and statistics serialization. [#96611](https://github.com/ClickHouse/ClickHouse/pull/96611) ([Raúl Marín](https://github.com/Algunenano)).
* Fix LOGICAL_ERROR exception in `CollectSourceColumnsVisitor` when JOIN USING resolves from projection alias. [#96613](https://github.com/ClickHouse/ClickHouse/pull/96613) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix infinite retry loop in `doRestartReplica` that kills the server. [#96616](https://github.com/ClickHouse/ClickHouse/pull/96616) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add retry logic for HTTP 503 errors when fetching PR diff. [#96617](https://github.com/ClickHouse/ClickHouse/pull/96617) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error in `HashJoin::getTotalRowCount` for cross join with no right-side columns. [#96621](https://github.com/ClickHouse/ClickHouse/pull/96621) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_write_failover` in `test_merge_tree_s3_failover`. [#96634](https://github.com/ClickHouse/ClickHouse/pull/96634) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix intersecting parts on disk from rolled-back merge transactions. [#96635](https://github.com/ClickHouse/ClickHouse/pull/96635) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `03593_backup_with_broken_projection`. [#96637](https://github.com/ClickHouse/ClickHouse/pull/96637) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add more checks to macOS smoke test. [#96638](https://github.com/ClickHouse/ClickHouse/pull/96638) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Disable `02908_table_ttl_dependency` in replicated databases. [#96640](https://github.com/ClickHouse/ClickHouse/pull/96640) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky timeout in 02932_refreshable_materialized_views_2. [#96641](https://github.com/ClickHouse/ClickHouse/pull/96641) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `00601_kill_running_query` test. [#96643](https://github.com/ClickHouse/ClickHouse/pull/96643) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `01079_parallel_alter_detach_table_zookeeper` test. [#96644](https://github.com/ClickHouse/ClickHouse/pull/96644) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Migrate praktika S3 versioned uploads from AWS CLI to boto3 with metadata. [#96652](https://github.com/ClickHouse/ClickHouse/pull/96652) ([Max Kainov](https://github.com/maxknv)).
* Use QueryPlanStepPtr consistently. [#96659](https://github.com/ClickHouse/ClickHouse/pull/96659) ([Alexander Gololobov](https://github.com/davenger)).
* Int32 -> Int64 to prevent overflow in statistics and total rows count in iceberg writes. [#96666](https://github.com/ClickHouse/ClickHouse/pull/96666) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix flaky 01675_distributed_bytes_to_delay_insert under MSan. [#96673](https://github.com/ClickHouse/ClickHouse/pull/96673) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Small fuzzer improvements. [#96674](https://github.com/ClickHouse/ClickHouse/pull/96674) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Fix `00992_system_parts_race_condition_zookeeper_long`: Fix `NO_SUCH_COLUMN_IN_TABLE` exception during merge after column drop. [#96675](https://github.com/ClickHouse/ClickHouse/pull/96675) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test_keeper_http_control_readiness integration test. [#96676](https://github.com/ClickHouse/ClickHouse/pull/96676) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Allow alias in MODIFY ORDER BY to fix AST Inconsistency. [#96679](https://github.com/ClickHouse/ClickHouse/pull/96679) ([George Larionov](https://github.com/george-larionov)).
* Fix flaky timeout in test `03144_parallel_alter_add_drop_column_zookeeper_on_steroids`. [#96683](https://github.com/ClickHouse/ClickHouse/pull/96683) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Stoi -> stoll in iceberg writes for proper count stats. [#96684](https://github.com/ClickHouse/ClickHouse/pull/96684) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix pytest exit code handling in CI for targeted/flaky jobs. [#96685](https://github.com/ClickHouse/ClickHouse/pull/96685) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Skip qemu-based tests under LLVM coverage builds. [#96696](https://github.com/ClickHouse/ClickHouse/pull/96696) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix timeout in 00974_text_log_table_not_empty test. [#96700](https://github.com/ClickHouse/ClickHouse/pull/96700) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix TSan data race on fault_probability in MemoryTracker. [#96701](https://github.com/ClickHouse/ClickHouse/pull/96701) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race between async outdated parts loading and paranoid check on startup. [#96705](https://github.com/ClickHouse/ClickHouse/pull/96705) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky tests 03652_memory_usage_headers and 03760_keep_alive_insert_select. [#96707](https://github.com/ClickHouse/ClickHouse/pull/96707) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Update README.md. [#96709](https://github.com/ClickHouse/ClickHouse/pull/96709) ([Zoe Steinkamp](https://github.com/zoesteinkamp)).
* Fix test_ttl_compatibility timeout in ASan builds. [#96714](https://github.com/ClickHouse/ClickHouse/pull/96714) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test 02572_materialized_views_ignore_errors. [#96715](https://github.com/ClickHouse/ClickHouse/pull/96715) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test_write_failover in test_merge_tree_s3_failover. [#96716](https://github.com/ClickHouse/ClickHouse/pull/96716) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Do not auto-remove pr-performance label when changelog category differs. [#96717](https://github.com/ClickHouse/ClickHouse/pull/96717) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix DatabaseReplicated metadata digest mismatch during SYSTEM RESTART REPLICA. [#96718](https://github.com/ClickHouse/ClickHouse/pull/96718) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix compile_commands.json path and broken find pipe in prepare-time-trace.sh. [#96719](https://github.com/ClickHouse/ClickHouse/pull/96719) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test 03411_dynamic_resize_filesystem_cache_3. [#96722](https://github.com/ClickHouse/ClickHouse/pull/96722) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Make coordinated merges GA. [#96728](https://github.com/ClickHouse/ClickHouse/pull/96728) ([Mikhail Artemenko](https://github.com/Michicosun)).
* PromQL: support literals. [#96739](https://github.com/ClickHouse/ClickHouse/pull/96739) ([Vitaly Baranov](https://github.com/vitlibar)).
* Move iceberg inserts into beta. [#96740](https://github.com/ClickHouse/ClickHouse/pull/96740) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* PromQL: implement dropping metric name. [#96741](https://github.com/ClickHouse/ClickHouse/pull/96741) ([Vitaly Baranov](https://github.com/vitlibar)).
* CI: Add a job list in praktika cli help output. [#96744](https://github.com/ClickHouse/ClickHouse/pull/96744) ([Alexei Fedotov](https://github.com/leshikus)).
* Upgrade check: filter error log messages. [#96747](https://github.com/ClickHouse/ClickHouse/pull/96747) ([Nikita Fomichev](https://github.com/fm4v)).
* Next fuzzer update. [#96750](https://github.com/ClickHouse/ClickHouse/pull/96750) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Adjust a few test to run with add_minmax_index_for_numeric_columns enabled. [#96757](https://github.com/ClickHouse/ClickHouse/pull/96757) ([Raúl Marín](https://github.com/Algunenano)).
* Fix stress test failure caused by partial DROP DATABASE with ignore_drop_queries_probability. [#96758](https://github.com/ClickHouse/ClickHouse/pull/96758) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix 00974_text_log_table_not_empty timeout under TSan. [#96759](https://github.com/ClickHouse/ClickHouse/pull/96759) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add .info file to each LLVM Merge job. [#96788](https://github.com/ClickHouse/ClickHouse/pull/96788) ([Alexey Bakharew](https://github.com/alexbakharew)).
* Make test_vertical_merges_from_compact_parts repeatable. [#96789](https://github.com/ClickHouse/ClickHouse/pull/96789) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Enable macos job in MasterCI. [#96792](https://github.com/ClickHouse/ClickHouse/pull/96792) ([Max Kainov](https://github.com/maxknv)).
* CI: Reverts macos job on gh hosted runner. [#96793](https://github.com/ClickHouse/ClickHouse/pull/96793) ([Max Kainov](https://github.com/maxknv)).
* Revert "Merge pull request [#89750](https://github.com/ClickHouse/ClickHouse/issues/89750) - parquet_footer_cache". [#96795](https://github.com/ClickHouse/ClickHouse/pull/96795) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Update README.md Bangalore and Tokyo Meetups. [#96796](https://github.com/ClickHouse/ClickHouse/pull/96796) ([Cheryl Tuquib](https://github.com/chetuquib)).
* Wrap complex tuple expressions with indexes in parentheses. [#96799](https://github.com/ClickHouse/ClickHouse/pull/96799) ([George Larionov](https://github.com/george-larionov)).
* Fix CI. [#96804](https://github.com/ClickHouse/ClickHouse/pull/96804) ([Raúl Marín](https://github.com/Algunenano)).
* Replace [ERROR] with ERROR:. [#96808](https://github.com/ClickHouse/ClickHouse/pull/96808) ([Alexei Fedotov](https://github.com/leshikus)).
* Fix local run for stateless tests. [#96815](https://github.com/ClickHouse/ClickHouse/pull/96815) ([Alexei Fedotov](https://github.com/leshikus)).
* Reduce `Attribute` size for a couple of dictionary types. [#96817](https://github.com/ClickHouse/ClickHouse/pull/96817) ([Nikita Taranov](https://github.com/nickitat)).
* Mute some disks background tasks logs. [#96820](https://github.com/ClickHouse/ClickHouse/pull/96820) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Improve ThreadPool exception message for CANNOT_SCHEDULE_TASK. [#96833](https://github.com/ClickHouse/ClickHouse/pull/96833) ([Sergei Trifonov](https://github.com/serxa)).
* Reintroduce 96547. [#96837](https://github.com/ClickHouse/ClickHouse/pull/96837) ([Nikita Taranov](https://github.com/nickitat)).
* Fix flaky test_short_disconnection backup/restore tests. [#96838](https://github.com/ClickHouse/ClickHouse/pull/96838) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Skip flaky test `00180_no_seek_avoiding_when_reading_from_cache` on ASan builds due to timeouts. [#96839](https://github.com/ClickHouse/ClickHouse/pull/96839) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Make targeted check timeouts the same as regular jobs. [#96843](https://github.com/ClickHouse/ClickHouse/pull/96843) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Restore stateful test.hits query for zero-rows regression test. [#96846](https://github.com/ClickHouse/ClickHouse/pull/96846) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add test for text index. [#96857](https://github.com/ClickHouse/ClickHouse/pull/96857) ([Anton Popov](https://github.com/CurtizJ)).
* Increase stress/fuzzer runtime for feature/improvement/performance PRs. [#96859](https://github.com/ClickHouse/ClickHouse/pull/96859) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `assertHasValidVersionMetadata` exception during `ATTACH TABLE AS REPLICATED`. [#96863](https://github.com/ClickHouse/ClickHouse/pull/96863) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Expand flaky check to all build types and respect test tags. [#96865](https://github.com/ClickHouse/ClickHouse/pull/96865) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix fatal exception in loadDataPart for parts with outdated TIDs. [#96866](https://github.com/ClickHouse/ClickHouse/pull/96866) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Test bugfix validation against multiple build types. [#96868](https://github.com/ClickHouse/ClickHouse/pull/96868) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Not for changelog. [#96870](https://github.com/ClickHouse/ClickHouse/pull/96870) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Disable 03100_lwu_30_join_cache test under UBSan. [#96887](https://github.com/ClickHouse/ClickHouse/pull/96887) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `01079_parallel_alter_detach_table_zookeeper`. [#96888](https://github.com/ClickHouse/ClickHouse/pull/96888) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix OpenSSL provider cleanup not running in release builds. [#96889](https://github.com/ClickHouse/ClickHouse/pull/96889) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test 02572_materialized_views_ignore_errors. [#96891](https://github.com/ClickHouse/ClickHouse/pull/96891) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test_database_delta::test_complex_table_schema timeout. [#96893](https://github.com/ClickHouse/ClickHouse/pull/96893) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Fix unstable config_digest causing cache invalidation. [#96895](https://github.com/ClickHouse/ClickHouse/pull/96895) ([Max Kainov](https://github.com/maxknv)).
* Cleanup parallel replicas test blacklist. [#96911](https://github.com/ClickHouse/ClickHouse/pull/96911) ([Igor Nikonov](https://github.com/devcrafter)).
* Minor perf improvement in partial_merge_join. [#96922](https://github.com/ClickHouse/ClickHouse/pull/96922) ([Artem Zuikov](https://github.com/4ertus2)).
* Fix false positive chassert in S3Queue finalizeProcessed. [#96926](https://github.com/ClickHouse/ClickHouse/pull/96926) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix clickhouse-test hanging for hours after server death. [#96929](https://github.com/ClickHouse/ClickHouse/pull/96929) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03249_dynamic_alter_consistency` timeout on MSan. [#96930](https://github.com/ClickHouse/ClickHouse/pull/96930) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix upgrade check false positive from kill_mutation test. [#96941](https://github.com/ClickHouse/ClickHouse/pull/96941) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix sporadic ZooKeeper startup hang in integration tests. [#96942](https://github.com/ClickHouse/ClickHouse/pull/96942) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add no-parallel tag to 03912_encrypted_s3_cache_smoke. [#96944](https://github.com/ClickHouse/ClickHouse/pull/96944) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Suppress expected errors in stdout for race condition tests. [#96945](https://github.com/ClickHouse/ClickHouse/pull/96945) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add style check: tests with SYSTEM DROP must have no-parallel. [#96946](https://github.com/ClickHouse/ClickHouse/pull/96946) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix hung check in stress test caused by synchronous DELETE on system.session_log. [#96947](https://github.com/ClickHouse/ClickHouse/pull/96947) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Enable positional arguments for projections in upgrade check. [#96948](https://github.com/ClickHouse/ClickHouse/pull/96948) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test 03401_normal_projection_with_part_offset timeout under MSan. [#96949](https://github.com/ClickHouse/ClickHouse/pull/96949) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03702_alter_column_update_and_delete_with_secondary_index_drop`. [#96950](https://github.com/ClickHouse/ClickHouse/pull/96950) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `02421_truncate_isolation_no_merges`. [#96951](https://github.com/ClickHouse/ClickHouse/pull/96951) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03100_lwu_27_update_after_on_fly_mutations`. [#96952](https://github.com/ClickHouse/ClickHouse/pull/96952) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Drain remaining pipe data in SSH handler before closing channel. [#96956](https://github.com/ClickHouse/ClickHouse/pull/96956) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky tests: curl + SYSTEM FLUSH LOGS race condition. [#96957](https://github.com/ClickHouse/ClickHouse/pull/96957) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race between async insert completion and query_log entry. [#96958](https://github.com/ClickHouse/ClickHouse/pull/96958) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test_system_backups integration test. [#96959](https://github.com/ClickHouse/ClickHouse/pull/96959) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix TSan data race in UnifiedSchedulerNode::removeChild. [#96960](https://github.com/ClickHouse/ClickHouse/pull/96960) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race condition in KeeperClient.execute_query causing flaky test hangs. [#96963](https://github.com/ClickHouse/ClickHouse/pull/96963) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test 03221_merge_profile_events. [#96964](https://github.com/ClickHouse/ClickHouse/pull/96964) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix table drop getting permanently stuck with zero-copy replication. [#96965](https://github.com/ClickHouse/ClickHouse/pull/96965) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `01062_pm_all_join_with_block_continuation`. [#96967](https://github.com/ClickHouse/ClickHouse/pull/96967) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix broken check_callback in test_restore_db_replica. [#96968](https://github.com/ClickHouse/ClickHouse/pull/96968) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test test_async_connect_to_multiple_ips. [#96969](https://github.com/ClickHouse/ClickHouse/pull/96969) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `00365_statistics_in_formats` with parallel replicas. [#96970](https://github.com/ClickHouse/ClickHouse/pull/96970) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky timeout in 00534_functions_bad_arguments tests. [#96971](https://github.com/ClickHouse/ClickHouse/pull/96971) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `02883_zookeeper_finalize_stress`. [#96973](https://github.com/ClickHouse/ClickHouse/pull/96973) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add integration test for GCP OAuth authentication with `gcp_oauth` HTTP client. [#96975](https://github.com/ClickHouse/ClickHouse/pull/96975) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `00092_union_race_conditions_3` timeout. [#96976](https://github.com/ClickHouse/ClickHouse/pull/96976) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add missing stateless tests from private repository. [#96977](https://github.com/ClickHouse/ClickHouse/pull/96977) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix UBSan: negation of signed INT_MIN before cast to unsigned. [#96979](https://github.com/ClickHouse/ClickHouse/pull/96979) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test 03716_mutations_parts_postpone_reasons_rmt. [#96981](https://github.com/ClickHouse/ClickHouse/pull/96981) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_interactive_totp_authentication` integration test under ASan. [#96983](https://github.com/ClickHouse/ClickHouse/pull/96983) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test test_kill_while_insert. [#96984](https://github.com/ClickHouse/ClickHouse/pull/96984) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `02448_clone_replica_lost_part`. [#96986](https://github.com/ClickHouse/ClickHouse/pull/96986) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `01676_clickhouse_client_autocomplete`. [#96987](https://github.com/ClickHouse/ClickHouse/pull/96987) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix transient minio startup timeout in CI. [#96993](https://github.com/ClickHouse/ClickHouse/pull/96993) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky timeout in 02275_full_sort_join_long test. [#96994](https://github.com/ClickHouse/ClickHouse/pull/96994) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Cancel write buffers in IcebergStorageSink on exception. [#96998](https://github.com/ClickHouse/ClickHouse/pull/96998) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Set CLICKHOUSE_CLIENT_SERVER_LOGS_LEVEL=fatal in flaky replicated tests. [#96999](https://github.com/ClickHouse/ClickHouse/pull/96999) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a CI workflow to build PGO+BOLT optimized clang toolchain (2). [#97000](https://github.com/ClickHouse/ClickHouse/pull/97000) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Not for changelog — test-only changes. [#97001](https://github.com/ClickHouse/ClickHouse/pull/97001) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03100_lwu_40_cleanup_race`. [#97012](https://github.com/ClickHouse/ClickHouse/pull/97012) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add MSan integration tests as non-required CI jobs. [#97016](https://github.com/ClickHouse/ClickHouse/pull/97016) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Skip slow integration tests under LLVM coverage builds. [#97017](https://github.com/ClickHouse/ClickHouse/pull/97017) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a CI workflow to build PGO+BOLT optimized clang toolchain (3). [#97018](https://github.com/ClickHouse/ClickHouse/pull/97018) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a CI workflow to build PGO+BOLT optimized clang toolchain (4). [#97024](https://github.com/ClickHouse/ClickHouse/pull/97024) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Synchronize small file changes from the private repo. [#97028](https://github.com/ClickHouse/ClickHouse/pull/97028) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test 03716_mutations_parts_postpone_reasons_mt (1). [#97039](https://github.com/ClickHouse/ClickHouse/pull/97039) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `ALTER MODIFY COLUMN` with statistics. [#97041](https://github.com/ClickHouse/ClickHouse/pull/97041) ([Anton Popov](https://github.com/CurtizJ)).
* Add a CI workflow to build PGO+BOLT optimized clang toolchain (4). [#97042](https://github.com/ClickHouse/ClickHouse/pull/97042) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a CI workflow to build PGO+BOLT optimized clang toolchain (5). [#97056](https://github.com/ClickHouse/ClickHouse/pull/97056) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix inconsistent AST formatting for projection with empty `ORDER BY` key. [#97059](https://github.com/ClickHouse/ClickHouse/pull/97059) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Implement converting PromQLTree to string and use this conversion to simplify function `timeSeriesSelector()`. [#97063](https://github.com/ClickHouse/ClickHouse/pull/97063) ([Vitaly Baranov](https://github.com/vitlibar)).
* Extend tests and docs for preprocessor, expressions index and maps. [#97073](https://github.com/ClickHouse/ClickHouse/pull/97073) ([Jimmy Aguilar Mena](https://github.com/Ergus)).
* Cap memory_tracker_fault_probability to 0.5. [#97079](https://github.com/ClickHouse/ClickHouse/pull/97079) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* [Iceberg] Remove dependency of manifest min max file pruner from manifest file content. [#97080](https://github.com/ClickHouse/ClickHouse/pull/97080) ([Daniil Ivanik](https://github.com/divanik)).
* CI: Do not skip arm performance tests on master branch. [#97086](https://github.com/ClickHouse/ClickHouse/pull/97086) ([Max Kainov](https://github.com/maxknv)).
* CI: Improve bugfix validation job filtering and behavior. [#97090](https://github.com/ClickHouse/ClickHouse/pull/97090) ([Max Kainov](https://github.com/maxknv)).
* Add move constructor to SharedLockGuard. [#97107](https://github.com/ClickHouse/ClickHouse/pull/97107) ([Daniil Ivanik](https://github.com/divanik)).
* Fix flaky test 03780_failed_ssh expect pattern. [#97110](https://github.com/ClickHouse/ClickHouse/pull/97110) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Make avro iceberg deserializer thread safe. [#97111](https://github.com/ClickHouse/ClickHouse/pull/97111) ([Daniil Ivanik](https://github.com/divanik)).
* Move join step row estimation before check for 1 child. [#97114](https://github.com/ClickHouse/ClickHouse/pull/97114) ([Alexander Gololobov](https://github.com/davenger)).
* Fix flaky test test_backup_outer_table. [#97117](https://github.com/ClickHouse/ClickHouse/pull/97117) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add hard timeout to integration test pytest runs. [#97118](https://github.com/ClickHouse/ClickHouse/pull/97118) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix build. [#97119](https://github.com/ClickHouse/ClickHouse/pull/97119) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix flaky ACME TLS integration tests. [#97135](https://github.com/ClickHouse/ClickHouse/pull/97135) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Small fix in doc indices and comment. [#97136](https://github.com/ClickHouse/ClickHouse/pull/97136) ([Jimmy Aguilar Mena](https://github.com/Ergus)).
* Fix lock-order-inversion in librdkafka queue concat/prepend. [#97137](https://github.com/ClickHouse/ClickHouse/pull/97137) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test test_refreshable_mv in DROP DATABASE with Replicated databases. [#97138](https://github.com/ClickHouse/ClickHouse/pull/97138) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test 03442_alter_delete_empty_part. [#97139](https://github.com/ClickHouse/ClickHouse/pull/97139) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix mutations of compact parts with statistics. [#97140](https://github.com/ClickHouse/ClickHouse/pull/97140) ([Anton Popov](https://github.com/CurtizJ)).
* Fix flaky test 00284_external_aggregation on TSan. [#97156](https://github.com/ClickHouse/ClickHouse/pull/97156) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test test_restore_db_replica_with_diffrent_table_metadata. [#97157](https://github.com/ClickHouse/ClickHouse/pull/97157) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a CI workflow to build PGO+BOLT optimized clang toolchain (6). [#97158](https://github.com/ClickHouse/ClickHouse/pull/97158) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix Spark/JVM cascading failures and skip test_ytsaurus under coverage. [#97161](https://github.com/ClickHouse/ClickHouse/pull/97161) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add missing enum keys for `zookeeper_log.error`. [#97163](https://github.com/ClickHouse/ClickHouse/pull/97163) ([Azat Khuzhin](https://github.com/azat)).
* Detect short-lived job failures as infrastructure errors in CI retry workflow. [#97164](https://github.com/ClickHouse/ClickHouse/pull/97164) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Retry boto3 S3 operations on transient credential failures. [#97165](https://github.com/ClickHouse/ClickHouse/pull/97165) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Not for changelog. [#97166](https://github.com/ClickHouse/ClickHouse/pull/97166) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test test_database_delta::test_timestamp_ntz timeout. [#97167](https://github.com/ClickHouse/ClickHouse/pull/97167) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* clickhouse-tests: fix parsing environment variables. [#97168](https://github.com/ClickHouse/ClickHouse/pull/97168) ([Azat Khuzhin](https://github.com/azat)).
* Improve logging of failed query/global profiler initialization - Add rate limiting - And add a hint about RLIMIT_SIGPENDING/pending_signals in the message. [#97171](https://github.com/ClickHouse/ClickHouse/pull/97171) ([Azat Khuzhin](https://github.com/azat)).
* There are columns like `../../../../../../../../../../../etc/hosts` in tests. [#97174](https://github.com/ClickHouse/ClickHouse/pull/97174) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Add test for bug 83262. [#97175](https://github.com/ClickHouse/ClickHouse/pull/97175) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix setting history for `opentelemetry_start_keeper_trace_probability`. [#97177](https://github.com/ClickHouse/ClickHouse/pull/97177) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Fix remove_factor in keeper-bench. [#97192](https://github.com/ClickHouse/ClickHouse/pull/97192) ([Antonio Andelic](https://github.com/antonio2368)).
* Update version_date.tsv and changelog after v25.11.9.34-stable. [#97194](https://github.com/ClickHouse/ClickHouse/pull/97194) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Add a CI workflow to build PGO+BOLT optimized clang toolchain (7). [#97210](https://github.com/ClickHouse/ClickHouse/pull/97210) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add soft time limit to flaky check to prevent timeouts. [#97214](https://github.com/ClickHouse/ClickHouse/pull/97214) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a CI workflow to build PGO+BOLT optimized clang toolchain (8). [#97219](https://github.com/ClickHouse/ClickHouse/pull/97219) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix copyLeftKeyColumnToRight in HashJoin. [#97220](https://github.com/ClickHouse/ClickHouse/pull/97220) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix flaky test_session_expiration in test_keeper_multinode_simple under MSan. [#97229](https://github.com/ClickHouse/ClickHouse/pull/97229) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix S3Queue partition test race condition. [#97230](https://github.com/ClickHouse/ClickHouse/pull/97230) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Escape statistics filenames in packed archive. [#97232](https://github.com/ClickHouse/ClickHouse/pull/97232) ([Azat Khuzhin](https://github.com/azat)).
* Fix links in perf tests report. [#97237](https://github.com/ClickHouse/ClickHouse/pull/97237) ([Nikita Taranov](https://github.com/nickitat)).
* Fix SIGBUS during server shutdown by reordering executor shutdown. [#97240](https://github.com/ClickHouse/ClickHouse/pull/97240) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add timeout to test_secure_connection to prevent hanging under MSan. [#97241](https://github.com/ClickHouse/ClickHouse/pull/97241) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix a potential exception during server shutdown when a MergeTree table was renamed while background tasks were still running. [#97242](https://github.com/ClickHouse/ClickHouse/pull/97242) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test_inserts_and_moves[rmt_volume] in test_ttl_move. [#97243](https://github.com/ClickHouse/ClickHouse/pull/97243) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Handle patch-diff.githubusercontent.com outages in targeted test runs. [#97244](https://github.com/ClickHouse/ClickHouse/pull/97244) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add custom Ninja with timing-based critical path scheduling to toolchain. [#97245](https://github.com/ClickHouse/ClickHouse/pull/97245) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix Ninja build in OptimizeToolchain with CMake 4.1. [#97262](https://github.com/ClickHouse/ClickHouse/pull/97262) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Save Spark logs to artifacts in integration tests. [#97266](https://github.com/ClickHouse/ClickHouse/pull/97266) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test 03917_blockio_move_query_metadata_cache in DatabaseReplicated. [#97267](https://github.com/ClickHouse/ClickHouse/pull/97267) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix if function exception when Nullable branches are wrapped in ColumnConst. [#97272](https://github.com/ClickHouse/ClickHouse/pull/97272) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix group_by_use_nulls constant type mismatch in addConstantIfNecessary. [#97273](https://github.com/ClickHouse/ClickHouse/pull/97273) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Small fuzzer update. [#97280](https://github.com/ClickHouse/ClickHouse/pull/97280) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Add additional validations of ColumnVariant state. [#97282](https://github.com/ClickHouse/ClickHouse/pull/97282) ([Pavel Kruglov](https://github.com/Avogar)).
* Improve Praktika local run usability. [#97285](https://github.com/ClickHouse/ClickHouse/pull/97285) ([Raúl Marín](https://github.com/Algunenano)).
* Add dns_allow_resolve_names_to_ipv4/ipv6 to changeable settings. [#97286](https://github.com/ClickHouse/ClickHouse/pull/97286) ([Sean Haynes](https://github.com/seandhaynes)).
* CI: remove function category check. [#97296](https://github.com/ClickHouse/ClickHouse/pull/97296) ([Shaun Struwig](https://github.com/Blargian)).
* Disable sanitizers for `03911_limit_max_streams_with_split_parts_ranges_into_intersecting_and_non_intersecting_final`. [#97298](https://github.com/ClickHouse/ClickHouse/pull/97298) ([Nikita Taranov](https://github.com/nickitat)).
* Fix flaky 03206_replication_lag_metric test. [#97307](https://github.com/ClickHouse/ClickHouse/pull/97307) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix parser silently consuming `->` token when `parseLambda` fails. [#97317](https://github.com/ClickHouse/ClickHouse/pull/97317) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix AST formatting roundtrip for all-literal tuples and arrays. [#97318](https://github.com/ClickHouse/ClickHouse/pull/97318) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Cap per-test run time at 10 min in targeted check. [#97319](https://github.com/ClickHouse/ClickHouse/pull/97319) ([Nikita Taranov](https://github.com/nickitat)).
* Remove SSH config from default server config directory. [#97334](https://github.com/ClickHouse/ClickHouse/pull/97334) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix 03916_ttl_minmax_projection_epoch_bug test flakiness under TSan. [#97338](https://github.com/ClickHouse/ClickHouse/pull/97338) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Renew anonymous volumes for MySQL containers in integration tests. [#97340](https://github.com/ClickHouse/ClickHouse/pull/97340) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix SSH protocol in CI for FIPS. [#97345](https://github.com/ClickHouse/ClickHouse/pull/97345) ([Azat Khuzhin](https://github.com/azat)).
* Fix data races in quantile metrics. [#97350](https://github.com/ClickHouse/ClickHouse/pull/97350) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Update version_date.tsv and changelog after v25.12.6.38-stable. [#97352](https://github.com/ClickHouse/ClickHouse/pull/97352) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Update version_date.tsv and changelog after v26.1.3.52-stable. [#97353](https://github.com/ClickHouse/ClickHouse/pull/97353) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Fix data race in scheduler node destruction during DROP WORKLOAD. [#97372](https://github.com/ClickHouse/ClickHouse/pull/97372) ([Sergei Trifonov](https://github.com/serxa)).
* Add stress test job for the release build. [#97373](https://github.com/ClickHouse/ClickHouse/pull/97373) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix empty reverse_flags access in convertSortingKeyToInputOrder. [#97377](https://github.com/ClickHouse/ClickHouse/pull/97377) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test_move_failover by adding PUT method filter. [#97378](https://github.com/ClickHouse/ClickHouse/pull/97378) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix QBit distance function tests to handle floating-point differences across ARM CPUs. [#97381](https://github.com/ClickHouse/ClickHouse/pull/97381) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Missing testing features. [#97383](https://github.com/ClickHouse/ClickHouse/pull/97383) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Fix flaky test 03166_skip_indexes_vertical_merge under random settings. [#97390](https://github.com/ClickHouse/ClickHouse/pull/97390) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix BuzzHouse renameObjects exception and create_dictionary state desync. [#97417](https://github.com/ClickHouse/ClickHouse/pull/97417) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix exception in doRestartReplica caused by race with concurrent RENAME. [#97419](https://github.com/ClickHouse/ClickHouse/pull/97419) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Suppress subquery-in-key error in upgrade check. [#97421](https://github.com/ClickHouse/ClickHouse/pull/97421) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `LOGICAL_ERROR` exception when `CHECK TABLE` runs on a replicated table before the replica is fully initialized. [#97424](https://github.com/ClickHouse/ClickHouse/pull/97424) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* ci: fix stress tests failures due to MEMORY_LIMIT_EXCEEDED (mostly for private). [#97425](https://github.com/ClickHouse/ClickHouse/pull/97425) ([Azat Khuzhin](https://github.com/azat)).
* Increase Kafka stateless test wait time from 30s to 120s. [#97427](https://github.com/ClickHouse/ClickHouse/pull/97427) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a cppexpr tool for Claude to be able to run code snippets. [#97428](https://github.com/ClickHouse/ClickHouse/pull/97428) ([Sergei Trifonov](https://github.com/serxa)).
* Add test for duplicate column identifier with Nested subcolumns. [#97442](https://github.com/ClickHouse/ClickHouse/pull/97442) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix link creation when run fast test locally. [#97458](https://github.com/ClickHouse/ClickHouse/pull/97458) ([Alexei Fedotov](https://github.com/leshikus)).
* Mark full-text search as GA (this time really). [#97485](https://github.com/ClickHouse/ClickHouse/pull/97485) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix flaky test test_hedged_requests/test.py::test_stuck_replica. [#97507](https://github.com/ClickHouse/ClickHouse/pull/97507) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* try to unflake 01038_dictionary_lifetime_min_zero_sec. [#97516](https://github.com/ClickHouse/ClickHouse/pull/97516) ([Bharat Nallan](https://github.com/bharatnc)).
* Fix automatic retry misclassifying Finish Workflow as infrastructure failure. [#97518](https://github.com/ClickHouse/ClickHouse/pull/97518) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix database panel closing when clicking on a database name. [#97530](https://github.com/ClickHouse/ClickHouse/pull/97530) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Update clickstack to 2.17.0. Contains credentials omission bug fix that enables use with user/password as expected. [#97533](https://github.com/ClickHouse/ClickHouse/pull/97533) ([Aaron Knudtson](https://github.com/knudtty)).
* Fix race condition in DatabaseReplicated::restoreDatabaseNodesInKeeper. [#97541](https://github.com/ClickHouse/ClickHouse/pull/97541) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test_dcl_management in integration test_quota. [#97542](https://github.com/ClickHouse/ClickHouse/pull/97542) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `03644_cancel_huge_mutation_subquery` test by adding `KILL MUTATION` to handle the race between `SYSTEM STOP MERGES` and background pool scheduling. [#97543](https://github.com/ClickHouse/ClickHouse/pull/97543) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Increase soft timeout margin for flaky check from 5 minutes to 1 hour. [#97548](https://github.com/ClickHouse/ClickHouse/pull/97548) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Allow Bug Fix PRs without new tests if PR has a CI report link. [#97565](https://github.com/ClickHouse/ClickHouse/pull/97565) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Implement TODO in performance tests in CI and optimize the query. [#97566](https://github.com/ClickHouse/ClickHouse/pull/97566) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Truncate issue body to respect GitHub's 65536 char limit. [#97567](https://github.com/ClickHouse/ClickHouse/pull/97567) ([Raúl Marín](https://github.com/Algunenano)).
* Fix sporadic failure of 03634_autopr_input_bytes_estimation_compact. [#97569](https://github.com/ClickHouse/ClickHouse/pull/97569) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add regression test for projection-as-secondary-index with multiple parts. [#97573](https://github.com/ClickHouse/ClickHouse/pull/97573) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test_postgresql_replica_database_engine/test_3.py timeouts. [#97587](https://github.com/ClickHouse/ClickHouse/pull/97587) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test 01111_create_drop_replicated_db_stress. [#97592](https://github.com/ClickHouse/ClickHouse/pull/97592) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix `LOGICAL_ERROR` exception "Committing blocks were not loaded for partition" in `isMutationFinished` when partition has been forgotten via `FORGET PARTITION`. [#97593](https://github.com/ClickHouse/ClickHouse/pull/97593) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky 03803_insert_on_connection_drop test. [#97640](https://github.com/ClickHouse/ClickHouse/pull/97640) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Mark integration test infrastructure failures separately. [#97641](https://github.com/ClickHouse/ClickHouse/pull/97641) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Disable `02481_async_insert_dedup` tests with S3 storage. [#97642](https://github.com/ClickHouse/ClickHouse/pull/97642) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix race condition in KeeperClient test helper causing flaky test_rm_with_version. [#97644](https://github.com/ClickHouse/ClickHouse/pull/97644) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix typo. [#97645](https://github.com/ClickHouse/ClickHouse/pull/97645) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix flaky test_keeper_log_gap_before_committed. [#97648](https://github.com/ClickHouse/ClickHouse/pull/97648) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Disable 03711_deduplication_blocks_part_log under sanitizers. [#97649](https://github.com/ClickHouse/ClickHouse/pull/97649) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error exception in distributed INSERT SELECT with skip_unavailable_shards. [#97674](https://github.com/ClickHouse/ClickHouse/pull/97674) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error in KeyCondition with LowCardinality key column. [#97675](https://github.com/ClickHouse/ClickHouse/pull/97675) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix flaky test test_storage_s3_queue/test_migration. [#97677](https://github.com/ClickHouse/ClickHouse/pull/97677) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `01079_parallel_alter_detach_table_zookeeper`. [#97681](https://github.com/ClickHouse/ClickHouse/pull/97681) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fuzzer fixes. [#97702](https://github.com/ClickHouse/ClickHouse/pull/97702) ([Pedro Ferreira](https://github.com/PedroTadim)).
* fix data race. [#97721](https://github.com/ClickHouse/ClickHouse/pull/97721) ([Sema Checherinda](https://github.com/CheSema)).
* Remove flaky test_under_max_waiting_queries_limit test. [#97722](https://github.com/ClickHouse/ClickHouse/pull/97722) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix tiny issue in trace-visualizer causing all spans to be presented in one color. [#97725](https://github.com/ClickHouse/ClickHouse/pull/97725) ([filimonov](https://github.com/filimonov)).
* Minor (because it is not a hot path) reduction of parts lock scope. [#97727](https://github.com/ClickHouse/ClickHouse/pull/97727) ([Azat Khuzhin](https://github.com/azat)).
* Minor: Rename a variable. [#97740](https://github.com/ClickHouse/ClickHouse/pull/97740) ([Robert Schulze](https://github.com/rschu1ze)).
* tests: fixes for OpenSSL FIPS. [#97742](https://github.com/ClickHouse/ClickHouse/pull/97742) ([Azat Khuzhin](https://github.com/azat)).
* Update jemalloc dashboard with profiler. [#97743](https://github.com/ClickHouse/ClickHouse/pull/97743) ([Antonio Andelic](https://github.com/antonio2368)).
* More consistent naming of some variables. [#97745](https://github.com/ClickHouse/ClickHouse/pull/97745) ([Robert Schulze](https://github.com/rschu1ze)).
* Force in-source documentation for regular functions. [#97747](https://github.com/ClickHouse/ClickHouse/pull/97747) ([Robert Schulze](https://github.com/rschu1ze)).
* test: disable 03791_rmt_watches for object storages (too slow). [#97766](https://github.com/ClickHouse/ClickHouse/pull/97766) ([Azat Khuzhin](https://github.com/azat)).
* Update README with 26.2 release call. [#97773](https://github.com/ClickHouse/ClickHouse/pull/97773) ([Raúl Marín](https://github.com/Algunenano)).
* Backported in [#97925](https://github.com/ClickHouse/ClickHouse/issues/97925): Update chdig to [v26.2.3](https://github.com/azat/chdig/releases/tag/v26.2.2) - fix `task tracing requires Tokio to be built with RUSTFLAGS="--cfg tokio_unstable"` at start, `system.jemalloc_profile_text` integration, faster interface and some fixes for leaving terminal in a slightly bad state after spawning client/editor. [#97810](https://github.com/ClickHouse/ClickHouse/pull/97810) ([Azat Khuzhin](https://github.com/azat)).
* Update README.md. [#97818](https://github.com/ClickHouse/ClickHouse/pull/97818) ([Zoe Steinkamp](https://github.com/zoesteinkamp)).
* Add connection params UI and improve auth in `jemalloc.html`. [#97825](https://github.com/ClickHouse/ClickHouse/pull/97825) ([Antonio Andelic](https://github.com/antonio2368)).
* Syncing with the private repo. cc @Michicosun Some of the changes are yours. Is this right?. [#97830](https://github.com/ClickHouse/ClickHouse/pull/97830) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Backported in [#97901](https://github.com/ClickHouse/ClickHouse/issues/97901): Fix `txn->getState() != MergeTreeTransaction::COMMITTED` for server fuzzer with `implicit_transaction`. [#97835](https://github.com/ClickHouse/ClickHouse/pull/97835) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#98050](https://github.com/ClickHouse/ClickHouse/issues/98050): Check actual jemalloc profiling state via `system.asynchronous_metrics`. [#97863](https://github.com/ClickHouse/ClickHouse/pull/97863) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#98099](https://github.com/ClickHouse/ClickHouse/issues/98099): return user_name within AuthResult from the access storages themselves. [#97884](https://github.com/ClickHouse/ClickHouse/pull/97884) ([Krishna Mannem](https://github.com/kcmannem)).
* Backported in [#98134](https://github.com/ClickHouse/ClickHouse/issues/98134): Remove confusing column `type` from `system.tokenizers`. [#98066](https://github.com/ClickHouse/ClickHouse/pull/98066) ([Robert Schulze](https://github.com/rschu1ze)).
* Backported in [#98121](https://github.com/ClickHouse/ClickHouse/issues/98121): Less logs about deduplication tokens. [#98068](https://github.com/ClickHouse/ClickHouse/pull/98068) ([Sema Checherinda](https://github.com/CheSema)).

#### Performance Optimization

* The default for `concurrent_threads_scheduler` is now `max_min_fair` instead of `fair_round_robin`. This improves fairness under high load by prioritizing queries with fewer allocated slots, so short-running queries aren't penalized by long-running ones. [#95300](https://github.com/ClickHouse/ClickHouse/pull/95300) ([Sergei Trifonov](https://github.com/serxa)).

